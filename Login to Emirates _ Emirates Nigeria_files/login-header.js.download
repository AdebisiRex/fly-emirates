(window.webpackJsonp=window.webpackJsonp||[]).push([["static/rt-acc-1.0.10/pages/login-header.js"],{"d+nA/":function(e,t,r){e.exports=r("dU2+3")},d0yDM:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p={actions:d.default.object,player:d.default.object,className:d.default.string},v=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=n.handleClick.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.actions;e.player.paused?t.play():t.pause()}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,n=t.className,a=r.paused?"Play":"Pause";return f.default.createElement("button",{ref:function(t){e.button=t},className:(0,h.default)(n,{"video-react-play-control":!0,"video-react-control":!0,"video-react-button":!0,"video-react-paused":r.paused,"video-react-playing":!r.paused}),type:"button",tabIndex:"0",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},a))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="PlayToggle"},d1rI7:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("dOr14");Object.defineProperty(t,"attributeCardTracking",{enumerable:!0,get:function(){return n.attributeCardTracking}}),Object.defineProperty(t,"attributeCtaTracking",{enumerable:!0,get:function(){return n.attributeCtaTracking}}),Object.defineProperty(t,"attributeImageTracking",{enumerable:!0,get:function(){return n.attributeImageTracking}}),Object.defineProperty(t,"attributeLinkTracking",{enumerable:!0,get:function(){return n.attributeLinkTracking}}),Object.defineProperty(t,"attributeTabTracking",{enumerable:!0,get:function(){return n.attributeTabTracking}}),Object.defineProperty(t,"attributeIconTracking",{enumerable:!0,get:function(){return n.attributeIconTracking}}),Object.defineProperty(t,"ANALYTICS_AREA_HEADER_LOGO",{enumerable:!0,get:function(){return n.ANALYTICS_AREA_HEADER_LOGO}}),Object.defineProperty(t,"ANALYTICS_AREA_HEADER_NAV",{enumerable:!0,get:function(){return n.ANALYTICS_AREA_HEADER_NAV}}),Object.defineProperty(t,"ANALYTICS_AREA_FOOTER_LOGO",{enumerable:!0,get:function(){return n.ANALYTICS_AREA_FOOTER_LOGO}}),Object.defineProperty(t,"ANALYTICS_AREA_FOOTER_NAV",{enumerable:!0,get:function(){return n.ANALYTICS_AREA_FOOTER_NAV}});var a=r("dvyNr");Object.defineProperty(t,"blendAnalytics",{enumerable:!0,get:function(){return a.blendAnalytics}});var i=r("dWI6X");Object.defineProperty(t,"createClientErrorTracker",{enumerable:!0,get:function(){return i.createClientErrorTracker}}),Object.defineProperty(t,"createSystemErrorTracker",{enumerable:!0,get:function(){return i.createSystemErrorTracker}}),Object.defineProperty(t,"createFormStartTracker",{enumerable:!0,get:function(){return i.createFormStartTracker}}),Object.defineProperty(t,"createFormSubmitTracker",{enumerable:!0,get:function(){return i.createFormSubmitTracker}}),Object.defineProperty(t,"createBodyCardClickTracker",{enumerable:!0,get:function(){return i.createBodyCardClickTracker}}),Object.defineProperty(t,"createPageBodyCtaClickTracker",{enumerable:!0,get:function(){return i.createPageBodyCtaClickTracker}}),Object.defineProperty(t,"createBodyCtaClickTracker",{enumerable:!0,get:function(){return i.createBodyCtaClickTracker}}),Object.defineProperty(t,"createHeaderCtaClickTracker",{enumerable:!0,get:function(){return i.createHeaderCtaClickTracker}}),Object.defineProperty(t,"createFooterCtaClickTracker",{enumerable:!0,get:function(){return i.createFooterCtaClickTracker}}),Object.defineProperty(t,"createBodyIconClickTracker",{enumerable:!0,get:function(){return i.createBodyIconClickTracker}}),Object.defineProperty(t,"createHeaderIconClickTracker",{enumerable:!0,get:function(){return i.createHeaderIconClickTracker}}),Object.defineProperty(t,"createBodyFormFieldClickTracker",{enumerable:!0,get:function(){return i.createBodyFormFieldClickTracker}}),Object.defineProperty(t,"createBodyTabClickTracker",{enumerable:!0,get:function(){return i.createBodyTabClickTracker}}),Object.defineProperty(t,"createHeaderSectionClickTracker",{enumerable:!0,get:function(){return i.createHeaderSectionClickTracker}}),Object.defineProperty(t,"createVideoClickTracker",{enumerable:!0,get:function(){return i.createVideoClickTracker}}),Object.defineProperty(t,"createScrollTracker",{enumerable:!0,get:function(){return i.createScrollTracker}}),Object.defineProperty(t,"createTypedTextboxCountryChooseTracker",{enumerable:!0,get:function(){return i.createTypedTextboxCountryChooseTracker}}),Object.defineProperty(t,"createSelectedCountryChooseTracker",{enumerable:!0,get:function(){return i.createSelectedCountryChooseTracker}}),Object.defineProperty(t,"createSearchTermSubmitTracker",{enumerable:!0,get:function(){return i.createSearchTermSubmitTracker}}),Object.defineProperty(t,"createOnLoadGATracker",{enumerable:!0,get:function(){return i.createOnLoadGATracker}}),Object.defineProperty(t,"createPopupShownTracker",{enumerable:!0,get:function(){return i.createPopupShownTracker}}),Object.defineProperty(t,"createGenericClickTracker",{enumerable:!0,get:function(){return i.createGenericClickTracker}}),Object.defineProperty(t,"createFlightStatusRouteFormSubmitTracker",{enumerable:!0,get:function(){return i.createFlightStatusRouteFormSubmitTracker}}),Object.defineProperty(t,"createFlightStatusFlightFormSubmitTracker",{enumerable:!0,get:function(){return i.createFlightStatusFlightFormSubmitTracker}}),Object.defineProperty(t,"createPaymentTypeClickTracker",{enumerable:!0,get:function(){return i.createPaymentTypeClickTracker}}),Object.defineProperty(t,"createOnLoadCPMTracker",{enumerable:!0,get:function(){return i.createOnLoadCPMTracker}}),Object.defineProperty(t,"createPromoClickTracker",{enumerable:!0,get:function(){return i.createPromoClickTracker}}),Object.defineProperty(t,"createPageBodyInteractionTracker",{enumerable:!0,get:function(){return i.createPageBodyInteractionTracker}})},d284h:function(e,t,r){var n=r("dcDf5").default;function a(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,r=new WeakMap;return(a=function(e){return e?r:t})(e)}e.exports=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!==n(e)&&"function"!=typeof e)return{default:e};var r=a(t);if(r&&r.has(e))return r.get(e);var i={},o=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var s in e)if("default"!==s&&Object.prototype.hasOwnProperty.call(e,s)){var l=o?Object.getOwnPropertyDescriptor(e,s):null;l&&(l.get||l.set)?Object.defineProperty(i,s,l):i[s]=e[s]}return i.default=e,r&&r.set(e,i),i},e.exports.default=e.exports,e.exports.__esModule=!0},d2GSb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.trackLinkClicked=function(e){if(e&&"link"===e.getAttribute("data-ecom-type")){var t=c(e),r=t.id,n=t.name,a=t.creative,i=t.position;window.dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:r,name:n,creative:a,position:i}]}}})}},t.trackPromotionClick=function(e,t,r,n){window.dataLayer.push({event:"promotionClick",ecommerce:{promoClick:{promotions:[{id:e,name:t,creative:r,position:n}]}}})},t.trackCardDisplayed=d,t.initilizeTracker=function(){window.addEventListener("scroll",function(){return d()}),window.addEventListener("resize",function(){return d()}),d()};var n=u(r("dmwIZ")),a=u(r("dbNQv")),i=u(r("dUfWW")),o=r("dvrl2"),s=r("dxLSU"),l=r("d6ByG");function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.getAttribute("data-ecom-id"),r=e.getAttribute("data-ecom-name"),a=e.getAttribute("data-ecom-creative"),l=e.getAttribute("data-ecom-type"),u=t.split("_")[0],c=(0,o.getProductById)(u),d=(0,n.default)((0,o.getComponentConfigById)(u),"page",window.dataLayer[0].pageName.replace(/^\/+/,"").replace(/\s*\/\s*/,"-").trim().toLowerCase()),f=document.querySelectorAll('[data-ecom-type="card"]'),h="card"===l?e:(0,s.findAncestor)(e,'[data-ecom-type="card"]');return{product:c,id:t,name:r,creative:a,pageName:d,position:d+"~slot"+((0,i.default)(f,function(e){return e===h})+1)}}function d(){var e=document.querySelectorAll('[data-ecom-type="card"]');(0,a.default)(e,function(e){if(!e.scollTrackCount&&(0,l.elementInViewport)(e)){var t=c(e),r=t.id,n=t.name,a=t.creative,i=t.position;window.dataLayer.push({event:"promotionView",ecommerce:{promoView:{promotions:[{id:r,name:n,creative:a,position:i}]}}}),e.scollTrackCount=1}})}},d3JFx:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=s(r("dcTRj")),a=s(r("dt0y4")),i=s(r("ds/rx")),o=s(r("d4Y/j"));function s(e){return e&&e.__esModule?e:{default:e}}var l=(0,n.default)("youtube-player"),u={proxyEvents:function(e){var t={},r=function(r){var n="on"+r.slice(0,1).toUpperCase()+r.slice(1);t[n]=function(t){l('event "%s"',n,t),e.trigger(r,t)}},n=!0,a=!1,o=void 0;try{for(var s,u=i.default[Symbol.iterator]();!(n=(s=u.next()).done);n=!0)r(s.value)}catch(e){a=!0,o=e}finally{try{!n&&u.return&&u.return()}finally{if(a)throw o}}return t},promisifyPlayer:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r={},n=function(n){t&&o.default[n]?r[n]=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.then(function(e){var t=o.default[n],a=e.getPlayerState(),i=e[n].apply(e,r);return t.stateChangeRequired||Array.isArray(t.acceptableStates)&&-1===t.acceptableStates.indexOf(a)?new Promise(function(r){e.addEventListener("onStateChange",function n(){var a=e.getPlayerState(),i=void 0;"number"==typeof t.timeout&&(i=setTimeout(function(){e.removeEventListener("onStateChange",n),r()},t.timeout)),Array.isArray(t.acceptableStates)&&-1!==t.acceptableStates.indexOf(a)&&(e.removeEventListener("onStateChange",n),clearTimeout(i),r())})}).then(function(){return i}):i})}:r[n]=function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return e.then(function(e){return e[n].apply(e,r)})}},i=!0,s=!1,l=void 0;try{for(var u,c=a.default[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){n(u.value)}}catch(e){s=!0,l=e}finally{try{!i&&c.return&&c.return()}finally{if(s)throw l}}return r}};t.default=u,e.exports=t.default},d3nJo:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case i.OPERATE:return(0,a.default)({},e,{count:e.count+1,operation:(0,a.default)({},e.operation,t.operation)});default:return e}};var a=n(r("dMVZn")),i=r("dwe7k"),o={count:0,operation:{action:"",source:""}}},d4FqI:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h={player:d.default.object,children:d.default.any},p=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=n.handleClick.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){var e=this.props.children;return f.default.createElement("div",{className:"video-react-menu",onClick:this.handleClick},f.default.createElement("div",{className:"video-react-menu-content"},e))}}]),t}(f.Component);t.default=p,p.propTypes=h,p.displayName="Popup"},"d4Y/j":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=(n=r("du6sg"))&&n.__esModule?n:{default:n};t.default={pauseVideo:{acceptableStates:[a.default.ENDED,a.default.PAUSED],stateChangeRequired:!1},playVideo:{acceptableStates:[a.default.ENDED,a.default.PLAYING],stateChangeRequired:!1},seekTo:{acceptableStates:[a.default.ENDED,a.default.PLAYING,a.default.PAUSED],stateChangeRequired:!0,timeout:3e3}},e.exports=t.default},d4b3c:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n(r("d8nKf")).default)("forward");a.displayName="ForwardControl";var i=a;t.default=i},d4qA7:function(e,t,r){var n;function a(e){function r(){if(r.enabled){var e=r,a=+new Date,i=a-(n||a);e.diff=i,e.prev=n,e.curr=a,n=a;for(var o=new Array(arguments.length),s=0;s<o.length;s++)o[s]=arguments[s];o[0]=t.coerce(o[0]),"string"!=typeof o[0]&&o.unshift("%O");var l=0;o[0]=o[0].replace(/%([a-zA-Z%])/g,function(r,n){if("%%"===r)return r;l++;var a=t.formatters[n];if("function"==typeof a){var i=o[l];r=a.call(e,i),o.splice(l,1),l--}return r}),t.formatArgs.call(e,o),(r.log||t.log||console.log.bind(console)).apply(e,o)}}return r.namespace=e,r.enabled=t.enabled(e),r.useColors=t.useColors(),r.color=function(e){var r,n=0;for(r in e)n=(n<<5)-n+e.charCodeAt(r),n|=0;return t.colors[Math.abs(n)%t.colors.length]}(e),"function"==typeof t.init&&t.init(r),r}(t=e.exports=a.debug=a.default=a).coerce=function(e){return e instanceof Error?e.stack||e.message:e},t.disable=function(){t.enable("")},t.enable=function(e){t.save(e),t.names=[],t.skips=[];for(var r=("string"==typeof e?e:"").split(/[\s,]+/),n=r.length,a=0;a<n;a++)r[a]&&("-"===(e=r[a].replace(/\*/g,".*?"))[0]?t.skips.push(new RegExp("^"+e.substr(1)+"$")):t.names.push(new RegExp("^"+e+"$")))},t.enabled=function(e){var r,n;for(r=0,n=t.skips.length;r<n;r++)if(t.skips[r].test(e))return!1;for(r=0,n=t.names.length;r<n;r++)if(t.names[r].test(e))return!0;return!1},t.humanize=r("dGtzc"),t.names=[],t.skips=[],t.formatters={}},d54lq:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p={actions:d.default.object,player:d.default.object,className:d.default.string},v=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=n.handleClick.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.player;e.actions.toggleFullscreen(t)}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,n=t.className;return f.default.createElement("button",{className:(0,h.default)(n,{"video-react-icon-fullscreen-exit":r.isFullscreen,"video-react-icon-fullscreen":!r.isFullscreen},"video-react-fullscreen-control video-react-control video-react-button video-react-icon"),ref:function(t){e.button=t},type:"button",tabIndex:"0",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},"Non-Fullscreen"))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="FullscreenToggle"},d56F6:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:s,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case o.USER_ACTIVATE:return(0,a.default)({},e,{userActivity:t.activity});case o.PLAYER_ACTIVATE:return(0,a.default)({},e,{isActive:t.activity});case o.FULLSCREEN_CHANGE:return(0,a.default)({},e,{isFullscreen:!!t.isFullscreen});case i.SEEKING_TIME:return(0,a.default)({},e,{seekingTime:t.time});case i.END_SEEKING:return(0,a.default)({},e,{seekingTime:0});case i.LOAD_START:return(0,a.default)({},e,t.videoProps,{hasStarted:!1,ended:!1});case i.CAN_PLAY:return(0,a.default)({},e,t.videoProps,{waiting:!1});case i.WAITING:return(0,a.default)({},e,t.videoProps,{waiting:!0});case i.CAN_PLAY_THROUGH:case i.PLAYING:return(0,a.default)({},e,t.videoProps,{waiting:!1});case i.PLAY:return(0,a.default)({},e,t.videoProps,{ended:!1,paused:!1,autoPaused:!1,waiting:!1,hasStarted:!0});case i.PAUSE:return(0,a.default)({},e,t.videoProps,{paused:!0});case i.END:return(0,a.default)({},e,t.videoProps,{ended:!0});case i.SEEKING:return(0,a.default)({},e,t.videoProps,{seeking:!0});case i.SEEKED:return(0,a.default)({},e,t.videoProps,{seeking:!1});case i.ERROR:return(0,a.default)({},e,t.videoProps,{error:"UNKNOWN ERROR",ended:!0});case i.DURATION_CHANGE:case i.TIME_UPDATE:case i.VOLUME_CHANGE:case i.PROGRESS_CHANGE:case i.RATE_CHANGE:case i.SUSPEND:case i.ABORT:case i.EMPTIED:case i.STALLED:case i.LOADED_META_DATA:case i.LOADED_DATA:case i.RESIZE:return(0,a.default)({},e,t.videoProps);case i.ACTIVATE_TEXT_TRACK:return(0,a.default)({},e,{activeTextTrack:t.textTrack});default:return e}};var a=n(r("dMVZn")),i=r("dINgg"),o=r("dwe7k"),s={currentSrc:null,duration:0,currentTime:0,seekingTime:0,buffered:null,waiting:!1,seeking:!1,paused:!0,autoPaused:!1,ended:!1,playbackRate:1,muted:!1,volume:1,readyState:0,networkState:0,videoWidth:0,videoHeight:0,hasStarted:!1,userActivity:!0,isActive:!1,isFullscreen:!1,activeTextTrack:null}},d5sTZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=m(r("dQbLZ")),a=m(r("dTSYQ")),i=m(r("dJ2iB")),o=m(r("dmwIZ")),s=r("dcDcd"),l=m(s),u=(m(r("d17x9")),r("dBNTa"),r("dMqZe")),c=r("dMZVv"),d=r("dYBKM"),f=m(r("ddsKO")),h=m(r("doIRg")),p=m(r("dAts0")),v=m(r("dx8dI")),g=m(r("dfhzZ"));function m(e){return e&&e.__esModule?e:{default:e}}r("di5LR");var y=(0,d.uniqueId)("content-header"),b=function(e){return(0,a.default)("content-header__section",{"content-header__section--inverted":e})},T=function(e,t,r){return(0,a.default)("content-header__text","content-header__text--"+e,{"content-header__text--inverted":t},r&&r+"__text")},E=function(e,t,r,n,i){return(0,a.default)("content-header__subtext","content-header__subtext--"+e,{"content-header__subtext--inverted":t,"content-header__subtext--hide-on-small":n},r&&r+"__subtext",!(i&&i.length)&&"content-header__subtext--bottom")};function k(e){var t=e.analytics,r=e.content,u=e.hasInvertedColors,d=e.size,m=e.isPageHeader,k=e.extraClass,S=e.hideBodyOnSmallDevices,_=e.linkClassName,C=e.portalContainerIdForVideoControls,P=e.hasSeparator,w=e.isTrackCtaClick,A=e.isDropDownPortal,O=e.useNoSSRForBody,R=e.useCustomHeaderTag,I=e.customHeaderTag,D=e.preTitleA11yText;if((0,i.default)(r))return null;var L=r.preTitle,x=r.title,M=r.body,F=r.subTitle,N=r.link,B=r.logo,j=m?"h1":"h2";R&&(j=I);var U=(0,o.default)(N,"content.compLink.content.identifier"),V=(0,o.default)(r,"logo.metadata.position","bottom-right"),G="top-right"===V||"top-left"===V,H=l.default.createElement(f.default,{className:(0,a.default)(E(d,u,k,S,F)),htmlText:M});return x||L||M||N?l.default.createElement("div",{className:(0,a.default)("content-header",k&&k+"__header"),id:y,tabIndex:-1},B&&G&&l.default.createElement(v.default,{content:B,extraClassName:"fly-better-logo__top"}),C?l.default.createElement("div",{className:(0,a.default)("content-header__video-controls"),id:C}):null,L&&l.default.createElement("p",{className:(0,a.default)(b(u)),dangerouslySetInnerHTML:{__html:L},"aria-hidden":!!D}),!!D&&l.default.createElement("span",{className:"hidden-control"},D),l.default.createElement(j,{className:(0,a.default)(T(d,u,k),"reset-h"),dangerouslySetInnerHTML:{__html:x}}),P&&l.default.createElement("span",{className:"content-header__separator"}),M&&(O?l.default.createElement(h.default,null,H):H),N&&l.default.createElement("div",{className:(0,a.default)("reset-p","content-header__link-p",N.content.compLink&&"content-header__link-p--content-link",k&&k+"__link-p")},N.content.compLink?l.default.createElement(s.Fragment,null,A?l.default.createElement(g.default,{className:(0,a.default)(k+"__button"),analytics:t,content:N.content,isTrackCtaClick:w}):l.default.createElement("div",{id:U,className:(0,a.default)(k+"__portal")})):l.default.createElement(p.default,(0,n.default)({},(0,c.attributeLinkTracking)(N.analytics),{className:(0,a.default)("content-header__link",u&&"content-header__link--inverted",_),content:N.content}))),F&&l.default.createElement("div",{className:(0,a.default)("content-header__bottom-p",!(0,o.default)(N,"content.compLink",null)&&"content-header__bottom-p--large"),dangerouslySetInnerHTML:{__html:F}}),B&&!G&&l.default.createElement(v.default,{content:B})):null}k.defaultProps={hasInvertedColors:!1,size:"medium",hasSeparator:!1,isDropDownPortal:!0,customHeaderTag:"p",preTitleA11yText:""},t.default=(0,u.safeRender)({componentName:"ContentHeader"})(k)},d5v8Y:function(e,t,r){"use strict";var n;r.r(t),r.d(t,"v1",function(){return v}),r.d(t,"v3",function(){return C}),r.d(t,"v4",function(){return P}),r.d(t,"v5",function(){return O}),r.d(t,"NIL",function(){return R}),r.d(t,"version",function(){return I}),r.d(t,"validate",function(){return s}),r.d(t,"stringify",function(){return f}),r.d(t,"parse",function(){return g});var a=new Uint8Array(16);function i(){if(!n&&!(n="undefined"!=typeof crypto&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||"undefined"!=typeof msCrypto&&"function"==typeof msCrypto.getRandomValues&&msCrypto.getRandomValues.bind(msCrypto)))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return n(a)}for(var o=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i,s=function(e){return"string"==typeof e&&o.test(e)},l=[],u=0;u<256;++u)l.push((u+256).toString(16).substr(1));var c,d,f=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=(l[e[t+0]]+l[e[t+1]]+l[e[t+2]]+l[e[t+3]]+"-"+l[e[t+4]]+l[e[t+5]]+"-"+l[e[t+6]]+l[e[t+7]]+"-"+l[e[t+8]]+l[e[t+9]]+"-"+l[e[t+10]]+l[e[t+11]]+l[e[t+12]]+l[e[t+13]]+l[e[t+14]]+l[e[t+15]]).toLowerCase();if(!s(r))throw TypeError("Stringified UUID is invalid");return r},h=0,p=0,v=function(e,t,r){var n=t&&r||0,a=t||new Array(16),o=(e=e||{}).node||c,s=void 0!==e.clockseq?e.clockseq:d;if(null==o||null==s){var l=e.random||(e.rng||i)();null==o&&(o=c=[1|l[0],l[1],l[2],l[3],l[4],l[5]]),null==s&&(s=d=16383&(l[6]<<8|l[7]))}var u=void 0!==e.msecs?e.msecs:Date.now(),v=void 0!==e.nsecs?e.nsecs:p+1,g=u-h+(v-p)/1e4;if(g<0&&void 0===e.clockseq&&(s=s+1&16383),(g<0||u>h)&&void 0===e.nsecs&&(v=0),v>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");h=u,p=v,d=s;var m=(1e4*(268435455&(u+=122192928e5))+v)%4294967296;a[n++]=m>>>24&255,a[n++]=m>>>16&255,a[n++]=m>>>8&255,a[n++]=255&m;var y=u/4294967296*1e4&268435455;a[n++]=y>>>8&255,a[n++]=255&y,a[n++]=y>>>24&15|16,a[n++]=y>>>16&255,a[n++]=s>>>8|128,a[n++]=255&s;for(var b=0;b<6;++b)a[n+b]=o[b];return t||f(a)},g=function(e){if(!s(e))throw TypeError("Invalid UUID");var t,r=new Uint8Array(16);return r[0]=(t=parseInt(e.slice(0,8),16))>>>24,r[1]=t>>>16&255,r[2]=t>>>8&255,r[3]=255&t,r[4]=(t=parseInt(e.slice(9,13),16))>>>8,r[5]=255&t,r[6]=(t=parseInt(e.slice(14,18),16))>>>8,r[7]=255&t,r[8]=(t=parseInt(e.slice(19,23),16))>>>8,r[9]=255&t,r[10]=(t=parseInt(e.slice(24,36),16))/1099511627776&255,r[11]=t/4294967296&255,r[12]=t>>>24&255,r[13]=t>>>16&255,r[14]=t>>>8&255,r[15]=255&t,r},m=function(e,t,r){function n(e,n,a,i){if("string"==typeof e&&(e=function(e){e=unescape(encodeURIComponent(e));for(var t=[],r=0;r<e.length;++r)t.push(e.charCodeAt(r));return t}(e)),"string"==typeof n&&(n=g(n)),16!==n.length)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var o=new Uint8Array(16+e.length);if(o.set(n),o.set(e,n.length),(o=r(o))[6]=15&o[6]|t,o[8]=63&o[8]|128,a){i=i||0;for(var s=0;s<16;++s)a[i+s]=o[s];return a}return f(o)}try{n.name=e}catch(e){}return n.DNS="6ba7b810-9dad-11d1-80b4-00c04fd430c8",n.URL="6ba7b811-9dad-11d1-80b4-00c04fd430c8",n};function y(e){return 14+(e+64>>>9<<4)+1}function b(e,t){var r=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(r>>16)<<16|65535&r}function T(e,t,r,n,a,i){return b((o=b(b(t,e),b(n,i)))<<(s=a)|o>>>32-s,r);var o,s}function E(e,t,r,n,a,i,o){return T(t&r|~t&n,e,t,a,i,o)}function k(e,t,r,n,a,i,o){return T(t&n|r&~n,e,t,a,i,o)}function S(e,t,r,n,a,i,o){return T(t^r^n,e,t,a,i,o)}function _(e,t,r,n,a,i,o){return T(r^(t|~n),e,t,a,i,o)}var C=m("v3",48,function(e){if("string"==typeof e){var t=unescape(encodeURIComponent(e));e=new Uint8Array(t.length);for(var r=0;r<t.length;++r)e[r]=t.charCodeAt(r)}return function(e){for(var t=[],r=32*e.length,n=0;n<r;n+=8){var a=e[n>>5]>>>n%32&255,i=parseInt("0123456789abcdef".charAt(a>>>4&15)+"0123456789abcdef".charAt(15&a),16);t.push(i)}return t}(function(e,t){e[t>>5]|=128<<t%32,e[y(t)-1]=t;for(var r=1732584193,n=-271733879,a=-1732584194,i=271733878,o=0;o<e.length;o+=16){var s=r,l=n,u=a,c=i;r=_(r=S(r=S(r=S(r=S(r=k(r=k(r=k(r=k(r=E(r=E(r=E(r=E(r,n,a,i,e[o],7,-680876936),n=E(n,a=E(a,i=E(i,r,n,a,e[o+1],12,-389564586),r,n,e[o+2],17,606105819),i,r,e[o+3],22,-1044525330),a,i,e[o+4],7,-176418897),n=E(n,a=E(a,i=E(i,r,n,a,e[o+5],12,1200080426),r,n,e[o+6],17,-1473231341),i,r,e[o+7],22,-45705983),a,i,e[o+8],7,1770035416),n=E(n,a=E(a,i=E(i,r,n,a,e[o+9],12,-1958414417),r,n,e[o+10],17,-42063),i,r,e[o+11],22,-1990404162),a,i,e[o+12],7,1804603682),n=E(n,a=E(a,i=E(i,r,n,a,e[o+13],12,-40341101),r,n,e[o+14],17,-1502002290),i,r,e[o+15],22,1236535329),a,i,e[o+1],5,-165796510),n=k(n,a=k(a,i=k(i,r,n,a,e[o+6],9,-1069501632),r,n,e[o+11],14,643717713),i,r,e[o],20,-373897302),a,i,e[o+5],5,-701558691),n=k(n,a=k(a,i=k(i,r,n,a,e[o+10],9,38016083),r,n,e[o+15],14,-660478335),i,r,e[o+4],20,-405537848),a,i,e[o+9],5,568446438),n=k(n,a=k(a,i=k(i,r,n,a,e[o+14],9,-1019803690),r,n,e[o+3],14,-187363961),i,r,e[o+8],20,1163531501),a,i,e[o+13],5,-1444681467),n=k(n,a=k(a,i=k(i,r,n,a,e[o+2],9,-51403784),r,n,e[o+7],14,1735328473),i,r,e[o+12],20,-1926607734),a,i,e[o+5],4,-378558),n=S(n,a=S(a,i=S(i,r,n,a,e[o+8],11,-2022574463),r,n,e[o+11],16,1839030562),i,r,e[o+14],23,-35309556),a,i,e[o+1],4,-1530992060),n=S(n,a=S(a,i=S(i,r,n,a,e[o+4],11,1272893353),r,n,e[o+7],16,-155497632),i,r,e[o+10],23,-1094730640),a,i,e[o+13],4,681279174),n=S(n,a=S(a,i=S(i,r,n,a,e[o],11,-358537222),r,n,e[o+3],16,-722521979),i,r,e[o+6],23,76029189),a,i,e[o+9],4,-640364487),n=S(n,a=S(a,i=S(i,r,n,a,e[o+12],11,-421815835),r,n,e[o+15],16,530742520),i,r,e[o+2],23,-995338651),a,i,e[o],6,-198630844),n=_(n=_(n=_(n=_(n,a=_(a,i=_(i,r,n,a,e[o+7],10,1126891415),r,n,e[o+14],15,-1416354905),i,r,e[o+5],21,-57434055),a=_(a,i=_(i,r=_(r,n,a,i,e[o+12],6,1700485571),n,a,e[o+3],10,-1894986606),r,n,e[o+10],15,-1051523),i,r,e[o+1],21,-2054922799),a=_(a,i=_(i,r=_(r,n,a,i,e[o+8],6,1873313359),n,a,e[o+15],10,-30611744),r,n,e[o+6],15,-1560198380),i,r,e[o+13],21,1309151649),a=_(a,i=_(i,r=_(r,n,a,i,e[o+4],6,-145523070),n,a,e[o+11],10,-1120210379),r,n,e[o+2],15,718787259),i,r,e[o+9],21,-343485551),r=b(r,s),n=b(n,l),a=b(a,u),i=b(i,c)}return[r,n,a,i]}(function(e){if(0===e.length)return[];for(var t=8*e.length,r=new Uint32Array(y(t)),n=0;n<t;n+=8)r[n>>5]|=(255&e[n/8])<<n%32;return r}(e),8*e.length))}),P=function(e,t,r){var n=(e=e||{}).random||(e.rng||i)();if(n[6]=15&n[6]|64,n[8]=63&n[8]|128,t){r=r||0;for(var a=0;a<16;++a)t[r+a]=n[a];return t}return f(n)};function w(e,t,r,n){switch(e){case 0:return t&r^~t&n;case 1:return t^r^n;case 2:return t&r^t&n^r&n;case 3:return t^r^n}}function A(e,t){return e<<t|e>>>32-t}var O=m("v5",80,function(e){var t=[1518500249,1859775393,2400959708,3395469782],r=[1732584193,4023233417,2562383102,271733878,3285377520];if("string"==typeof e){var n=unescape(encodeURIComponent(e));e=[];for(var a=0;a<n.length;++a)e.push(n.charCodeAt(a))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var i=e.length/4+2,o=Math.ceil(i/16),s=new Array(o),l=0;l<o;++l){for(var u=new Uint32Array(16),c=0;c<16;++c)u[c]=e[64*l+4*c]<<24|e[64*l+4*c+1]<<16|e[64*l+4*c+2]<<8|e[64*l+4*c+3];s[l]=u}s[o-1][14]=8*(e.length-1)/Math.pow(2,32),s[o-1][14]=Math.floor(s[o-1][14]),s[o-1][15]=8*(e.length-1)&4294967295;for(var d=0;d<o;++d){for(var f=new Uint32Array(80),h=0;h<16;++h)f[h]=s[d][h];for(var p=16;p<80;++p)f[p]=A(f[p-3]^f[p-8]^f[p-14]^f[p-16],1);for(var v=r[0],g=r[1],m=r[2],y=r[3],b=r[4],T=0;T<80;++T){var E=Math.floor(T/20),k=A(v,5)+w(E,g,m,y)+b+t[E]+f[T]>>>0;b=y,y=m,m=A(g,30)>>>0,g=v,v=k}r[0]=r[0]+v>>>0,r[1]=r[1]+g>>>0,r[2]=r[2]+m>>>0,r[3]=r[3]+y>>>0,r[4]=r[4]+b>>>0}return[r[0]>>24&255,r[0]>>16&255,r[0]>>8&255,255&r[0],r[1]>>24&255,r[1]>>16&255,r[1]>>8&255,255&r[1],r[2]>>24&255,r[2]>>16&255,r[2]>>8&255,255&r[2],r[3]>>24&255,r[3]>>16&255,r[3]>>8&255,255&r[3],r[4]>>24&255,r[4]>>16&255,r[4]>>8&255,255&r[4]]}),R="00000000-0000-0000-0000-000000000000",I=function(e){if(!s(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}},d5yJu:function(e,t,r){"use strict";function n(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}r.r(t),t.default=function(e,t){var r;void 0===t&&(t=n);var a,i=[],o=!1;return function(){for(var n=arguments.length,s=new Array(n),l=0;l<n;l++)s[l]=arguments[l];return o&&r===this&&t(s,i)||(a=e.apply(this,s),o=!0,r=this,i=s),a}}},d6ByG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.elementInViewport=function(e){for(var t=e,r=t.offsetTop,n=t.offsetLeft,a=t.offsetWidth,i=t.offsetHeight;t.offsetParent;)r+=(t=t.offsetParent).offsetTop,n+=t.offsetLeft;return r<window.pageYOffset+window.innerHeight&&n<window.pageXOffset+window.innerWidth&&r+i>window.pageYOffset&&n+a>window.pageXOffset}},d7Eru:function(e,t,r){},d7W2i:function(e,t,r){var n=r("dSksO");e.exports=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&n(e,t)},e.exports.default=e.exports,e.exports.__esModule=!0},d7liZ:function(e,t,r){},d8Dvo:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.calculateTopPositionWithStickyHeaderOffset=function(e){var t=e?document.getElementsByClassName(e):document.querySelector(".header-popup__wrapper--active");return t?e&&t.length?t[0].offsetHeight:n:0};var n=41},d8nKf:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h={actions:d.default.object,className:d.default.string,seconds:d.default.oneOf([5,10,30])},p={seconds:10};t.default=function(e){var t=function(t){function r(e,t){var n;return(0,i.default)(this,r),(n=(0,s.default)(this,(0,l.default)(r).call(this,e,t))).handleClick=n.handleClick.bind((0,u.default)(n)),n}return(0,c.default)(r,t),(0,o.default)(r,[{key:"handleClick",value:function(){var t=this.props,r=t.actions,n=t.seconds;"forward"===e?r.forward(n):r.replay(n)}},{key:"render",value:function(){var t=this,r=this.props,n=r.seconds,a=r.className,i=["video-react-control","video-react-button","video-react-icon"];return i.push("video-react-icon-".concat(e,"-").concat(n),"video-react-".concat(e,"-control")),a&&i.push(a),f.default.createElement("button",{ref:function(e){t.button=e},className:i.join(" "),type:"button",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},"".concat(e," ").concat(n," seconds")))}}]),r}(f.Component);return t.propTypes=h,t.defaultProps=p,t}},"d9B4+":function(e,t,r){e.exports=r("dAKa/")()},d9fXb:function(e,t,r){},"dAKa/":function(e,t,r){"use strict";var n=r("dd+Od");function a(){}function i(){}i.resetWarningCache=a,e.exports=function(){function e(e,t,r,a,i,o){if(o!==n){var s=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw s.name="Invariant Violation",s}}function t(){return e}e.isRequired=e;var r={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:i,resetWarningCache:a};return r.PropTypes=r,r}},dAZ0a:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dpVnL")),o=a(r("dlwsE")),s=a(r("dW8MJ")),l=a(r("da1gu")),u=a(r("dNsbk")),c=a(r("dPJYZ")),d=a(r("d7W2i")),f=a(r("d9B4+")),h=n(r("dcDcd")),p=a(r("dTSYQ")),v=a(r("dQJtQ")),g=a(r("dQrqe")),m={player:f.default.object,actions:f.default.object,vertical:f.default.bool,className:f.default.string,alwaysShowVolume:f.default.bool},y=function(e){function t(e,r){var n;return(0,o.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).state={active:!1},n.handleClick=n.handleClick.bind((0,c.default)(n)),n.handleFocus=n.handleFocus.bind((0,c.default)(n)),n.handleBlur=n.handleBlur.bind((0,c.default)(n)),n}return(0,d.default)(t,e),(0,s.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.player;e.actions.mute(!t.muted)}},{key:"handleFocus",value:function(){this.setState({active:!0})}},{key:"handleBlur",value:function(){this.setState({active:!1})}},{key:"render",value:function(){var e=this.props,t=e.vertical,r=e.player,n=e.className,a=!t,o=this.volumeLevel;return h.default.createElement(v.default,{className:(0,p.default)(n,{"video-react-volume-menu-button-vertical":t,"video-react-volume-menu-button-horizontal":!t,"video-react-vol-muted":r.muted,"video-react-vol-0":0===o&&!r.muted,"video-react-vol-1":1===o,"video-react-vol-2":2===o,"video-react-vol-3":3===o,"video-react-slider-active":this.props.alwaysShowVolume||this.state.active,"video-react-lock-showing":this.props.alwaysShowVolume||this.state.active},"video-react-volume-menu-button"),onClick:this.handleClick,inline:a},h.default.createElement(g.default,(0,i.default)({onFocus:this.handleFocus,onBlur:this.handleBlur},this.props)))}},{key:"volumeLevel",get:function(){var e=this.props.player,t=e.volume,r=e.muted,n=3;return 0===t||r?n=0:t<.33?n=1:t<.67&&(n=2),n}}]),t}(h.Component);y.propTypes=m,y.defaultProps={vertical:!1},y.displayName="VolumeMenuButton";var b=y;t.default=b},dBnag:function(e,t){e.exports=function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")},e.exports.default=e.exports,e.exports.__esModule=!0},"dD+Oc":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=s(r("dMEFE")),i=s(r("dMIx2")),o=s(r("d3JFx"));function s(e){return e&&e.__esModule?e:{default:e}}var l=void 0;t.default=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=(0,a.default)();if(l||(l=(0,i.default)(s)),t.events)throw new Error("Event handlers cannot be overwritten.");if("string"==typeof e&&!document.getElementById(e))throw new Error('Element "'+e+'" does not exist.');t.events=o.default.proxyEvents(s);var u=new Promise(function(r){"object"===(void 0===e?"undefined":n(e))&&e.playVideo instanceof Function?r(e):l.then(function(n){var a=new n.Player(e,t);return s.on("ready",function(){r(a)}),null})}),c=o.default.promisifyPlayer(u,r);return c.on=s.on,c.off=s.off,c},e.exports=t.default},dDGqw:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p=a(r("dU3K2")),v={player:d.default.object,actions:d.default.object,rates:d.default.array,className:d.default.string},g=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleSelectItem=n.handleSelectItem.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"handleSelectItem",value:function(e){var t=this.props,r=t.rates,n=t.actions;e>=0&&e<r.length&&n.changeRate(r[e])}},{key:"render",value:function(){var e=this.props,t=e.rates,r=e.player,n=t.map(function(e){return{label:"".concat(e,"x"),value:e}}),a=t.indexOf(r.playbackRate)||0;return f.default.createElement(p.default,{className:(0,h.default)("video-react-playback-rate",this.props.className),onSelectItem:this.handleSelectItem,items:n,selectedIndex:a},f.default.createElement("span",{className:"video-react-control-text"},"Playback Rate"),f.default.createElement("div",{className:"video-react-playback-rate-value"},"".concat(r.playbackRate.toFixed(2),"x")))}}]),t}(f.Component);g.propTypes=v,g.defaultProps={rates:[2,1.5,1.25,1,.5,.25]},g.displayName="PlaybackRateMenuButton";var m=g;t.default=m},dDeZD:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p={item:d.default.object,index:d.default.number,activateIndex:d.default.number,onSelectItem:d.default.func},v=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=n.handleClick.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(){var e=this.props,t=e.index;(0,e.onSelectItem)(t)}},{key:"render",value:function(){var e=this.props,t=e.item,r=e.index,n=e.activateIndex;return f.default.createElement("li",{className:(0,h.default)({"video-react-menu-item":!0,"video-react-selected":r===n}),role:"menuitem",onClick:this.handleClick},t.label,f.default.createElement("span",{className:"video-react-control-text"}))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="MenuItem"},dEVUy:function(e,t,r){"use strict";function n(e){var t;if(e.getBoundingClientRect&&e.parentNode&&(t=e.getBoundingClientRect()),!t)return{left:0,top:0};var r=document,n=r.body,a=r.documentElement,i=a.clientLeft||n.clientLeft||0,o=window.pageXOffset||n.scrollLeft,s=t.left+o-i,l=a.clientTop||n.clientTop||0,u=window.pageYOffset||n.scrollTop,c=t.top+u-l;return{left:Math.round(s),top:Math.round(c)}}Object.defineProperty(t,"__esModule",{value:!0}),t.findElPosition=n,t.getPointerPosition=function(e,t){var r={},a=n(e),i=e.offsetWidth,o=e.offsetHeight,s=a.top,l=a.left,u=t.pageY,c=t.pageX;return t.changedTouches&&(c=t.changedTouches[0].pageX,u=t.changedTouches[0].pageY),r.y=Math.max(0,Math.min(1,(s-u+o)/o)),r.x=Math.max(0,Math.min(1,(c-l)/i)),r},t.blurNode=function(e){e&&e.blur&&e.blur()},t.focusNode=function(e){e&&e.focus&&e.focus()},t.hasClass=function(e,t){for(var r=e.className.split(" "),n=0;n<r.length;n++)if(r[n].toLowerCase()===t.toLowerCase())return!0;return!1}},dEbDI:function(e,t){e.exports=function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)},e.exports.default=e.exports,e.exports.__esModule=!0},dEcod:function(e,t,r){},dEdwz:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dMVZn")),o=a(r("dlwsE")),s=a(r("dW8MJ")),l=a(r("da1gu")),u=a(r("dNsbk")),c=a(r("dPJYZ")),d=a(r("d7W2i")),f=a(r("d9B4+")),h=n(r("dcDcd")),p=a(r("dTSYQ")),v=r("dtJTW"),g={actions:f.default.object,player:f.default.object,children:f.default.any,startTime:f.default.number,loop:f.default.bool,muted:f.default.bool,autoPlay:f.default.bool,playsInline:f.default.bool,src:f.default.string,poster:f.default.string,className:f.default.string,preload:f.default.oneOf(["auto","metadata","none"]),crossOrigin:f.default.string,onLoadStart:f.default.func,onWaiting:f.default.func,onCanPlay:f.default.func,onCanPlayThrough:f.default.func,onPlaying:f.default.func,onEnded:f.default.func,onSeeking:f.default.func,onSeeked:f.default.func,onPlay:f.default.func,onPause:f.default.func,onProgress:f.default.func,onDurationChange:f.default.func,onError:f.default.func,onSuspend:f.default.func,onAbort:f.default.func,onEmptied:f.default.func,onStalled:f.default.func,onLoadedMetadata:f.default.func,onLoadedData:f.default.func,onTimeUpdate:f.default.func,onRateChange:f.default.func,onVolumeChange:f.default.func,onResize:f.default.func},m=function(e){function t(e){var r;return(0,o.default)(this,t),(r=(0,l.default)(this,(0,u.default)(t).call(this,e))).video=null,r.play=r.play.bind((0,c.default)(r)),r.pause=r.pause.bind((0,c.default)(r)),r.seek=r.seek.bind((0,c.default)(r)),r.forward=r.forward.bind((0,c.default)(r)),r.replay=r.replay.bind((0,c.default)(r)),r.toggleFullscreen=r.toggleFullscreen.bind((0,c.default)(r)),r.getProperties=r.getProperties.bind((0,c.default)(r)),r.renderChildren=r.renderChildren.bind((0,c.default)(r)),r.handleLoadStart=r.handleLoadStart.bind((0,c.default)(r)),r.handleCanPlay=r.handleCanPlay.bind((0,c.default)(r)),r.handleCanPlayThrough=r.handleCanPlayThrough.bind((0,c.default)(r)),r.handlePlay=r.handlePlay.bind((0,c.default)(r)),r.handlePlaying=r.handlePlaying.bind((0,c.default)(r)),r.handlePause=r.handlePause.bind((0,c.default)(r)),r.handleEnded=r.handleEnded.bind((0,c.default)(r)),r.handleWaiting=r.handleWaiting.bind((0,c.default)(r)),r.handleSeeking=r.handleSeeking.bind((0,c.default)(r)),r.handleSeeked=r.handleSeeked.bind((0,c.default)(r)),r.handleFullscreenChange=r.handleFullscreenChange.bind((0,c.default)(r)),r.handleError=r.handleError.bind((0,c.default)(r)),r.handleSuspend=r.handleSuspend.bind((0,c.default)(r)),r.handleAbort=r.handleAbort.bind((0,c.default)(r)),r.handleEmptied=r.handleEmptied.bind((0,c.default)(r)),r.handleStalled=r.handleStalled.bind((0,c.default)(r)),r.handleLoadedMetaData=r.handleLoadedMetaData.bind((0,c.default)(r)),r.handleLoadedData=r.handleLoadedData.bind((0,c.default)(r)),r.handleTimeUpdate=r.handleTimeUpdate.bind((0,c.default)(r)),r.handleRateChange=r.handleRateChange.bind((0,c.default)(r)),r.handleVolumeChange=r.handleVolumeChange.bind((0,c.default)(r)),r.handleDurationChange=r.handleDurationChange.bind((0,c.default)(r)),r.handleProgress=(0,v.throttle)(r.handleProgress.bind((0,c.default)(r)),250),r.handleKeypress=r.handleKeypress.bind((0,c.default)(r)),r.handleTextTrackChange=r.handleTextTrackChange.bind((0,c.default)(r)),r}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.forceUpdate(),this.video&&this.video.textTracks&&(this.video.textTracks.onaddtrack=this.handleTextTrackChange,this.video.textTracks.onremovetrack=this.handleTextTrackChange)}},{key:"getProperties",value:function(){var e=this;return this.video?v.mediaProperties.reduce(function(t,r){return t[r]=e.video[r],t},{}):null}},{key:"handleTextTrackChange",value:function(){var e=this.props,t=e.actions,r=e.player;if(this.video&&this.video.textTracks){var n=Array.from(this.video.textTracks).find(function(e){return"showing"===e.mode});n!==r.activeTextTrack&&t.activateTextTrack(n)}}},{key:"play",value:function(){var e=this.video.play();void 0!==e&&e.catch(function(){}).then(function(){})}},{key:"pause",value:function(){var e=this.video.pause();void 0!==e&&e.catch(function(){}).then(function(){})}},{key:"load",value:function(){this.video.load()}},{key:"addTextTrack",value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:"canPlayType",value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:"togglePlay",value:function(){this.video.paused?this.play():this.pause()}},{key:"seek",value:function(e){try{this.video.currentTime=e}catch(e){}}},{key:"forward",value:function(e){this.seek(this.video.currentTime+e)}},{key:"replay",value:function(e){this.forward(-e)}},{key:"toggleFullscreen",value:function(){var e=this.props,t=e.player;e.actions.toggleFullscreen(t)}},{key:"handleLoadStart",value:function(){var e=this.props,t=e.actions,r=e.onLoadStart;t.handleLoadStart(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleCanPlay",value:function(){var e=this.props,t=e.actions,r=e.onCanPlay;t.handleCanPlay(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleCanPlayThrough",value:function(){var e=this.props,t=e.actions,r=e.onCanPlayThrough;t.handleCanPlayThrough(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handlePlaying",value:function(){var e=this.props,t=e.actions,r=e.onPlaying;t.handlePlaying(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handlePlay",value:function(){var e=this.props,t=e.actions,r=e.onPlay;t.handlePlay(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handlePause",value:function(){var e=this.props,t=e.actions,r=e.onPause;t.handlePause(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleDurationChange",value:function(){var e=this.props,t=e.actions,r=e.onDurationChange;t.handleDurationChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleProgress",value:function(){var e=this.props,t=e.actions,r=e.onProgress;this.video&&t.handleProgressChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleEnded",value:function(){var e=this.props,t=e.loop,r=e.player,n=e.actions,a=e.onEnded;t?(this.seek(0),this.play()):r.paused||this.pause(),n.handleEnd(this.getProperties()),a&&a.apply(void 0,arguments)}},{key:"handleWaiting",value:function(){var e=this.props,t=e.actions,r=e.onWaiting;t.handleWaiting(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleSeeking",value:function(){var e=this.props,t=e.actions,r=e.onSeeking;t.handleSeeking(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleSeeked",value:function(){var e=this.props,t=e.actions,r=e.onSeeked;t.handleSeeked(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleFullscreenChange",value:function(){}},{key:"handleSuspend",value:function(){var e=this.props,t=e.actions,r=e.onSuspend;t.handleSuspend(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleAbort",value:function(){var e=this.props,t=e.actions,r=e.onAbort;t.handleAbort(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleEmptied",value:function(){var e=this.props,t=e.actions,r=e.onEmptied;t.handleEmptied(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleStalled",value:function(){var e=this.props,t=e.actions,r=e.onStalled;t.handleStalled(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleLoadedMetaData",value:function(){var e=this.props,t=e.actions,r=e.onLoadedMetadata,n=e.startTime;n&&n>0&&(this.video.currentTime=n),t.handleLoadedMetaData(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleLoadedData",value:function(){var e=this.props,t=e.actions,r=e.onLoadedData;t.handleLoadedData(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleTimeUpdate",value:function(){var e=this.props,t=e.actions,r=e.onTimeUpdate;t.handleTimeUpdate(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleRateChange",value:function(){var e=this.props,t=e.actions,r=e.onRateChange;t.handleRateChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleVolumeChange",value:function(){var e=this.props,t=e.actions,r=e.onVolumeChange;t.handleVolumeChange(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleError",value:function(){var e=this.props,t=e.actions,r=e.onError;t.handleError(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleResize",value:function(){var e=this.props,t=e.actions,r=e.onResize;t.handleResize(this.getProperties()),r&&r.apply(void 0,arguments)}},{key:"handleKeypress",value:function(){}},{key:"renderChildren",value:function(){var e=this,t=(0,i.default)({},this.props,{video:this.video});return this.video?h.default.Children.toArray(this.props.children).filter(v.isVideoChild).map(function(r){var n;if("string"==typeof r.type){if("source"===r.type){var a=(n=(0,i.default)({},r.props)).onError;n.onError=function(){a&&a.apply(void 0,arguments),e.handleError.apply(e,arguments)}}}else n=t;return h.default.cloneElement(r,n)}):null}},{key:"render",value:function(){var e=this,t=this.props,r=t.loop,n=t.poster,a=t.preload,i=t.src,o=t.autoPlay,s=t.playsInline,l=t.muted,u=t.crossOrigin,c=t.videoId;return h.default.createElement("video",{className:(0,p.default)("video-react-video",this.props.className),id:c,crossOrigin:u,ref:function(t){e.video=t},muted:l,preload:a,loop:r,playsInline:s,autoPlay:o,poster:n,src:i,onLoadStart:this.handleLoadStart,onWaiting:this.handleWaiting,onCanPlay:this.handleCanPlay,onCanPlayThrough:this.handleCanPlayThrough,onPlaying:this.handlePlaying,onEnded:this.handleEnded,onSeeking:this.handleSeeking,onSeeked:this.handleSeeked,onPlay:this.handlePlay,onPause:this.handlePause,onProgress:this.handleProgress,onDurationChange:this.handleDurationChange,onError:this.handleError,onSuspend:this.handleSuspend,onAbort:this.handleAbort,onEmptied:this.handleEmptied,onStalled:this.handleStalled,onLoadedMetadata:this.handleLoadedMetaData,onLoadedData:this.handleLoadedData,onTimeUpdate:this.handleTimeUpdate,onRateChange:this.handleRateChange,onVolumeChange:this.handleVolumeChange,tabIndex:"-1"},this.renderChildren())}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){e>1&&(e=1),e<0&&(e=0),this.video.volume=e}},{key:"videoWidth",get:function(){return this.video.videoWidth}},{key:"videoHeight",get:function(){return this.video.videoHeight}}]),t}(h.Component);t.default=m,m.propTypes=g,m.displayName="Video"},dEvct:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.focusAndScroll=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r="string"==typeof e?document.getElementById(e):e;if(r){var s=r.getAttribute("tabIndex");(0,n.default)(s)&&r.setAttribute("tabIndex",-1),r.focus();var l=(0,i.calculateTopPositionWithStickyHeaderOffset)(),u=(0,o.dimensions)(r).top;(0,a.default)(0,u-t-l,{duration:600}),(0,n.default)(s)&&r.removeAttribute("tabIndex")}};var n=s(r("d6qam")),a=s(r("dQVMK")),i=r("d8Dvo"),o=r("dT+Zs");function s(e){return e&&e.__esModule?e:{default:e}}},dFBPE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IconListPropType=void 0;var n,a=(n=r("d17x9"))&&n.__esModule?n:{default:n},i=r("drQrh");t.IconListPropType=a.default.oneOf(i.iconsList)},dFXTd:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IMAGE_SCHEMA_TYPE=t.default=void 0;var n,a=m(r("dQbLZ")),i=m(r("djo6Y")),o=m(r("diCc5")),s=m(r("dV7oC")),l=m(r("dFYw3")),u=m(r("dmRg0")),c=r("dcDcd"),d=m(c),f=m(r("dYO3V")),h=m(r("dmwIZ")),p=(r("dW/MQ"),r("dBNTa"),r("dMqZe")),v=r("d5jSH"),g=m(r("daKe1"));function m(e){return e&&e.__esModule?e:{default:e}}var y=(0,p.safeRender)({componentName:"ImageSDL"})(n=function(e){function t(){return(0,o.default)(this,t),(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,u.default)(t,e),(0,s.default)(t,[{key:"getMobileImageUrl",value:function(e){var t=(0,h.default)(e,"metadata.alternativeImage[0].multimedia.url"),r=(0,h.default)(e,"metadata.alternativeImage[0].multimedia.contentHash");return(0,v.resolveMediaUrl)(t,r)}},{key:"getDesktopImageUrl",value:function(e){var t=(0,h.default)(e,"url",(0,h.default)(e,"multimedia.url")),r=(0,h.default)(e,"contentHash",(0,h.default)(e,"multimedia.contentHash"));return(0,v.resolveMediaUrl)(t,r)}},{key:"render",value:function(){if(!(0,f.default)(this.props.content)&&!(0,f.default)(this.props.defaultContent))return null;var e=this.props,t=e.content,r=e.defaultContent,n=(0,i.default)(e,["content","defaultContent"]),o=(0,h.default)(t,"altText",(0,h.default)(t,"metadata.altText"));return d.default.createElement(g.default,(0,a.default)({},n,{altText:o,mobileImageUrl:this.getMobileImageUrl(t),mobileDefaultImageUrl:this.getMobileImageUrl(r),desktopImageUrl:this.getDesktopImageUrl(t),desktopDefaultImageUrl:this.getDesktopImageUrl(r)}))}}]),t}(c.PureComponent))||n;t.default=y,t.IMAGE_SCHEMA_TYPE="Image"},dFcgA:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dQILm")),o=a(r("dlwsE")),s=a(r("dW8MJ")),l=a(r("da1gu")),u=a(r("dNsbk")),c=a(r("dPJYZ")),d=a(r("d7W2i")),f=a(r("d9B4+")),h=n(r("dcDcd")),p=a(r("dTSYQ")),v=a(r("dzHIc")),g=a(r("d0yDM")),m=a(r("d4b3c")),y=a(r("dUXv2")),b=a(r("d54lq")),T=a(r("dNa29")),E=a(r("dHI9P")),k=a(r("dGdU9")),S=a(r("druMa")),_=a(r("dAZ0a")),C=a(r("dDGqw")),P=r("dtJTW"),w={children:f.default.any,autoHide:f.default.bool,autoHideTime:f.default.number,disableDefaultControls:f.default.bool,disableCompletely:f.default.bool,className:f.default.string},A=function(e){function t(e){var r;return(0,o.default)(this,t),(r=(0,l.default)(this,(0,u.default)(t).call(this,e))).getDefaultChildren=r.getDefaultChildren.bind((0,c.default)(r)),r.getFullChildren=r.getFullChildren.bind((0,c.default)(r)),r}return(0,d.default)(t,e),(0,s.default)(t,[{key:"getDefaultChildren",value:function(){return[h.default.createElement(g.default,{key:"play-toggle",order:1}),h.default.createElement(_.default,{key:"volume-menu-button",order:4}),h.default.createElement(E.default,{key:"current-time-display",order:5.1}),h.default.createElement(S.default,{key:"time-divider",order:5.2}),h.default.createElement(k.default,{key:"duration-display",order:5.3}),h.default.createElement(v.default,{key:"progress-control",order:6}),h.default.createElement(b.default,{key:"fullscreen-toggle",order:8})]}},{key:"getFullChildren",value:function(){return[h.default.createElement(g.default,{key:"play-toggle",order:1}),h.default.createElement(y.default,{key:"replay-control",order:2}),h.default.createElement(m.default,{key:"forward-control",order:3}),h.default.createElement(_.default,{key:"volume-menu-button",order:4}),h.default.createElement(E.default,{key:"current-time-display",order:5}),h.default.createElement(S.default,{key:"time-divider",order:6}),h.default.createElement(k.default,{key:"duration-display",order:7}),h.default.createElement(v.default,{key:"progress-control",order:8}),h.default.createElement(T.default,{key:"remaining-time-display",order:9}),h.default.createElement(C.default,{rates:[1,1.25,1.5,2],key:"playback-rate",order:10}),h.default.createElement(b.default,{key:"fullscreen-toggle",order:11})]}},{key:"getChildren",value:function(){var e=h.default.Children.toArray(this.props.children),t=this.props.disableDefaultControls?[]:this.getDefaultChildren(),r=this.props,n=(r.className,(0,i.default)(r,["className"]));return(0,P.mergeAndSortChildren)(t,e,n)}},{key:"render",value:function(){var e=this.props,t=e.autoHide,r=e.className,n=e.disableCompletely,a=this.getChildren();return n?null:h.default.createElement("div",{className:(0,p.default)("video-react-control-bar",{"video-react-control-bar-auto-hide":t},r)},a)}}]),t}(h.Component);t.default=A,A.propTypes=w,A.defaultProps={autoHide:!0,disableCompletely:!1},A.displayName="ControlBar"},dGdU9:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s=r("dtJTW"),l={player:a.default.object,className:a.default.string};function u(e){var t=e.player.duration,r=e.className,n=(0,s.formatTime)(t);return i.default.createElement("div",{className:(0,o.default)(r,"video-react-duration video-react-time-control video-react-control")},i.default.createElement("div",{className:"video-react-duration-display","aria-live":"off"},i.default.createElement("span",{className:"video-react-control-text"},"Duration Time "),n))}u.propTypes=l,u.displayName="DurationDisplay";var c=u;t.default=c},dGtzc:function(e,t){var r=1e3,n=6e4,a=36e5,i=24*a;function o(e,t,r){if(!(e<t))return e<1.5*t?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}e.exports=function(e,t){t=t||{};var s,l=typeof e;if("string"===l&&e.length>0)return function(e){if(!((e=String(e)).length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var o=parseFloat(t[1]);switch((t[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*o;case"days":case"day":case"d":return o*i;case"hours":case"hour":case"hrs":case"hr":case"h":return o*a;case"minutes":case"minute":case"mins":case"min":case"m":return o*n;case"seconds":case"second":case"secs":case"sec":case"s":return o*r;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return o;default:return}}}}(e);if("number"===l&&!1===isNaN(e))return t.long?o(s=e,i,"day")||o(s,a,"hour")||o(s,n,"minute")||o(s,r,"second")||s+" ms":function(e){return e>=i?Math.round(e/i)+"d":e>=a?Math.round(e/a)+"h":e>=n?Math.round(e/n)+"m":e>=r?Math.round(e/r)+"s":e+"ms"}(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))}},dGuGs:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s=r("dtJTW");function l(e){var t=e.duration,r=e.mouseTime,n=e.className,a=e.text;if(!r.time)return null;var l=a||(0,s.formatTime)(r.time,t);return i.default.createElement("div",{className:(0,o.default)("video-react-mouse-display",n),style:{left:"".concat(r.position,"px")},"data-current-time":l})}l.propTypes={duration:a.default.number,mouseTime:a.default.object,className:a.default.string},l.displayName="MouseTimeDisplay";var u=l;t.default=u},dH38v:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.children,r=e.isNonBreaking,i=e.appendSpace,o=r?"":" ";return a.default.createElement(n.Fragment,null,i?null:o,t,i?o:null)};var n=r("dcDcd"),a=i(n);function i(e){return e&&e.__esModule?e:{default:e}}i(r("d17x9"))},dH9CM:function(e,t,r){(window.__NEXT_P=window.__NEXT_P||[]).push(["/login-header",function(){return r("dychU")}])},dHI9P:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s=r("dtJTW"),l={player:a.default.object,className:a.default.string};function u(e){var t=e.player,r=t.currentTime,n=t.duration,a=e.className,l=(0,s.formatTime)(r,n);return i.default.createElement("div",{className:(0,o.default)("video-react-current-time video-react-time-control video-react-control",a)},i.default.createElement("div",{className:"video-react-current-time-display","aria-live":"off"},i.default.createElement("span",{className:"video-react-control-text"},"Current Time "),l))}u.propTypes=l,u.displayName="CurrentTimeDisplay";var c=u;t.default=c},dINgg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.handleLoadStart=function(e){return{type:n,videoProps:e}},t.handleCanPlay=function(e){return{type:a,videoProps:e}},t.handleWaiting=function(e){return{type:i,videoProps:e}},t.handleCanPlayThrough=function(e){return{type:o,videoProps:e}},t.handlePlaying=function(e){return{type:s,videoProps:e}},t.handlePlay=function(e){return{type:l,videoProps:e}},t.handlePause=function(e){return{type:u,videoProps:e}},t.handleEnd=function(e){return{type:c,videoProps:e}},t.handleSeeking=function(e){return{type:d,videoProps:e}},t.handleSeeked=function(e){return{type:f,videoProps:e}},t.handleDurationChange=function(e){return{type:v,videoProps:e}},t.handleTimeUpdate=function(e){return{type:g,videoProps:e}},t.handleVolumeChange=function(e){return{type:m,videoProps:e}},t.handleProgressChange=function(e){return{type:y,videoProps:e}},t.handleRateChange=function(e){return{type:b,videoProps:e}},t.handleSuspend=function(e){return{type:T,videoProps:e}},t.handleAbort=function(e){return{type:E,videoProps:e}},t.handleEmptied=function(e){return{type:k,videoProps:e}},t.handleStalled=function(e){return{type:S,videoProps:e}},t.handleLoadedMetaData=function(e){return{type:_,videoProps:e}},t.handleLoadedData=function(e){return{type:C,videoProps:e}},t.handleResize=function(e){return{type:P,videoProps:e}},t.handleError=function(e){return{type:w,videoProps:e}},t.handleSeekingTime=function(e){return{type:h,time:e}},t.handleEndSeeking=function(e){return{type:p,time:e}},t.activateTextTrack=function(e){return{type:A,textTrack:e}},t.ACTIVATE_TEXT_TRACK=t.ERROR=t.RESIZE=t.LOADED_DATA=t.LOADED_META_DATA=t.STALLED=t.EMPTIED=t.ABORT=t.SUSPEND=t.RATE_CHANGE=t.PROGRESS_CHANGE=t.VOLUME_CHANGE=t.TIME_UPDATE=t.DURATION_CHANGE=t.END_SEEKING=t.SEEKING_TIME=t.SEEKED=t.SEEKING=t.END=t.PAUSE=t.PLAY=t.PLAYING=t.CAN_PLAY_THROUGH=t.WAITING=t.CAN_PLAY=t.LOAD_START=void 0;var n="video-react/LOAD_START";t.LOAD_START=n;var a="video-react/CAN_PLAY";t.CAN_PLAY=a;var i="video-react/WAITING";t.WAITING=i;var o="video-react/CAN_PLAY_THROUGH";t.CAN_PLAY_THROUGH=o;var s="video-react/PLAYING";t.PLAYING=s;var l="video-react/PLAY";t.PLAY=l;var u="video-react/PAUSE";t.PAUSE=u;var c="video-react/END";t.END=c;var d="video-react/SEEKING";t.SEEKING=d;var f="video-react/SEEKED";t.SEEKED=f;var h="video-react/SEEKING_TIME";t.SEEKING_TIME=h;var p="video-react/END_SEEKING";t.END_SEEKING=p;var v="video-react/DURATION_CHANGE";t.DURATION_CHANGE=v;var g="video-react/TIME_UPDATE";t.TIME_UPDATE=g;var m="video-react/VOLUME_CHANGE";t.VOLUME_CHANGE=m;var y="video-react/PROGRESS_CHANGE";t.PROGRESS_CHANGE=y;var b="video-react/RATE_CHANGE";t.RATE_CHANGE=b;var T="video-react/SUSPEND";t.SUSPEND=T;var E="video-react/ABORT";t.ABORT=E;var k="video-react/EMPTIED";t.EMPTIED=k;var S="video-react/STALLED";t.STALLED=S;var _="video-react/LOADED_META_DATA";t.LOADED_META_DATA=_;var C="video-react/LOADED_DATA";t.LOADED_DATA=C;var P="video-react/RESIZE";t.RESIZE=P;var w="video-react/ERROR";t.ERROR=w;var A="video-react/ACTIVATE_TEXT_TRACK";t.ACTIVATE_TEXT_TRACK=A},dIXmB:function(e,t,r){},dIjbi:function(e,t,r){var n=r("dWkPL");e.exports=function(e){if(Array.isArray(e))return n(e)},e.exports.default=e.exports,e.exports.__esModule=!0},dLBkc:function(e,t,r){"use strict";r.d(t,"a",function(){return gr});var n=r("drePB"),a=r("d1OyB"),i=r("dvuIU"),o=r("dJi7U"),s=r("dmd7G"),l=r("dfoSv"),u=r("dcDcd"),c=r.n(u),d=r("dTSYQ"),f=r.n(d),h=r("dmwIZ"),p=r.n(h),v=r("dbUlb"),g=(r("d4rEU"),r("dWY05")),m=r("dwx14"),y=r("d/MKj"),b=r("d+nA/"),T=r("dPuqe"),E=r.n(T),k=r("dzZ0H"),S=r.n(k),_=r("dkQFM"),C=r("dTwb8"),P=r("dMqZe"),w=r("djTNn");function A(e){return e===w.n}var O=r("doUZz"),R=r("dvN+2"),I=r.n(R),D=r("dPySL"),L=r.n(D),x=r("dW/MQ"),M=r.n(x),F=r("dG4B6"),N=r("dlSCD"),B=r.n(N),j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=e&&(e.cancelFullScreen||e.exitFullscreen||e.mozCancelFullScreen||e.webkitCancelFullScreen||e.webkitExitFullScreen||e.webkitExitFullscreen||e.msExitFullscreen);t&&t.bind(e)()},U=function(){return document.fullscreenElement||document.mozFullScreenElement||document.webkitFullscreenElement||document.webkitFullScreenElement||document.webkitCurrentFullScreenElement||document.msFullscreenElement},V=[],G="data-manually-focused",H=r("d2rQ3"),K=r("dWiji"),W=r("d17x9"),Y=r.n(W),q=Y.a.oneOfType([Y.a.bool,Y.a.shape({playButton:Y.a.bool,volumeButton:Y.a.bool,fullscreenButton:Y.a.bool,optionsButton:Y.a.bool})]),z={videoId:Y.a.string,autoLoop:Y.a.bool,autoMute:Y.a.bool,autoPlay:Y.a.bool,isHlsLink:Y.a.bool,startPlayFullscreen:Y.a.bool,playInModal:Y.a.bool,posterUrl:Y.a.string,posterAltText:Y.a.string,provider:Y.a.string,closedCaptionsUrl:Y.a.string,transcriptsText:Y.a.string,descriptiveVideoId:Y.a.string,descriptiveClosedCaptionsUrl:Y.a.string},X=Y.a.shape({videoFullscreenText:Y.a.string,videoPauseText:Y.a.string,videoPlayText:Y.a.string,videoPlayInModalText:Y.a.string,videoOptionsText:Y.a.string,autoPlayText:Y.a.string,videoStopFsText:Y.a.string,videoCloseCaptioningText:Y.a.string,videoCaptioningText:Y.a.string,videoAudioDescriptionEnabledText:Y.a.string,videoAudioDescriptionDisabledText:Y.a.string,videoWeDontSupportProvider:Y.a.string}),Q=Y.a.shape({videoPlayCircleIconUrl:Y.a.string,videoPauseCircleIconUrl:Y.a.string,videoCogIconUrl:Y.a.string,videoCogCircleIconUrl:Y.a.string,videoExpandArrowsIconUrl:Y.a.string,videoCompressIconUrl:Y.a.string,videoClosedCaptioningIconUrl:Y.a.string,videoNewspaperIconUrl:Y.a.string,videoAudioDescriptionIconUrl:Y.a.string,videoCircleIconUrl:Y.a.string}),J="YouTube";function Z(e,t,r){return(Z="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,r){var n=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=Object(l.a)(e)););return e}(e,t);if(n){var a=Object.getOwnPropertyDescriptor(n,t);return a.get?a.get.call(r):a.value}})(e,t,r||e)}var $,ee,te,re,ne=r("dvDqi"),ae=r.n(ne),ie=r("dudzn"),oe=r("dGtlg"),se=r("dzFo5"),le=r.n(se),ue=c.a.createElement,ce="video-player-controls__button",de=Object(_.a)({videoFullscreenText:"Common/Video/fullscreen__text",videoPauseText:"Common/Video/pause__text",videoPlayText:"Common/Video/play__text",videoPlayInModalText:"Common/Video/play__in__modal__text"})((te=ee=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).getHiddenText=function(){var t=e.props,r=t.paused,n=t.startPlayFullscreen,a=t.resources,i=a.videoFullscreenText,o=a.videoPauseText,s=a.videoPlayText,l=a.videoPlayInModalText;return t.isOpenModalControls?l:r?n?i:s:o},e}return Object(i.a)(r,[{key:"render",value:function(){var e,t=this.props,r=t.className,a=t.paused,i=t.onPlayClick,o=t.onPauseClick,s=t.isLarge,l=t.iconResources,u=l.videoPlayCircleIconUrl,c=l.videoPauseCircleIconUrl,d=a?u:c,h=t.playInBackground&&{title:this.getHiddenText()};return ue(le.a,Object(m.a)({className:f()(r,ce,s&&"".concat(ce,"--large"),(e={},Object(n.a)(e,"".concat(ce,"--play-circle"),a),Object(n.a)(e,"".concat(ce,"--pause-circle"),!a),e)),onClick:a?i:o,style:{backgroundImage:"url(".concat(d,")")}},h),ue("span",{className:f()("hidden-control")},this.getHiddenText()))}}]),r}(u.Component),ee.defaultProps={paused:!0,onPlayClick:I.a,onPauseClick:I.a},$=te))||$,fe=c.a.createElement,he=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){var e,t=this.props,r=t.isDefaultControlsHidden,a=t.isIframePlayer,i=t.onOptionsClick,o=t.resources.videoOptionsText,s=t.iconResources,l=s.videoCogIconUrl,u=s.videoCogCircleIconUrl,c=t.ariaExpanded,d=a&&!r?l:u,h=t.playInBackground&&{title:o};return fe(le.a,Object(m.a)({className:f()("video-player-controls__button",(e={},Object(n.a)(e,"".concat("video-player-controls__button","--cog"),a&&!r),Object(n.a)(e,"".concat("video-player-controls__button","--cog-circle"),!(a&&!r)),e)),onClick:i,style:{backgroundImage:"url(".concat(d,")")},"aria-expanded":c},h),fe("span",{className:f()("hidden-control")},o))}}]),r}(u.Component),pe=c.a.createElement,ve=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.onAudioDescriptionClick,a=e.active,i=e.resources,o=i.videoAudioDescriptionEnabledText,s=i.videoAudioDescriptionDisabledText,l=e.iconResources.videoAudioDescriptionIconUrl,u=e.playInBackground&&{title:a?s:o};return pe(le.a,Object(m.a)({className:f()("video-player-controls__button",t,"".concat("video-player-controls__button","--audio-description"),Object(n.a)({},"".concat("video-player-controls__button","--active"),a)),onClick:r,style:{backgroundImage:"url(".concat(l,")")}},u),pe("span",{className:f()("hidden-control")},a?s:o))}}]),r}(u.Component),ge=c.a.createElement,me=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.onClosedCaptioningClick,a=e.active,i=e.resources.videoCloseCaptioningText,o=e.iconResources.videoClosedCaptioningIconUrl;return ge(le.a,{className:f()("video-player-controls__button",t,"".concat("video-player-controls__button","--closed-captioning"),Object(n.a)({},"".concat("video-player-controls__button","--active"),a)),onClick:r,style:{backgroundImage:"url(".concat(o,")")}},ge("span",{className:f()("hidden-control")},i))}}]),r}(u.Component),ye=c.a.createElement,be=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.onCaptioningClick,a=e.active,i=e.resources.videoCaptioningText,o=e.iconResources.videoNewspaperIconUrl;return ye(le.a,{className:f()("video-player-controls__button",t,"".concat("video-player-controls__button","--newspaper"),Object(n.a)({},"".concat("video-player-controls__button","--active"),a)),onClick:r,style:{backgroundImage:"url(".concat(o,")")}},ye("span",{className:f()("hidden-control")},i))}}]),r}(u.Component),Te=c.a.createElement,Ee=Object(_.a)({videoFullscreenText:"Common/Video/fullscreen__text",stopFsText:"Common/Video/video__stop-fs"})(re=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).getHiddenText=function(){var t=e.props,r=t.resources,n=r.videoFullscreenText,a=r.videoStopFsText;return t.isFullScreen?a:n},e}return Object(i.a)(r,[{key:"render",value:function(){var e,t=this.props,r=t.onFullscreenToggle,a=t.isFullScreen,i=t.iconResources,o=i.videoCompressIconUrl,s=i.videoExpandArrowsIconUrl,l=a?o:s;return Te(le.a,{className:f()("video-player-controls__button",(e={},Object(n.a)(e,"".concat("video-player-controls__button","--expand-arrows-alt"),!a),Object(n.a)(e,"".concat("video-player-controls__button","--compress"),a),e)),onClick:r,style:{backgroundImage:"url(".concat(l,")")}},Te("span",{className:f()("hidden-control")},this.getHiddenText()))}}]),r}(u.Component))||re,ke=r("dfaye"),Se=(r("dZx8M"),c.a.createElement),_e="video-player-controls",Ce=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={isOpenOptions:!1,focused:!1},e.portal=null,e.onOptionsClick=function(){e.setState({isOpenOptions:!e.state.isOpenOptions})},e.onPlayClick=function(t){e.props.onPlayClick(t),e.setState({focused:!1})},e.onFocus=function(){e.setState({focused:!0})},e.onBlur=function(){e.setState({focused:!1})},e.hasButton=function(t){var r=e.props,n=r.hasStarted,a=r.isDefaultControlsHidden,i=r.isIframePlayer,o=r.buttonOptionsBeforeStartPlay,s=r.buttonOptionsAfterStartPlay,l=r.isVimeoIframe;if(n){if(l)return!1;if(!a&&!i)return!1;if(!0===s)return!0;if(s&&s[t])return!0}else{if(!0===o)return!0;if(o&&o[t])return!0}return!1},e.hasOptions=function(){var t=e.props,r=t.isFullScreen,n=t.isIframePlayer,a=t.hasTranscript,i=t.hasDescriptiveVideo,o=t.hasClosedCaptions,s=t.playInModal,l=t.playInBackground;return a&&(!r||!s)||i||l||o&&!n},e.refVolumeMenuButton=function(e){if(e){var t=e.querySelector(".video-react-slider");t&&t.setAttribute("role","slider")}},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.props.portalContainerIdForControls&&this.checkForPortal()}},{key:"componentDidUpdate",value:function(e){e.portalContainerIdForControls!==this.props.portalContainerIdForControls&&this.checkForPortal()}},{key:"checkForPortal",value:function(){this.portal=document.getElementById(this.props.portalContainerIdForControls),this.forceUpdate()}},{key:"renderControls",value:function(){var e,t,r=this.props,a=r.className,i=r.volume,o=r.muted,s=r.hasStarted,l=r.paused,u=r.isFullScreen,c=r.startPlayFullscreen,d=r.autoHideControls,h=r.isDefaultControlsHidden,p=r.isIframePlayer,v=r.closedCaptioningEnabled,g=r.captioningEnabled,m=r.audioDescriptionEnabled,y=r.onPauseClick,b=r.onVolumeClick,T=r.changeVolume,E=r.onFullscreenToggle,k=r.onClosedCaptioningToggle,S=r.onCaptioningToggle,_=r.onAudioDescriptionToggle,C=r.hasTranscript,P=r.hasDescriptiveVideo,w=r.hasClosedCaptions,A=r.resources,O=r.hasSmallButtons,R=r.isLoading,I=r.isError,D=r.playInModal,L=r.isOpenModalControls,x=r.isLargePlayButton,M=r.iconResources,F=r.playInBackground,N=M.videoCircleIconUrl,B=this.state,j=B.isOpenOptions,U=B.focused;return I?null:R?Se("div",{className:f()("video-react","video-react-waiting","".concat(_e,"__loading-wrapper"))},Se(ie.LoadingSpinner,{player:{error:!1}})):Se("div",{className:f()(_e,a,(e={},Object(n.a)(e,"".concat(_e,"--started-play"),s),Object(n.a)(e,"".concat(_e,"--small-buttons"),O),e)),onFocus:this.onFocus,onBlur:this.onBlur},Se("div",{className:f()("".concat(_e,"__wrapper"),(t={},Object(n.a)(t,"".concat(_e,"__wrapper--large"),!s&&x),Object(n.a)(t,"".concat(_e,"__wrapper--play"),!U&&d&&!l&&!u),t))},!F&&this.hasButton("playButton")?Se(de,{isLarge:!s&&x,paused:l,resources:A,iconResources:M,startPlayFullscreen:c,onPlayClick:this.onPlayClick,onPauseClick:y,isOpenModalControls:L}):null,!F&&this.hasButton("volumeButton")?Se("div",{className:f()("".concat(_e,"__button"),"".concat(_e,"__button--volume"),"video-react"),style:{backgroundImage:"url(".concat(N,")")},ref:this.refVolumeMenuButton},Se(ie.VolumeMenuButton,{player:{muted:o,volume:i},actions:{mute:b,changeVolume:T},label:"Volume",valuenow:"".concat(Math.round(100*i)),valuetext:"".concat(Math.round(100*i),"%"),vertical:!0})):null,this.hasButton("optionsButton")&&this.hasOptions()?Se("div",{className:f()("".concat(_e,"__options"))},Se(he,{resources:A,iconResources:M,isDefaultControlsHidden:h,isIframePlayer:p,onOptionsClick:this.onOptionsClick,ariaExpanded:j,playInBackground:F}),Se("div",{className:f()("".concat(_e,"__options__container"),Object(n.a)({},"".concat(_e,"__options__container--open"),j))},Se("ul",null,F&&this.hasButton("playButton")?Se("li",null,Se(de,{isLarge:!s&&x,paused:l,resources:A,iconResources:M,onPlayClick:this.onPlayClick,onPauseClick:y,isOpenModalControls:L,playInBackground:F})):null,P?Se("li",null,Se(ve,{resources:A,iconResources:M,active:m,onAudioDescriptionClick:_,playInBackground:F})):null,!C||u||D?null:Se("li",null,Se(be,{resources:A,iconResources:M,active:g,onCaptioningClick:S})),w&&!p?Se("li",null,Se(me,{resources:A,iconResources:M,active:v,onClosedCaptioningClick:k})):null))):null,!F&&this.hasButton("fullscreenButton")?Se(Ee,{resources:A,iconResources:M,onFullscreenToggle:E,isFullScreen:u}):null))}},{key:"render",value:function(){var e=this.props.portalContainerIdForControls,t=this.renderControls();return e?this.portal&&Object(ke.createPortal)(t,this.portal):t}}]),r}(u.Component);Ce.defaultProps={buttonOptionsBeforeStartPlay:{playButton:!0},buttonOptionsAfterStartPlay:!0,onPlayClick:I.a,onPauseClick:I.a,onVolumeClick:I.a,changeVolume:I.a,onFullscreenToggle:I.a,onClosedCaptioningToggle:I.a,onCaptioningToggle:I.a,onAudioDescriptionToggle:I.a},r("dT729");var Pe=c.a.createElement,we=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.activeCueText;return Pe("div",{className:f()(t,"video-player-controls__closed-captioning")},Pe("div",{className:f()("".concat("video-player-controls__closed-captioning","__wrapper"))},Pe("p",{className:f()("reset-p")},r)))}}]),r}(u.Component),Ae=r("dVZMR"),Oe=r.n(Ae),Re=(r("dLZSo"),c.a.createElement),Ie="video-player-controls__captioning",De=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.onCaptioningCloseClick,n=e.transcriptsText,a=e.closeTitle;return Re("div",{className:f()(t,Ie)},Re("div",{className:f()("".concat(Ie,"__wrapper"))},Re("button",{type:"button",className:f()("".concat(Ie,"__close-button")),onClick:r},Re(Oe.a,{icon:"icon-delete-light"}),Re("span",{className:f()("hidden-control")},a)),Re("p",{className:f()("".concat(Ie,"__text"),"reset-p")},n)))}}]),r}(u.Component),Le=r("dHZII"),xe=r.n(Le),Me=r("dulZh"),Fe=r.n(Me),Ne=c.a.createElement,Be=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).hls=null,e.onLoadedMetadata=function(){e.props.onReadyHls({})},e}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this,t=this.props,r=t.src,n=t.video,a=t.autoPlay;!Object(H.d)()&&Fe.a.isSupported()?(this.hls=new Fe.a,this.hls.loadSource(r),this.hls.attachMedia(n),this.hls.on(Fe.a.Events.FRAG_PARSED,xe()(function(){e.props.onReadyHls(e.hls),a||e.hls.stopLoad()}))):n.canPlayType("application/vnd.apple.mpegurl")&&(n.src=r,n.addEventListener("loadedmetadata",this.onLoadedMetadata))}},{key:"componentDidUpdate",value:function(e){var t=this,r=this.props,n=r.video,a=r.src;e.src!==a&&(this.props.onReadyHls(null),!Object(H.d)()&&Fe.a.isSupported()?(this.hls.destroy(),this.hls=new Fe.a,this.hls.loadSource(a),this.hls.attachMedia(n),this.hls.on(Fe.a.Events.FRAG_PARSED,xe()(function(){t.props.onReadyHls(t.hls),n.play()}))):n.canPlayType("application/vnd.apple.mpegurl")&&(n.src=a))}},{key:"componentWillUnmount",value:function(){var e=this.props.video;!Object(H.d)()&&Fe.a.isSupported()&&this.hls?this.hls.destroy():e.canPlayType("application/vnd.apple.mpegurl")&&e.removeEventListener("loadedmetadata",this.onLoadedMetadata)}},{key:"render",value:function(){var e=this.props,t=e.src,r=e.type;return Ne("source",{src:t,type:r})}}]),r}(u.PureComponent);Be.defaultProps={type:"application/x-mpegURL",onReadyHls:I.a};var je=r("dJX7q"),Ue=r("doSZa"),Ve=r.n(Ue);function Ge(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function He(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ge(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function Ke(e,t){var r=t.reduce(function(e,t){return He(He({},e),{},Object(n.a)({},t,function(e){return function(){throw new TypeError("".concat(e," is an abstract method. Did you forget to implement it?"))}}(t)))},{});return Object.assign(e,r)}var We=c.a.createElement,Ye=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(e){var n;Object(a.a)(this,r),(n=t.call(this,e)).customFullscreenButtonClicked=!1,n.onPlay=function(){n.props.onPlayTrigger(),n.setState({hasStarted:!0,paused:!1})},n.onEnd=function(){n.props.onEnd(),n.setState({paused:!0})},n.onError=function(){n.setState({isError:!0,isLoading:!1})},n.onCaptioningCloseClick=function(){n.setState({captioningEnabled:!1})},n.onCaptioningToggle=function(){n.setState({captioningEnabled:!n.state.captioningEnabled})},n.onPlayClick=function(){var e=n.props,t=e.startPlayFullscreen,r=e.onPlayStart,a=e.isFullScreen,i=e.playInBackground;n.state.isError||(n.doOnPlay&&n.doOnPlay(),!t||a||i?n.playVideo():n.onFullscreenToggle(),n.setState({hasStarted:!0,paused:!1}),r())},n.onStopVideo=function(){n.stopVideo(),n.setState({hasStarted:!1,paused:!0})},n.onPauseClick=function(){n.pauseVideo(),n.setState({paused:!0})},n.onChangeVolume=function(e){var t=e;t>1&&(t=1),t<0&&(t=0),n.setVolume(Math.round(100*t)),n.setState({volume:t})},n.onAudioDescriptionToggle=function(){var e=n.props,t=e.videoId,r=e.descriptiveVideoId,a=!n.state.audioDescriptionEnabled,i=a?r:t;n.setState({audioDescriptionEnabled:a,videoId:i})};var i=e.videoId;return n.state={videoId:i,hasStarted:!1,paused:!0,muted:!1,volume:0,captioningEnabled:!1,audioDescriptionEnabled:!1,isLoading:!0,isError:!1},n.onFullscreenToggle=n.onFullscreenToggle.bind(Object(je.a)(n)),n}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this.props,t=e.getPlayClickHandler,r=e.getStopVideoHandler;this.hasPlayRefs&&t&&t(this.onPlayClick),this.hasPlayRefs&&r&&r(this.onStopVideo)}},{key:"componentDidUpdate",value:function(e){this.props.startPlayFullscreen&&e.isFullScreen&&!this.props.isFullScreen&&this.pauseVideo(),this.props.currentPlayingVideo&&this.props.playerId!==this.props.currentPlayingVideo&&this.getPlayer()&&!this.state.paused&&this.pauseVideo()}},{key:"getCustomCaptionsProps",value:function(){return Ve()()}},{key:"getButtonOptionsAfterStartPlay",value:function(){var e=this.props,t=e.defaultControls,r=e.startPlayFullscreen,n=e.buttonOptionsAfterStartPlay;return t&&!r?{optionsButton:!0}:n}},{key:"onFullscreenToggle",value:function(){var e=this.props,t=e.isFullScreen,r=e.onFullscreenToggle,n=e.startPlayFullscreen,a=this.state.paused;n&&(t?(a||(this.customFullscreenButtonClicked=!0),this.pauseVideo()):(a&&(this.customFullscreenButtonClicked=!0),this.trackClick("FullScreen"),this.playVideo())),r()}},{key:"render",value:function(){var e=this.props,t=e.transcriptsText,r=e.descriptiveVideoId,n=e.classNameImageWrapper,a=e.isFullScreen,i=e.resources,o=e.iconResources,s=e.fluid,l=e.playInModal,c=e.defaultControls,d=e.autoHideControls,f=e.startPlayFullscreen,h=e.buttonOptionsBeforeStartPlay,p=e.hasSmallButtons,v=e.portalContainerIdForControls,g=e.isLargePlayButton,y=e.isMobileDevice,b=e.ImageComponent,T=e.updateImagePropsFunction,E=e.posterAltText,k=e.hasPoster,S=e.isVimeoIframe,_=e.playInBackground,C=this.state,P=C.hasStarted,w=C.paused,A=C.muted,O=C.volume,R=C.captioningEnabled,I=C.audioDescriptionEnabled,D=C.closedCaptioningEnabled,L=C.isLoading,x=C.isError;return We(u.Fragment,null,We(Ce,Object(m.a)({},this.getCustomCaptionsProps(),{isLargePlayButton:g,onPlayClick:this.onPlayClick,onFullscreenToggle:this.onFullscreenToggle,hasStarted:!y&&P&&!L,paused:w,muted:A,volume:A?0:O,isFullScreen:a,isDefaultControlsHidden:!l&&(!c||f),autoHideControls:d,startPlayFullscreen:f,captioningEnabled:R,audioDescriptionEnabled:I,hasTranscript:Boolean(t),hasDescriptiveVideo:Boolean(r),closedCaptioningEnabled:D,buttonOptionsBeforeStartPlay:h,buttonOptionsAfterStartPlay:this.getButtonOptionsAfterStartPlay(),onPauseClick:this.onPauseClick,onVolumeClick:this.onVolumeClick,changeVolume:this.onChangeVolume,onCaptioningToggle:this.onCaptioningToggle,onClosedCaptioningToggle:this.onClosedCaptioningToggle,onAudioDescriptionToggle:this.onAudioDescriptionToggle,resources:i,iconResources:o,hasSmallButtons:!y&&p,isLoading:y&&!w||L,isError:x,playInModal:l,portalContainerIdForControls:v,isVimeoIframe:S,playInBackground:_})),this.renderPlayer(),!l&&(!P||y&&w&&!a)&&(this.getImageUrl()||k)&&We("div",{className:n},We(b,T({onClick:this.onPlayClick,className:this.getImageClassName(),altText:E,imageUrl:this.getImageUrl(),isBackgroundImage:!s}))),R&&!a&&Boolean(t)&&We(De,{onCaptioningCloseClick:this.onCaptioningCloseClick,transcriptsText:t,closeTitle:i.videoCloseCaptioningText}))}}]),r}(u.PureComponent);Ye.defaultProps={onPlayStart:I.a,onEnd:I.a},Ke(Ye.prototype,["getPlayer","pauseVideo","playVideo","stopVideo","trackClick","onPauseClick","onVolumeClick","changeVolume","renderPlayer","getImageUrl","setVolume","_goToBeginning"]),r("d9fXb");var qe,ze,Xe,Qe=c.a.createElement;function Je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Ze(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Je(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Je(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var $e="video-player",et=Object(P.safeRender)({componentName:"VideoPlayer"})((Xe=ze=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).customMuteButtonClicked=!1,n.customFullscreenButtonClicked=!1,n.videoStart=!0,n.getCustomCaptionsProps=function(){return{hasClosedCaptions:Boolean(n.props.closedCaptionsUrl)}},n.getImageUrl=function(){return n.props.posterUrl},n.getImageClassName=function(){return f()("".concat($e,"__image"))},n.getPlayer=function(){return n.player},n.onError=function(){n.setState({isError:!0,isLoading:!1})},n.onReadyHls=function(e){n.hls=e,n.setState({isLoading:!e||!n.player})},n.onCueChange=function(e){var t=e.target.track.activeCues,r=t.length?t[0].text:"";n.setState({activeCueText:r})},n.onLoadTrack=function(){n.trackElement&&n.trackElement.track&&(n.trackElement.track.mode="hidden",n.setState({hasTrackElement:!0}))},n.createTrackElement=function(){var e=n.props,t=e.closedCaptionsUrl,r=e.descriptiveClosedCaptionsUrl,a=n.state.audioDescriptionEnabled;n.setState({hasTrackElement:!1,activeCueText:""});var i=a?r:t,o=p()(n.player,"video.video");if(i&&o){o.setAttribute("crossorigin","anonymous");var s=document.createElement("track");s.setAttribute("default",""),s.setAttribute("kind","captions"),s.addEventListener("load",n.onLoadTrack),s.addEventListener("cuechange",n.onCueChange),ae.a.get(i,{responseType:"blob"}).then(function(e){var t=e.data,r=window.URL.createObjectURL(t);s.src=r,o.appendChild(s)}).catch(function(){s.src=i,o.appendChild(s)}),n.trackElement=s}},n.removeTrackListeners=function(){n.trackElement&&(n.trackElement.removeEventListener("cuechange",n.onCueChange),n.trackElement.removeEventListener("load",n.onLoadTrack))},n.onPauseClick=function(){n.player.pause()},n.onVolumeClick=function(){n.trackClick(n.state.muted?"Unmute":"Mute"),n.customMuteButtonClicked=!0,n.player.muted=!n.state.muted},n.onChangeVolume=function(e){n.player.actions.changeVolume(e)},n.onClosedCaptioningToggle=function(){n.setState({closedCaptioningEnabled:!n.state.closedCaptioningEnabled})},n.handleStateChange=function(e){var t=e.hasStarted,r=e.paused,a=e.muted,i=e.isFullscreen,o=e.ended,s=e.volume,l="";!r&&n.state.paused?n.props.autoPlay&&n.videoStart||n.customFullscreenButtonClicked?(n.customFullscreenButtonClicked=!1,n.videoStart=!1):l="Play":r&&!n.state.paused&&(o||n.customFullscreenButtonClicked?n.customFullscreenButtonClicked=!1:l="Pause"),n.customMuteButtonClicked?n.customMuteButtonClicked=!1:!0===a&&!1===n.state.muted?l="Mute":!1===a&&!0===n.state.muted&&(l="Unmute"),!0===i&&!1===n.state.isFullscreen&&(n.customFullscreenButtonClicked?n.customFullscreenButtonClicked=!1:l="Fullscreen"),""!==l&&n.trackClick(l),!r&&n.state.paused&&n.props.onPlayTrigger(),r&&!n.state.paused&&n.props.onPauseTrigger(),n.setState({hasStarted:t,paused:r,muted:a,volume:s,ended:o,isFullscreen:i})},n.trackClick=Object(oe.j)(function(){return n.state.videoId}),n.pauseVideo=function(){n.player.pause()},n.playVideo=function(){n.player.play()},n.doOnPlay=function(){!n.state.hasStarted&&n.hls&&n.hls.startLoad&&n.hls.startLoad()},n.playerRef=function(e){if(e){var t=n.props,r=t.isHlsLink,a=t.getVideoTag;n.player=e;var i=p()(n.player,"video.video");n.createTrackElement(),a(i),n.setState({isLoading:r&&!n.hls})}},n.refPlayToggle=function(e){e&&(n.playButton=e.button,n.props.refStartFocusLocker(n.playButton))},n.refFullscreenToggle=function(e){e&&(n.fullscreenButton=e.button)},n.player=null,n.trackElement=null,n.hls=null,n.playButton=null,n.fullscreenButton=null,n.isPlayerJustOpened=!0,n.state=Ze(Ze({},n.state),{},{activeCueText:"",hasTrackElement:!1}),n}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.player&&this.player.subscribeToStateChange(this.handleStateChange)}},{key:"componentDidUpdate",value:function(e,t){var n=this.state,a=n.isFullscreen,i=n.hasStarted,o=this.props,s=o.resources,u=s.videoStopFsText,c=s.videoFullscreenText,d=o.defaultControls,f=o.playInModal;if(this.fullscreenButton&&t.isFullscreen!==a){var h=a?u:c;this.fullscreenButton.setAttribute("aria-label",h)}this.isPlayerJustOpened&&i&&d&&f&&this.playButton&&(this.playButton.focus(),this.isPlayerJustOpened=!1),!1===t.ended&&!0===this.state.ended&&this.onEnd(),t.videoId!==this.state.videoId&&(this.removeTrackListeners(),this.trackElement=null,this.createTrackElement()),Z(Object(l.a)(r.prototype),"componentDidUpdate",this).call(this,e,t)}},{key:"componentWillUnmount",value:function(){this.removeTrackListeners();var e=p()(this.player,"video.video");e&&(e.pause(),e.removeAttribute("src")),this.props.onPauseTrigger()}},{key:"getButtonOptionsAfterStartPlay",value:function(){return this.props.buttonOptionsAfterStartPlay}},{key:"_goToBeginning",value:function(){this.player.video.video.currentTime=0}},{key:"renderPlayer",value:function(){var e=this.props,t=e.autoPlay,r=e.autoLoop,n=e.autoMute,a=e.transcriptsText,i=e.descriptiveVideoId,o=e.isHlsLink,s=e.startPlayFullscreen,l=e.defaultControls,u=e.autoHideControls,c=e.fluid,d=e.resources,h=e.iconResources,p=e.isFullScreen,v=e.playInModal,g=e.hasFSModeSupport,m=e.playInBackground,y=this.state,b=y.videoId,T=y.closedCaptioningEnabled,E=y.captioningEnabled,k=y.activeCueText,S=y.audioDescriptionEnabled,_=y.hasTrackElement,C=t||v;return Qe(ie.Player,{ref:this.playerRef,autoPlay:C,loop:r,muted:n,playsInline:g||!s||v,src:b,fluid:c,onError:this.onError,crossOrigin:"anonymous"},o?Qe(Be,{isVideoChild:!0,src:b,onReadyHls:this.onReadyHls,autoPlay:C}):null,Qe(ie.BigPlayButton,{disabled:!0}),Qe(ie.ControlBar,{autoHide:u,disabled:!l||s,disableCompletely:!g||m},Qe(ie.PlayToggle,{order:1,ref:this.refPlayToggle}),Qe(ve,{resources:d,iconResources:h,className:f()("".concat($e,"__control-bar__button"),"video-react-control","video-react-button"),order:7.1,onAudioDescriptionClick:this.onAudioDescriptionToggle,active:S,disabled:!i}),Qe(me,{className:f()("".concat($e,"__control-bar__button"),"video-react-control","video-react-button"),order:7.2,onClosedCaptioningClick:this.onClosedCaptioningToggle,active:T,disabled:!_,resources:d,iconResources:h}),Qe(be,{className:f()("".concat($e,"__control-bar__button"),"video-react-control","video-react-button"),order:7.3,onCaptioningClick:this.onCaptioningToggle,active:E,disabled:!a||p||v,resources:d,iconResources:h}),Qe(ie.FullscreenToggle,{order:8,ref:this.refFullscreenToggle})),Qe(we,{activeCueText:k,disabled:!(T&&k),order:100}))}},{key:"render",value:function(){return Z(Object(l.a)(r.prototype),"render",this).call(this)}}]),r}(Ye),ze.propTypes=Ze(Ze({},z),{},{defaultControls:Y.a.bool,onPlayStart:Y.a.func,autoHideControls:Y.a.bool,startPlayFullscreen:Y.a.bool,fluid:Y.a.bool,hasSmallButtons:Y.a.bool,isFullScreen:Y.a.bool,onFullscreenToggle:Y.a.func,buttonOptionsBeforeStartPlay:q,buttonOptionsAfterStartPlay:q,resources:X,iconResources:Q,portalContainerIdForControls:Y.a.string,refStartFocusLocker:Y.a.func,onPlayTrigger:Y.a.func,onPauseTrigger:Y.a.func,currentPlayingVideo:Y.a.string,playerId:Y.a.string}),ze.defaultProps=Ze(Ze({},Ye.defaultProps),{},{refStartFocusLocker:I.a,getVideoTag:I.a,onPauseTrigger:I.a}),qe=Xe))||qe,tt=r("dyaav"),rt=r("dODXe"),nt=r("dsEfC"),at=r.n(nt),it=r("dJ2iB"),ot=r.n(it),st=r("dhMnm"),lt=r("dY+p1"),ut=r.n(lt),ct=c.a.createElement,dt=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).onPlayerReady=function(e){return n.props.onReady(e)},n.onPlayerError=function(e){n.trackError(e),n.props.onError(e)},n.resetPlayer=function(){return n.internalPlayer.destroy().then(n.createPlayer)},n.refContainer=function(e){n.container=e},n.container=null,n.internalPlayer=null,n}return Object(i.a)(r,[{key:"componentDidMount",value:function(){this.createPlayer()}},{key:"componentDidUpdate",value:function(e){this.shouldUpdatePlayer(e,this.props)&&this.updatePlayer(),this.shouldResetPlayer(e,this.props)?this.resetPlayer():this.shouldUpdateVideo(e,this.props)&&this.updateVideo()}},{key:"componentWillUnmount",value:function(){this.internalPlayer.destroy()}},{key:"shouldUpdatePlayer",value:function(e,t){return function(e,t){return e.id===t.id||e.className===t.className}(e,t)}},{key:"shouldResetPlayer",value:function(e,t){return function(e,t){return!ut()(e.opts,t.opts)}(e,t)}},{key:"shouldUpdateVideo",value:function(e,t){return function(e,t){return e.videoId!==t.videoId}(e,t)}},{key:"render",value:function(){var e=this.props,t=e.id,r=e.className;return ct("div",{id:t,className:r,ref:this.refContainer})}}]),r}(u.PureComponent);dt.defaultProps={onReady:I.a,onError:I.a},Ke(dt.prototype,["createPlayer","updatePlayer","resetPlayer","updateVideo","trackError"]);var ft=c.a.createElement;function ht(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function pt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ht(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ht(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var vt=Object(oe.i)("Vimeo video player"),gt=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).videoStart=!0,n.iFrameReady=!1,n.volume=n.props.opts.muted?0:1,n.onPlayerEnd=function(e){n.props.onEnd(e),n.videoStart=!0},n.onPlayerPlay=function(e){n.props.onPlay(e),n.props.opts.autoplay&&n.videoStart||n.props.customFullscreenButtonClicked?(n.props.defaultFullscreenButton(),n.videoStart=!1):(n.props.trackClick("Play"),n.videoStart=!1)},n.onPlayerPause=function(e){n.props.onPause(e),n.props.customFullscreenButtonClicked?n.props.defaultFullscreenButton():n.handlePauseButtonDebounce()},n.onVolumeChange=function(e){var t=e.volume;n.props.customMuteButtonClicked||(0===n.volume&&t>0?n.props.trackClick("Unmute"):0!==n.volume&&0===t&&n.props.trackClick("Mute")),n.volume=t},n.handlePauseButtonDebounce=at()(function(){n.videoStart||n.props.trackClick("Pause")},100),n.createPlayer=function(){if("undefined"!=typeof document){var e=pt(pt({},n.props.opts),{},{id:n.props.videoId});n.internalPlayer=new st.a(n.container,e),n.internalPlayer.ready().then(function(){n.iFrameReady=!0,n.onPlayerReady(n.internalPlayer),n.updateAspectRatio()}).catch(n.onPlayerError),n.internalPlayer.on("play",n.onPlayerPlay),n.internalPlayer.on("pause",n.onPlayerPause),n.internalPlayer.on("ended",n.onPlayerEnd),n.internalPlayer.on("volumechange",n.onVolumeChange),n.internalPlayer.on("error",n.onPlayerError)}},n.updatePlayer=function(){var e=n.internalPlayer.element,t=n.props,r=t.className,a=t.id;e&&B()(e.setAttribute)&&B()(e.removeAttribute)&&(a?e.setAttribute("id",a):e.removeAttribute("id"),r?e.setAttribute("class",r):e.removeAttribute("class"))},n.updateAspectRatio=function(){Promise.all([n.internalPlayer.getVideoWidth(),n.internalPlayer.getVideoHeight()]).then(function(e){var t=Object(rt.a)(e,2),r=t[0],a=t[1];n.setState({aspectRatio:a/(r||1)})}).catch(n.onPlayerError)},n.updateVideo=function(){ot()(n.props.videoId)?n.internalPlayer.unload().catch(n.onPlayerError):n.resetPlayer()},n.state={aspectRatio:0},n}return Object(i.a)(r,[{key:"trackError",value:function(e){vt(e.message)}},{key:"render",value:function(){var e=this.state.aspectRatio;return ft("span",{className:this.iFrameReady?"".concat(this.props.containerClassName," iframe-ready"):this.props.containerClassName,style:pt({},e?{paddingTop:"".concat(100*e,"%")}:{})},Z(Object(l.a)(r.prototype),"render",this).call(this))}}]),r}(dt);gt.propTypes={videoId:Y.a.string,id:Y.a.string,className:Y.a.string,containerClassName:Y.a.string,opts:Y.a.shape({id:Y.a.string,autopause:Y.a.bool,autoplay:Y.a.bool,background:Y.a.bool,byline:Y.a.bool,color:Y.a.string,loop:Y.a.bool,muted:Y.a.bool,playsinline:Y.a.bool,portrait:Y.a.bool,speed:Y.a.bool,title:Y.a.bool,transparent:Y.a.bool,height:Y.a.number,width:Y.a.number,maxheight:Y.a.number,maxwidth:Y.a.number}),onReady:Y.a.func,onError:Y.a.func,onPlay:Y.a.func,onPause:Y.a.func,onEnd:Y.a.func,customMuteButtonClicked:Y.a.bool,customFullscreenButtonClicked:Y.a.bool,defaultFullscreenButton:Y.a.func,trackClick:Y.a.func},gt.defaultProps=pt(pt({},dt.defaultProps),{},{id:null,opts:{},containerClassName:"",onPlay:I.a,onPause:I.a,onEnd:I.a});var mt,yt,bt,Tt=gt,Et=(r("dIXmB"),c.a.createElement);function kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function St(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?kt(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):kt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var _t="vimeo-player",Ct=/^(https?:)?\/\/((player|www).)?vimeo.com(?=$|\/)/,Pt=Object(P.safeRender)({componentName:"VimeoPlayer"})((bt=yt=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(e){var n,i;return Object(a.a)(this,r),(i=t.call(this,e)).customMuteButtonClicked=!1,i.customFullscreenButtonClicked=!1,i.getImageClassName=function(){return f()("".concat(_t,"__image"))},i.getImageUrl=function(){var e=i.props.posterUrl,t=i.state.vimeoPosterUrl;return e||t},i.getCustomCaptionsProps=function(){var e=i.props,t=e.defaultControls,r=e.startPlayFullscreen,n=i.state.hasStarted;return{hasClosedCaptions:!1,isIframePlayer:!0,className:f()(t&&!r&&n&&["".concat(_t,"__controls")])}},i.getPlayer=function(){return i.player},i.onReady=function(e){i.player=e,i.iframe=i.player.element;var t=i.state,r=t.vimeoPosterUrl,n=t.posterUrlError;i.player.getVolume().then(function(e){i.setState({muted:0===e,volume:e,isLoading:i.isNecessaryVimeoPoster()&&!(r||n)})})},i.onPause=function(){i.props.onPauseTrigger(),i.setState({paused:!0})},i.onVolumeClick=function(){var e=i.state,t=e.muted,r=e.volume;i.trackClick(t?"Unmute":"Mute"),i.customMuteButtonClicked=!0,i.player.setVolume(t?r:0),i.setState({muted:!t})},i.onFullscreenToggle=function(){i.props.hasFSModeSupport?(Z((n=Object(je.a)(i),Object(l.a)(r.prototype)),"onFullscreenToggle",n).call(n),i.setState({background:!0})):i.state.paused?i.playVideo():i.pauseVideo()},i.trackClick=Object(oe.j)(function(){return i.state.videoId}),i.isVimeoUrl=function(e){return Ct.test(e)},i.isNecessaryVimeoPoster=function(){var e=i.state.videoId;return!i.hasImage()&&!i.isVimeoUrl(e)},i.hasImage=function(){var e=i.props,t=e.posterUrl,r=e.hasPoster;return Boolean(t)||r},i.defaultFullscreenButton=function(){i.customFullscreenButtonClicked=!1},i.pauseVideo=function(){i.player.pause()},i.playVideo=function(){i.props.hasFSModeSupport||i.state.hasStarted?i.player.play():i.readyTimer=setTimeout(function(){i.player.play()},1e3)},i.stopVideo=function(){i.player.unload()},i.player=null,i.hasPlayRefs=!0,i.state=St(St({},i.state),{},{background:!1,vimeoPosterUrl:null,posterUrlError:!1}),i}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e=this;if(this.isNecessaryVimeoPoster()){var t=this.state.videoId;Object(tt.b)(t).then(function(t){e.setState({vimeoPosterUrl:t,isLoading:!e.player})}).catch(function(){e.setState({posterUrlError:!0,isLoading:!e.player})})}Z(Object(l.a)(r.prototype),"componentDidMount",this).call(this)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.readyTimer)}},{key:"setVolume",value:function(e){this.player.setVolume(e)}},{key:"_goToBeginning",value:function(){this.player.setCurrentTime(0)}},{key:"renderPlayer",value:function(){var e,t=this.props,r=t.autoLoop,a=t.autoPlay,i=t.autoMute,o=t.startPlayFullscreen,s=t.defaultControls,l=t.fluid,u=t.isFullScreen,c=t.playInModal,d=this.state,h=d.videoId,p={autoplay:!c&&a,loop:r,muted:i,background:d.background||!s&&a,playsinline:o,title:!1,byline:!1,portrait:!1,color:"d72027"};return Et(Tt,{videoId:h,trackClick:this.trackClick,opts:p,className:f()("".concat(_t,"__player"),Object(n.a)({},"".concat(_t,"__player--fluid"),l)),containerClassName:f()("".concat(_t,"__container"),(e={},Object(n.a)(e,"".concat(_t,"__container--fluid"),l),Object(n.a)(e,"".concat(_t,"__container--full-screen"),u),e)),onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,customMuteButtonClicked:this.customMuteButtonClicked,customFullscreenButtonClicked:this.customFullscreenButtonClicked,defaultFullscreenButton:this.defaultFullscreenButton,onError:this.onError,fluid:l,onEnd:this.onEnd})}},{key:"render",value:function(){return Z(Object(l.a)(r.prototype),"render",this).call(this)}}]),r}(Ye),yt.propTypes=St(St({},z),{},{defaultControls:Y.a.bool,autoHideControls:Y.a.bool,fluid:Y.a.bool,hasSmallButtons:Y.a.bool,isFullScreen:Y.a.bool,onFullscreenToggle:Y.a.func,onPlayStart:Y.a.func,buttonOptionsBeforeStartPlay:q,buttonOptionsAfterStartPlay:q,resources:v.a,iconResources:Q,playInModal:Y.a.bool,hasFSModeSupport:Y.a.bool,startPlayFullscreen:Y.a.bool,portalContainerIdForControls:Y.a.string,onPlayTrigger:Y.a.func,onPauseTrigger:Y.a.func,currentPlayingVideo:Y.a.string,playerId:Y.a.string,hasPoster:Y.a.bool,isVimeoIframe:Y.a.bool}),yt.defaultProps=St({},Ye.defaultProps),mt=bt))||mt,wt=r("dD+Oc"),At=r.n(wt),Ot=c.a.createElement;function Rt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function It(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Rt(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Rt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Dt=Object(oe.i)("Youtube video player");function Lt(e){return It(It({},e),{},{playerVars:It(It({},e.playerVars),{},{autoplay:0,start:0,end:0})})}var xt=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).videoStart=!0,e.onPlayerStateChange=function(t){switch(e.props.onStateChange(t),t.data){case r.PlayerState.ENDED:e.props.opts.playerVars.loop&&(e.videoStart=!0),e.props.onEnd(t);break;case r.PlayerState.PLAYING:if(e.props.onPlay(t),e.props.opts.playerVars.autoplay){if(e.videoStart||e.props.customFullscreenButtonClicked){e.props.defaultFullscreenButton(),e.videoStart=!1;break}e.playerState!==r.PlayerState.BUFFERING&&e.props.trackClick("Play")}else{if(e.videoStart){e.props.trackClick("Play"),e.videoStart=!1;break}e.playerState!==r.PlayerState.BUFFERING&&e.props.trackClick("Play")}break;case r.PlayerState.PAUSED:e.props.onPause(t),e.playerState===r.PlayerState.BUFFERING||e.props.customFullscreenButtonClicked?e.props.defaultFullscreenButton():e.handlePauseButtonDebounce()}e.playerState=t.data},e.onPlayerPlaybackRateChange=function(t){return e.props.onPlaybackRateChange(t)},e.onPlayerPlaybackQualityChange=function(t){return e.props.onPlaybackQualityChange(t)},e.handlePauseButtonDebounce=at()(function(){e.playerState!==r.PlayerState.PLAYING&&e.playerState!==r.PlayerState.BUFFERING&&e.props.trackClick("Pause")},150),e.createPlayer=function(){if("undefined"!=typeof document){var t=It({},e.props.opts);e.internalPlayer=At()(e.container,t),e.internalPlayer.on("ready",e.onPlayerReady),e.internalPlayer.on("error",e.onPlayerError),e.internalPlayer.on("stateChange",e.onPlayerStateChange),e.internalPlayer.on("playbackRateChange",e.onPlayerPlaybackRateChange),e.internalPlayer.on("playbackQualityChange",e.onPlayerPlaybackQualityChange);var r=1===e.props.opts.playerVars.autoplay,n=1===e.props.opts.playerVars.loop;r?n?(e.internalPlayer.loadPlaylist(e.props.videoId),e.internalPlayer.setLoop(n)):e.internalPlayer.loadVideoById({videoId:e.props.videoId}):n?(e.internalPlayer.cuePlaylist(e.props.videoId),e.internalPlayer.setLoop(n)):e.internalPlayer.cueVideoById({videoId:e.props.videoId})}},e.updatePlayer=function(){e.internalPlayer.getIframe().then(function(t){e.props.id?t.setAttribute("id",e.props.id):t.removeAttribute("id"),e.props.className?t.setAttribute("class",e.props.className):t.removeAttribute("class")})},e.updateVideo=function(){if(ot()(e.props.videoId))e.internalPlayer.stopVideo();else{var t={videoId:e.props.videoId};"playerVars"in e.props.opts&&("start"in e.props.opts.playerVars&&(t.startSeconds=e.props.opts.playerVars.start),"end"in e.props.opts.playerVars&&(t.endSeconds=e.props.opts.playerVars.end)),e.internalPlayer.loadVideoById(t)}},e}return Object(i.a)(r,[{key:"shouldResetPlayer",value:function(e,t){return Z(Object(l.a)(r.prototype),"shouldResetPlayer",this).call(this,Lt(e),Lt(t))}},{key:"shouldUpdateVideo",value:function(e,t){if(Z(Object(l.a)(r.prototype),"shouldUpdateVideo",this).call(this,e,t))return!0;var n=e.opts.playerVars||{},a=t.opts.playerVars||{};return n.start!==a.start||n.end!==a.end}},{key:"trackError",value:function(e){Dt(e.data)}},{key:"render",value:function(){return Ot("span",{className:this.props.containerClassName},Z(Object(l.a)(r.prototype),"render",this).call(this))}}]),r}(dt);xt.propTypes={videoId:Y.a.string,id:Y.a.string,className:Y.a.string,containerClassName:Y.a.string,opts:Y.a.shape({playerVars:Y.a.shape({start:Y.a.number,end:Y.a.number,autoplay:v.b,loop:v.b,playlist:Y.a.string,controls:v.b,rel:v.b,showinfo:v.b})}),onReady:Y.a.func,onError:Y.a.func,onPlay:Y.a.func,onPause:Y.a.func,onEnd:Y.a.func,onStateChange:Y.a.func,onPlaybackRateChange:Y.a.func,onPlaybackQualityChange:Y.a.func,customFullscreenButtonClicked:Y.a.bool,defaultFullscreenButton:Y.a.func,trackClick:Y.a.func},xt.defaultProps=It(It({},dt.defaultProps),{},{id:null,opts:{},containerClassName:"",onPlay:I.a,onPause:I.a,onEnd:I.a,onStateChange:I.a,onPlaybackRateChange:I.a,onPlaybackQualityChange:I.a}),xt.PlayerState={UNSTARTED:-1,ENDED:0,PLAYING:1,PAUSED:2,BUFFERING:3,CUED:5};var Mt,Ft,Nt,Bt=xt,jt=(r("dv4SV"),c.a.createElement);function Ut(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Vt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Ut(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Ut(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Gt="youtube-player",Ht=Object(P.safeRender)({componentName:"YouTubePlayer"})((Nt=Ft=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).getImageClassName=function(){return f()("".concat(Gt,"__image"))},n.getCustomCaptionsProps=function(){var e=n.props,t=e.defaultControls,r=e.startPlayFullscreen,a=n.state.hasStarted;return{hasClosedCaptions:!1,isIframePlayer:!0,className:f()(t&&!r&&a&&"".concat(Gt,"__controls"))}},n.getPlayer=function(){return n.player},n.getImageUrl=function(){var e=n.props.posterUrl,t=n.state.videoId;return e||"https://img.youtube.com/vi/".concat(t,"/maxresdefault.jpg")},n.onReady=function(e){var t=n.props.autoMute,r=!1;n.player=e.target,Number(t)&&(n.player.mute(),r=!0),n.player.isMuted()&&(r=!0);var a=n.player.getVolume()/100;n.setState({muted:r,volume:a,isLoading:!1})},n.onPause=function(){var e=n.props,t=e.startPlayFullscreen,r=e.isMobileDevice;t&&r&&n.props.onFullscreenToggle(!0),n.props.onPauseTrigger(),n.setState({paused:!0})},n.onVolumeClick=function(){var e=n.state.muted;n.trackClick(e?"Unmute":"Mute"),e?n.player.unMute():n.player.mute(),n.setState({muted:!e})},n.trackClick=Object(oe.j)(function(){return"https://www.youtube.com/watch?v=".concat(n.state.videoId)}),n.pauseVideo=function(){n.player.pauseVideo()},n.playVideo=function(){n.player.playVideo()},n.stopVideo=function(){n.player.stopVideo()},n.defaultFullscreenButton=function(){n.customFullscreenButtonClicked=!1},n.player=null,n.hasPlayRefs=!0,n}return Object(i.a)(r,[{key:"setVolume",value:function(e){this.player.setVolume(Math.round(100*e))}},{key:"_goToBeginning",value:function(){this.player.seekTo(0)}},{key:"renderPlayer",value:function(){var e,t=this.props,r=t.autoLoop,a=t.autoPlay,i=t.startPlayFullscreen,o=t.defaultControls,s=t.fluid,l=t.isFullScreen,u=t.playInModal,c=t.lang,d=t.playInBackground,h=this.state.videoId,p={playerVars:{autoplay:u?0:Number(a),loop:Number(r),playlist:r?h:null,controls:o&&!d?1:0,rel:0,showinfo:0,playsinline:i?0:1,cc_load_policy:1,hl:c,cc_lang_pref:c}};return jt(Bt,{videoId:h,trackClick:this.trackClick,opts:p,className:f()("".concat(Gt,"__player"),Object(n.a)({},"".concat(Gt,"__player--fluid"),s)),containerClassName:f()("".concat(Gt,"__container"),(e={},Object(n.a)(e,"".concat(Gt,"__container--fluid"),s),Object(n.a)(e,"".concat(Gt,"__container--full-screen"),l),e)),onReady:this.onReady,onPlay:this.onPlay,onPause:this.onPause,customFullscreenButtonClicked:this.customFullscreenButtonClicked,defaultFullscreenButton:this.defaultFullscreenButton,onError:this.onError,onEnd:this.onEnd})}},{key:"render",value:function(){return Z(Object(l.a)(r.prototype),"render",this).call(this)}}]),r}(Ye),Ft.propTypes=Vt(Vt({},z),{},{defaultControls:Y.a.bool,autoHideControls:Y.a.bool,fluid:Y.a.bool,hasSmallButtons:Y.a.bool,isFullScreen:Y.a.bool,onFullscreenToggle:Y.a.func,onPlayStart:Y.a.func,buttonOptionsBeforeStartPlay:q,buttonOptionsAfterStartPlay:q,resources:v.a,iconResources:Q,startPlayFullscreen:Y.a.bool,playInModal:Y.a.bool,portalContainerIdForControls:Y.a.string,getPlayClickHandler:Y.a.func,getStopVideoHandler:Y.a.func,onPlayTrigger:Y.a.func,onPauseTrigger:Y.a.func,currentPlayingVideo:Y.a.string,playerId:Y.a.string,lang:Y.a.string}),Ft.defaultProps=Vt({},Ye.defaultProps),Mt=Nt))||Mt;function Kt(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function Wt(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?Kt(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Kt(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var Yt,qt,zt,Xt=Wt(Wt(Wt(Wt(Wt(Wt({weDontSupportProvider:"Common/Video/video__we_dont-support_provider"},{videoStopFs:"Common/Video/video__stop-fs",videoFullscreenText:"Common/Video/fullscreen__text",videoAudioDescriptionIcon:"Common/Video/audio-description-icon",videoNewspaperIcon:"Common/Video/newspaper-icon",videoClosedCaptioningIcon:"Common/Video/closed-captioning-icon"}),{videoCircleIcon:"Common/Video/circle-icon",videoCogIcon:"Common/Video/cog-icon",videoCompressIcon:"Common/Video/compress-icon",videoCogCircleIcon:"Common/Video/cog-circle-icon",videoPlayCircleIcon:"Common/Video/play-circle-icon",videoPauseCircleIcon:"Common/Video/pause-circle-icon",videoExpandArrowsIcon:"Common/Video/expand-arrows-icon",videoAudioDescriptionIcon:"Common/Video/audio-description-icon",videoNewspaperIcon:"Common/Video/newspaper-icon",videoClosedCaptioningIcon:"Common/Video/closed-captioning-icon"}),{videoOptions:"Common/Video/video__options"}),{videoCaptioning:"Common/Video/Captioning"}),{videoAudioDescription:"Common/Video/Audio_description"}),{videoCloseCaptioning:"Common/Video/video__Close_captioning"}),Qt=(r("dEcod"),c.a.createElement),Jt=new K.a("scroll",{debounceInterval:300}),Zt=Object(_.a)(Xt)(Yt=Object(P.safeRender)({componentName:"Video"})((zt=qt=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(e){var n;return Object(a.a)(this,r),(n=t.call(this,e)).onScroll=function(){n.props.pauseOnScroll&&!document.body.classList.contains("noscroll")&&(function(e,t){var r=window.scrollY||window.pageYOffset,n=e.getBoundingClientRect().top+r,a=r,i=r+window.innerHeight,o=n,s=n+480?480:e.clientHeight;return s>=a&&s<=i||o<=i&&o>=a}(n.container)?n.player.playVideo():n.player.pauseVideo())},n.getVideoTag=function(e){n.video=e,function(e,t){e&&e.addEventListener("webkitendfullscreen",t)}(e,n.iphoneFullScreenCloseHandler)},n.iphoneFullScreenCloseHandler=function(){var e=n.props.enforcePlayInline;n.player&&!e&&n.player._goToBeginning(),n.setState({isFullScreen:!1})},n.getStopVideoHandler=function(e){n.stopVideo=e},n.getModalCloseHandler=function(e){n.modalCloseHandler=e},n.getPlayClickHandler=function(e){n.playClick=e},n.setFSSupportMode=function(){n.setState({hasFSModeSupport:!1},function(){n.video&&n.video.setAttribute("controls","controls")})},n.onFullscreenToggle=function(e){var t=n.state,r=t.isFullScreen;t.hasFSModeSupport&&(r||e?j():function(e){var t=e.requestFullscreen||e.requestFullScreen||e.mozRequestFullScreen||e.webkitRequestFullscreen||e.webkitRequestFullScreen||e.msRequestFullscreen;t&&t.bind(e)()}(n.container)),n.setState({isFullScreen:!(r||e)})},n.onMouseEnter=function(){n.setState({hovered:!0})},n.onMouseLeave=function(){n.setState({hovered:!1})},n.onEnd=function(){var e=n.props.autoLoop,t=n.state,r=t.isOpenModal,a=t.isFullScreen;r&&!e&&n.modalCloseHandler&&n.modalCloseHandler(),a&&!e&&(U()&&j(),n.video&&j(n.video),n.iphoneFullScreenCloseHandler())},n.onFullScreenChange=function(){var e=U(),t=n.state,r=t.hasFSModeSupport;t.isFullScreen&&!r&&n.player&&n.player._goToBeginning(),n.setState({isFullScreen:Boolean(e)})},n.onPlay=function(){var e=n.props,t=e.currentPlayingVideo,r=e.playerId,a=e.autoPlayText,i=n.state.isPlayFirstTime;t!==r&&n.props.changeCurrentPlayingVideo(r),i&&n.setState({autoPlayMessage:a,isPlayFirstTime:!1}),n.props.onPlayStart()},n.onPause=function(){var e=n.props;e.currentPlayingVideo===e.playerId&&n.props.changeCurrentPlayingVideo(null),n.props.onPlayPause()},n.handleOpenModal=function(e){var t;n.setState({isOpenModal:!0}),t=e.target,V.push(t),n.playClick&&n.playClick()},n.handleCloseModal=function(){n.setState({isOpenModal:!1}),function(){if(V.length>0){var e=V.pop();e.setAttribute(G,!0),e.focus(),setTimeout(function(){e&&e.removeAttribute(G)},10)}}(),n.stopVideo&&n.stopVideo(),n.props.handleCloseModal&&n.props.handleCloseModal()},n.startLockFocus=function(e){n.startFocusLocker?n.startFocusLocker.focus():e.focus()},n.isMobileDevice=function(){return!n.state.hasFSModeSupport&&!Object(H.b)()},n.isStartPlayFullScreen=function(){var e=n.props.startPlayFullscreen;return n.isMobileDevice()||e},n.isUseDefaultControls=function(){var e=n.props,t=e.defaultControls,r=e.playInModal,a=n.state.hasFSModeSupport;return t||!a||r},n.isAutoPlay=function(){var e=n.props,t=e.autoPlay,r=e.playInModal,a=e.playInBackground;return!n.isMobileDevice()&&r&&t||a},n.isStartPlayVideoInModal=function(){var e=n.props,t=e.playInModal;return!(e.enforcePlayInline||!Object(H.c)())||!n.isMobileDevice()&&t},n.refContainer=function(e){e&&(n.container=e,Array.prototype.forEach.call(n.container.getElementsByClassName("video-react-slider"),function(e){return e.setAttribute("role","slider")}))},n.refStartFocusLocker=function(e){n.startFocusLocker=e},n.playerRef=function(e){n.player=e},n.container=null,n.startFocusLocker=null,n.modalCloseHandler=null,n.state={isFullScreen:!1,hovered:!1,isOpenModal:!1,hasFSModeSupport:!0,autoPlayMessage:"",isPlayFirstTime:!0},n}return Object(i.a)(r,[{key:"componentDidMount",value:function(){var e;B()(document.documentElement.requestFullscreen||document.documentElement.requestFullScreen||document.documentElement.mozRequestFullScreen||document.documentElement.webkitRequestFullscreen||document.documentElement.webkitRequestFullScreen||document.documentElement.msRequestFullscreen)||this.setFSSupportMode(),this.props.pauseOnScroll&&Jt.addListener(this.onScroll),e=this.onFullScreenChange,document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("fullscreenchange",e),document.addEventListener("MSFullscreenChange",e)}},{key:"componentDidUpdate",value:function(){this.state.hasFSModeSupport||!this.video||this.video.hasAttribute("controls")||this.video.setAttribute("controls","controls")}},{key:"componentWillUnmount",value:function(){var e;e=this.onFullScreenChange,document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("fullscreenchange",e),document.removeEventListener("MSFullscreenChange",e),function(e,t){e&&e.removeEventListener("webkitendfullscreen",t)}(this.video,this.iphoneFullScreenCloseHandler),this.props.pauseOnScroll&&Jt.removeListener(this.onScroll)}},{key:"renderAutoPlayDesc",value:function(){var e=this.state.autoPlayMessage;return Qt("div",{className:"hidden-control",role:"region","aria-live":"polite"},e)}},{key:"renderPlayer",value:function(){var e,t,r=this.props,a=r.className,i=r.provider,o=r.isHlsLink,s=r.resources.videoWeDontSupportProvider,l=r.defaultControls,u=r.autoHideControls,c=r.portalContainerIdForControls,d=r.isVimeoIframe,h=r.playInBackground,p=this.state,v=p.isFullScreen,g=p.hovered,y=p.hasFSModeSupport,b=(e={},Object(n.a)(e,"Akamai",{component:et,blockName:$e}),Object(n.a)(e,"Vimeo",{component:Pt,blockName:_t}),Object(n.a)(e,J,{component:Ht,blockName:Gt}),e),T=o?b.Akamai:b[i],E=T?T.blockName:"",k=T&&T.component,S=this.isStartPlayVideoInModal(),_=this.props.fluid&&!S,C=l||S?{dir:"ltr"}:{};return Qt("div",Object(m.a)({},C,{className:f()("video-player",E,a,(t={},Object(n.a)(t,"".concat("video-player","--ipad"),Object(H.c)()),Object(n.a)(t,"".concat(E,"--not-fluid"),!_),Object(n.a)(t,"".concat(E,"--full-screen"),y&&v),Object(n.a)(t,"".concat("video-player","--full-screen"),y&&v),Object(n.a)(t,"".concat("video-player","--not-full-screen"),!v),Object(n.a)(t,"".concat("video-player","--hovered"),g),t)),ref:this.refContainer,onMouseLeave:this.onMouseLeave,onMouseEnter:this.onMouseEnter}),h&&this.renderAutoPlayDesc(),k?Qt(k,Object(m.a)({},this.props,{ref:this.playerRef,autoPlay:this.isAutoPlay(),playInModal:S,isMobileDevice:this.isMobileDevice(),getVideoTag:this.getVideoTag,hasFSModeSupport:y,startPlayFullscreen:!S&&this.isStartPlayFullScreen(),currentPlayingVideo:this.props.currentPlayingVideo,onPauseTrigger:this.onPause,onPlayTrigger:this.onPlay,isFullScreen:v,onFullscreenToggle:this.onFullscreenToggle,defaultControls:this.isUseDefaultControls(),autoHideControls:u||S,fluid:_,portalContainerIdForControls:S||v?null:c,refStartFocusLocker:S?this.refStartFocusLocker:void 0,onEnd:this.onEnd,getPlayClickHandler:this.getPlayClickHandler,getStopVideoHandler:this.getStopVideoHandler,isVimeoIframe:d,playInBackground:h})):Qt("div",null,Object(F.interpolate)(s,{provider:i})))}},{key:"render",value:function(){var e=this.props,t=e.provider,r=e.isHlsLink,a=e.posterUrl,i=e.posterAltText,o=e.classNameImage,s=e.classNameImageWrapper,l=e.resources,c=e.iconResources,d=e.portalContainerIdForControls,h=e.isLargePlayButton,p=e.ImageComponent,v=e.updateImagePropsFunction,g=e.hasPoster,m=e.isVimeoIframe,y=this.state.isOpenModal,b=t===J,T="Vimeo"===t&&!r;return this.isStartPlayVideoInModal()?Qt(u.Fragment,null,Qt("div",{className:f()(s,"".concat("video-player","__image--wrapper"))},a||g?Qt(p,v({className:f()(o,"".concat("video-player","__image")),altText:i,imageUrl:a,isBackgroundImage:!0})):Qt("div",{className:f()(o)}),Qt(Ce,{isLargePlayButton:h,portalContainerIdForControls:d,onPlayClick:this.handleOpenModal,resources:l,isOpenModalControls:!0,iconResources:c,isVimeoIframe:m})),y||b||T?Qt(L.a,{isHidden:b||T?!y:void 0,className:f()("".concat("video-player","__modal")),overlayClassName:"overlay-video",closeClassName:f()("".concat("video-player","__modal-close-button"),Object(n.a)({},"".concat("video-player","__modal-close-button--youtube"),b&&this.isUseDefaultControls())),classWrapper:f()("".concat("video-player","__modal-wrapper")),getCloseHandler:this.getModalCloseHandler,handleClose:this.handleCloseModal,startLockFocus:this.startLockFocus,disabledAutoFocusWhenBlur:!0},this.renderPlayer()):null):this.renderPlayer()}}]),r}(u.PureComponent),qt.defaultProps={defaultControls:!0,autoHideControls:!0,fluid:!0,hasSmallButtons:!1,pauseOnScroll:!1,onPlayStart:I.a,onPlayPause:I.a,changeCurrentPlayingVideo:I.a,ImageComponent:M.a,updateImagePropsFunction:S.a},Yt=zt))||Yt)||Yt,$t=Y.a.shape({altText:Y.a.string,contentHash:Y.a.string,url:Y.a.string}),er=(Y.a.shape({videoFullscreenText:Y.a.string,videoPauseText:Y.a.string,videoPlayText:Y.a.string,videoPlayInModalText:Y.a.string,videoPlayCircleIcon:$t,videoPauseCircleIcon:$t,videoCogIcon:$t,videoCogCircleIcon:$t,videoOptionsText:Y.a.string,videoStopFsText:Y.a.string,videoExpandArrowsIcon:$t,videoCompressIcon:$t,videoCloseCaptioningText:Y.a.string,videoClosedCaptioningIcon:$t,videoCaptioningText:Y.a.string,videoNewspaperIcon:$t,videoAudioDescriptionEnabledText:Y.a.string,videoAudioDescriptionDisabledText:Y.a.string,videoAudioDescriptionIcon:$t,videoCircleIcon:$t,videoWeDontSupportProvider:Y.a.string}),r("dEBho"));function tr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function rr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?tr(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):tr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}Object(er.registerReducer)("current-playing-video",function(e,t){return"SET_CURRENT_PLAYING_VIDEO"===t.type?rr(rr({},e),{},{currentPlayingVideoId:t.payload}):e});var nr,ar,ir,or=c.a.createElement;function sr(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function lr(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?sr(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):sr(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}var ur,cr=["videoPlayCircleIcon","videoPauseCircleIcon","videoCogIcon","videoCogCircleIcon","videoCompressIcon","videoExpandArrowsIcon","videoClosedCaptioningIcon","videoNewspaperIcon","videoAudioDescriptionIcon","videoCircleIcon"],dr=Object(_.a)({videoFullscreenText:"Common/Video/fullscreen__text",videoPauseText:"Common/Video/pause__text",videoPlayText:"Common/Video/play__text",videoPlayInModalText:"Common/Video/play__in__modal__text",videoPlayCircleIcon:"Common/Video/play-circle-icon",videoPauseCircleIcon:"Common/Video/pause-circle-icon",videoCogIcon:"Common/Video/cog-icon",videoCogCircleIcon:"Common/Video/cog-circle-icon",videoOptionsText:"Common/Video/video__options",videoStopFsText:"Common/Video/video__stop-fs",videoExpandArrowsIcon:"Common/Video/expand-arrows-icon",videoCompressIcon:"Common/Video/compress-icon",videoCloseCaptioningText:"Common/Video/video__Close_captioning",videoClosedCaptioningIcon:"Common/Video/closed-captioning-icon",videoCaptioningText:"Common/Video/Captioning",videoNewspaperIcon:"Common/Video/newspaper-icon",videoAudioDescriptionEnabledText:"Common/Video/Audio_descriptive__enabled",videoAudioDescriptionDisabledText:"Common/Video/Audio_descriptive__disabled",videoAudioDescriptionIcon:"Common/Video/audio-description-icon",videoCircleIcon:"Common/Video/circle-icon",videoWeDontSupportProvider:"Common/Video/video__we_dont-support_provider",autoPlayText:"Common/Video/video__autoplay__text"})(nr=Object(y.connect)(function(e){return{currentPlayingVideo:p()(e,"currentPlayingVideoId"),lang:Object(C.d)(e)}},{changeCurrentPlayingVideo:function(e){return{type:"SET_CURRENT_PLAYING_VIDEO",payload:e}}})(nr=Object(P.safeRender)({componentName:"Video Sdl"})((ir=ar=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).playerId=Object(b.getUniqueId)("video_"),e.updateSdlImagePropsFunction=function(t){var r=e.props.updateImagePropsFunction,n={url:t.imageUrl,altText:t.altText},a=p()(e.props,"content.content.image[0]",n);return r(lr(lr({},E()(t,["altText","imageUrl"])),{},{content:a,defaultContent:n}))},e.getIconResources=function(){var t=e.props.resources;return cr.reduce(function(e,r){var n=t[r];return e["".concat(r,"Url")]=Object(O.b)(p()(n,"url"),p()(n,"contentHash")),e},{})},e}return Object(i.a)(r,[{key:"isValidProps",value:function(){return Boolean(p()(this.props,"content.content"))}},{key:"render",value:function(){if(!this.isValidProps())return null;var e=this.props,t=e.content.content,r=t.id,n=t.playInModal,a=t.image,i=t.provider,o=t.autoLoop,s=t.autoMute,l=t.autoPlay,u=t.hlsLink,c=t.startPlayFullscreen,d=t["closed-captions"],f=t.descriptiveVideo,h=t.transcripts,v=t.description,g=e.playInBackground,y=e.pauseOnScroll,b="".concat(p()(this.props,"resources.autoPlayText"),". ").concat(v),T=p()(a,[0]),k=p()(f,"content.provider")===i?p()(f,"content.id"):void 0;return or(Zt,Object(m.a)({},E()(this.props,["content","updateImagePropsFunction"]),{playerId:this.playerId,videoId:r,playInModal:A(n),playInBackground:A(g),pauseOnScroll:y,autoLoop:A(o),autoMute:A(s),autoPlay:A(l),isHlsLink:A(u),startPlayFullscreen:A(c),hasPoster:Boolean(T),provider:i,closedCaptionsUrl:Object(O.b)(p()(d,"multimedia.url"),p()(d,"multimedia.contentHash")),transcriptsText:p()(h,"content.copy"),descriptiveVideoId:k,descriptiveClosedCaptionsUrl:Object(O.b)(p()(f,"content.closed-captions.multimedia.url"),p()(f,"content.closed-captions.multimedia.contentHash")),updateImagePropsFunction:this.updateSdlImagePropsFunction,iconResources:this.getIconResources(),autoPlayText:b}))}}]),r}(u.PureComponent),ar.defaultProps={ImageComponent:g.c,updateImagePropsFunction:S.a,defaultControls:!0,playInBackground:!1},nr=ir))||nr)||nr)||nr,fr=r("d5sTZ"),hr=r.n(fr),pr=r("d3C8i"),vr=(r("dQYZx"),c.a.createElement),gr=Object(pr.containerHOC)({fullWidth:!0})(ur=Object(P.safeRender)({componentName:"PageHeader"})(ur=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){var e;Object(a.a)(this,r);for(var n=arguments.length,i=new Array(n),o=0;o<n;o++)i[o]=arguments[o];return(e=t.call.apply(t,[this].concat(i))).state={hideHeader:!1},e.handleVideoStart=function(){e.setState({hideHeader:!0})},e.handleVideoPause=function(){e.setState({hideHeader:!1})},e.handleCloseModal=function(){e.setState({hideHeader:!1})},e}return Object(i.a)(r,[{key:"render",value:function(){var e=this.state.hideHeader,t=this.props,r=t.className,a=t.hasIcon,i=t.analytics,o=t.isDropDownPortal,s=t.useNoSSRForBody,l=t.isWidgetUtil,u=t.playInBackground,c=t.pauseOnScroll,d=this.props.content,h=d.preText,v=d.title,m=d.body,y=d.artwork,b=d.subTitle,T=d.link,E=d.bottomSubTitle,k=d.logo,S=E||m&&b,_=Boolean(y)&&!a,C=_&&(y.schema===g.b||y.schema===g.a),P=_&&"Video"===y.schema,w=u&&(Object(H.a)()||Object(H.b)()),A=m||b,O=a?"medium":"large",R=P?"page-header-video-controls-portal-".concat(y.content.id):null,I=p()(y,"content.image[0]",null);return vr("div",{"data-auto":"page-header",className:f()(r,"page-header",Object(n.a)({},"".concat("page-header","__shadow-unit"),_))},a&&vr(g.c,{content:y,className:f()("".concat("page-header","__icon")),skipAccessibility:!0}),(C||w)&&vr(g.c,{isBackgroundImage:!0,role:"Img",content:w?I:y,className:f()("".concat("page-header","__image-wrapper"))}),!w&&P&&vr("div",{className:f()("".concat("page-header","__video-wrapper"),e&&"".concat("page-header","__video-wrapper--playing"))},vr(dr,{isLargePlayButton:!0,content:y,fluid:!1,autoHideControls:!1,portalContainerIdForControls:R,handleCloseModal:this.handleCloseModal,onPlayStart:this.handleVideoStart,onPlayPause:this.handleVideoPause,playInBackground:u,pauseOnScroll:c})),vr("div",{className:f()("e-container--separator","".concat("page-header","__content-header"))},vr(hr.a,{analytics:i,content:{preTitle:h,title:v,body:A,link:T,subTitle:S,logo:k},hasInvertedColors:_,size:O,isPageHeader:!l,extraClass:f()(_&&"page-header"),portalContainerIdForVideoControls:R,isDropDownPortal:o,useNoSSRForBody:s})))}}]),r}(u.Component))||ur)||ur},dLZSo:function(e,t,r){},dLgmY:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("dlSNA")),i=n(r("dRIqP")),o=n(r("dlwsE")),s=n(r("dW8MJ")),l=n(r("da1gu")),u=n(r("dNsbk")),c=n(r("dPJYZ")),d=n(r("d7W2i")),f=r("dcDcd"),h=n(r("d9B4+")),p=r("dEVUy"),v={clickable:h.default.bool,dblclickable:h.default.bool,manager:h.default.object,actions:h.default.object,player:h.default.object,shortcuts:h.default.array},g=function(e){function t(e,r){var n;return(0,o.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).defaultShortcuts=[{keyCode:32,handle:n.togglePlay},{keyCode:75,handle:n.togglePlay},{keyCode:70,handle:n.toggleFullscreen},{keyCode:37,handle:function(e,t){e.hasStarted&&t.replay(5,{action:"replay-5",source:"shortcut"})}},{keyCode:74,handle:function(e,t){e.hasStarted&&t.replay(10,{action:"replay-10",source:"shortcut"})}},{keyCode:39,handle:function(e,t){e.hasStarted&&t.forward(5,{action:"forward-5",source:"shortcut"})}},{keyCode:76,handle:function(e,t){e.hasStarted&&t.forward(10,{action:"forward-10",source:"shortcut"})}},{keyCode:36,handle:function(e,t){e.hasStarted&&t.seek(0)}},{keyCode:35,handle:function(e,t){e.hasStarted&&t.seek(e.duration)}},{keyCode:38,handle:function(e,t){var r=e.volume+.05;r>1&&(r=1),t.changeVolume(r,{action:"volume-up",source:"shortcut"})}},{keyCode:40,handle:function(e,t){var r=e.volume-.05;r<0&&(r=0);var n=r>0?"volume-down":"volume-off";t.changeVolume(r,{action:n,source:"shortcut"})}},{keyCode:190,shift:!0,handle:function(e,t){var r=e.playbackRate;r>=1.5?r=2:r>=1.25?r=1.5:r>=1?r=1.25:r>=.5?r=1:r>=.25?r=.5:r>=0&&(r=.25),t.changeRate(r,{action:"fast-forward",source:"shortcut"})}},{keyCode:188,shift:!0,handle:function(e,t){var r=e.playbackRate;r<=.5?r=.25:r<=1?r=.5:r<=1.25?r=1:r<=1.5?r=1.25:r<=2&&(r=1.5),t.changeRate(r,{action:"fast-rewind",source:"shortcut"})}}],n.shortcuts=(0,i.default)(n.defaultShortcuts),n.mergeShortcuts=n.mergeShortcuts.bind((0,c.default)(n)),n.handleKeyPress=n.handleKeyPress.bind((0,c.default)(n)),n.handleClick=n.handleClick.bind((0,c.default)(n)),n.handleDoubleClick=n.handleDoubleClick.bind((0,c.default)(n)),n}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){this.mergeShortcuts(),document.addEventListener("keydown",this.handleKeyPress),document.addEventListener("click",this.handleClick),document.addEventListener("dblclick",this.handleDoubleClick)}},{key:"componentDidUpdate",value:function(e){e.shortcuts!==this.props.shortcuts&&this.mergeShortcuts()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyPress),document.removeEventListener("click",this.handleClick),document.removeEventListener("dblclick",this.handleDoubleClick)}},{key:"mergeShortcuts",value:function(){var e=function(e){var t=e.keyCode,r=void 0===t?0:t,n=e.ctrl,a=void 0!==n&&n,i=e.shift,o=void 0!==i&&i,s=e.alt,l=void 0!==s&&s;return"".concat(r,":").concat(a,":").concat(o,":").concat(l)},t=this.defaultShortcuts.reduce(function(t,r){return Object.assign(t,(0,a.default)({},e(r),r))},{}),r=(this.props.shortcuts||[]).reduce(function(t,r){var n=r.keyCode,i=r.handle;return n&&"function"==typeof i?Object.assign(t,(0,a.default)({},e(r),r)):t},t),n=function(e){var t=0;return["ctrl","shift","alt"].forEach(function(r){e[r]&&t++}),t};this.shortcuts=Object.keys(r).map(function(e){return r[e]}).sort(function(e,t){return n(t)-n(e)})}},{key:"togglePlay",value:function(e,t){e.paused?t.play({action:"play",source:"shortcut"}):t.pause({action:"pause",source:"shortcut"})}},{key:"toggleFullscreen",value:function(e,t){t.toggleFullscreen(e)}},{key:"handleKeyPress",value:function(e){var t=this.props,r=t.player,n=t.actions;if(r.isActive&&(!document.activeElement||!((0,p.hasClass)(document.activeElement,"video-react-control")||(0,p.hasClass)(document.activeElement,"video-react-menu-button-active")||(0,p.hasClass)(document.activeElement,"video-react-big-play-button")))){var a=e.keyCode||e.which,i=e.ctrlKey||e.metaKey,o=e.shiftKey,s=e.altKey,l=this.shortcuts.filter(function(e){return!(!e.keyCode||e.keyCode-a!=0||void 0!==e.ctrl&&e.ctrl!==i||void 0!==e.shift&&e.shift!==o||void 0!==e.alt&&e.alt!==s)})[0];l&&(l.handle(r,n),e.preventDefault())}}},{key:"canBeClicked",value:function(e,t){return!(!e.isActive||"VIDEO"!==t.target.nodeName||4!==e.readyState)}},{key:"handleClick",value:function(e){var t=this.props,r=t.player,n=t.actions,a=t.clickable;this.canBeClicked(r,e)&&a&&this.togglePlay(r,n)}},{key:"handleDoubleClick",value:function(e){var t=this.props,r=t.player,n=t.actions,a=t.dblclickable;this.canBeClicked(r,e)&&a&&this.toggleFullscreen(r,n)}},{key:"render",value:function(){return null}}]),t}(f.Component);t.default=g,g.propTypes=v,g.defaultProps={clickable:!0,dblclickable:!0},g.displayName="Shortcut"},dMEFE:function(e,t,r){"use strict";var n;n=function(){var e={},t={};return e.on=function(e,r){var n={name:e,handler:r};return t[e]=t[e]||[],t[e].unshift(n),n},e.off=function(e){var r=t[e.name].indexOf(e);-1!==r&&t[e.name].splice(r,1)},e.trigger=function(e,r){var n,a=t[e];if(a)for(n=a.length;n--;)a[n].handler(r)},e},e.exports=n},dMIx2:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,a=(n=r("dMuZe"))&&n.__esModule?n:{default:n};t.default=function(e){return new Promise(function(t){if(window.YT&&window.YT.Player&&window.YT.Player instanceof Function)t(window.YT);else{var r="http:"===window.location.protocol?"http:":"https:";(0,a.default)(r+"//www.youtube.com/iframe_api",function(t){t&&e.trigger("error",t)});var n=window.onYouTubeIframeAPIReady;window.onYouTubeIframeAPIReady=function(){n&&n(),t(window.YT)}}})},e.exports=t.default},dMVZn:function(e,t,r){var n=r("dlSNA");e.exports=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?Object(arguments[t]):{},a=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&a.push.apply(a,Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable})),a.forEach(function(t){n(e,t,r[t])})}return e},e.exports.default=e.exports,e.exports.__esModule=!0},dMuZe:function(e,t){function r(e,t){e.onload=function(){this.onerror=this.onload=null,t(null,e)},e.onerror=function(){this.onerror=this.onload=null,t(new Error("Failed to load "+this.src),e)}}e.exports=function(e,t,n){var a=document.head||document.getElementsByTagName("head")[0],i=document.createElement("script");"function"==typeof t&&(n=t,t={}),t=t||{},n=n||function(){},i.type=t.type||"text/javascript",i.charset=t.charset||"utf8",i.async=!("async"in t&&!t.async),i.src=e,t.attrs&&function(e,t){for(var r in t)e.setAttribute(r,t[r])}(i,t.attrs),t.text&&(i.text=""+t.text),("onload"in i?r:function(e,t){e.onreadystatechange=function(){"complete"!=this.readyState&&"loaded"!=this.readyState||(this.onreadystatechange=null,t(null,e))}})(i,n),i.onload||r(i,n),a.appendChild(i)}},dN0m3:function(e,t,r){},dNa29:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s=r("dtJTW"),l={player:a.default.object,className:a.default.string};function u(e){var t=e.player,r=t.currentTime,n=t.duration,a=e.className,l=n-r,u=(0,s.formatTime)(l);return i.default.createElement("div",{className:(0,o.default)("video-react-remaining-time video-react-time-control video-react-control",a)},i.default.createElement("div",{className:"video-react-remaining-time-display","aria-live":"off"},i.default.createElement("span",{className:"video-react-control-text"},"Remaining Time "),"-".concat(u)))}u.propTypes=l,u.displayName="RemainingTimeDisplay";var c=u;t.default=c},dNsbk:function(e,t){function r(t){return e.exports=r=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},e.exports.default=e.exports,e.exports.__esModule=!0,r(t)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},dNucv:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r("dQbLZ")),a=u(r("dYEIV")),i=u(r("djo6Y")),o=u(r("dcDcd")),s=(u(r("d17x9")),u(r("dTSYQ"))),l=u(r("dPuqe"));function u(e){return e&&e.__esModule?e:{default:e}}function c(e){var t=e.className,r=e.icon,u=e.iconClassName,c=e.innerRef,d=e.children,f=e.removeIconTag,h=(0,i.default)(e,["className","icon","iconClassName","innerRef","children","removeIconTag"]),p="icon-chevron-right"===r||"icon-chevron-left"===r;return o.default.createElement("span",(0,n.default)({dir:"auto",className:(0,s.default)(t,"pictogram-wrapper",p&&"pictogram-wrapper__chevron",(0,a.default)({},"icon "+r+" "+u,!f)),"aria-hidden":"true",ref:c},(0,l.default)(h,"dispatch")),f?o.default.createElement("i",{className:(0,s.default)("icon",r,u)},d):d)}r("dFBPE"),r("dP/Pg"),c.defaultProps={removeIconTag:!0},t.default=o.default.forwardRef(function(e,t){return o.default.createElement(c,(0,n.default)({innerRef:t},e))})},dOr14:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ANALYTICS_AREA_FOOTER_NAV=t.ANALYTICS_AREA_FOOTER_LOGO=t.ANALYTICS_AREA_HEADER_NAV=t.ANALYTICS_AREA_HEADER_LOGO=void 0,t.attributeCardTracking=function(e){return s("Card",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)},t.attributeCtaTracking=function(e){return s("CTA",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)},t.attributeImageTracking=function(e){return s("Image",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)},t.attributeIconTracking=function(e){return s("Icon",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)},t.attributeLinkTracking=function(e){return s("Link",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)},t.attributeTabTracking=function(e){return s("Tab",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o)};var n,a=(n=r("daAZC"))&&n.__esModule?n:{default:n},i=r("dvyNr"),o="pagebody";function s(e,t,r){var n=(0,i.extractLabel)(t);if(n){(0,i.reportTracking)(e,"attribute",n);var o={"data-id":r+"_"+(t.isExternal?"ext_":"")+(0,a.default)(e),"data-link":n};return t.ecomid&&(o["data-ecom-id"]=t.ecomid,o["data-ecom-name"]=t.name,o["data-ecom-creative"]=t.creative,o["data-ecom-type"]=t.type||(0,a.default)(e)),o}return{}}t.ANALYTICS_AREA_HEADER_LOGO="header_logo",t.ANALYTICS_AREA_HEADER_NAV="header_nav",t.ANALYTICS_AREA_FOOTER_LOGO="footer_logo",t.ANALYTICS_AREA_FOOTER_NAV="footer_nav"},"dP/Pg":function(e,t,r){},dPJYZ:function(e,t){e.exports=function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e},e.exports.default=e.exports,e.exports.__esModule=!0},dPUKA:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getImageUrl=function(e){var t=(0,a.default)(e,"url",null),r=(0,a.default)(e,"contentHash",null);return(0,i.getFullAssetsUrl)(t,r)};var n,a=(n=r("dmwIZ"))&&n.__esModule?n:{default:n},i=r("dfWmG")},dQJtQ:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=f;var a=n(r("dpVnL")),i=n(r("dMVZn")),o=n(r("d9B4+")),s=n(r("dcDcd")),l=n(r("dTSYQ")),u=n(r("dmJvV")),c=n(r("d4FqI")),d={inline:o.default.bool,onClick:o.default.func.isRequired,onFocus:o.default.func,onBlur:o.default.func,className:o.default.string};function f(e){var t=e.inline,r=e.className,n=(0,i.default)({},e);return delete n.children,delete n.inline,delete n.className,s.default.createElement(u.default,(0,a.default)({className:(0,l.default)(r,{"video-react-menu-button-inline":!!t,"video-react-menu-button-popup":!t},"video-react-control video-react-button video-react-menu-button")},n),s.default.createElement(c.default,e))}f.propTypes=d,f.defaultProps={inline:!0},f.displayName="PopupButton"},dQVMK:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n,a=(n=r("dvN+2"))&&n.__esModule?n:{default:n},i=e.env.TEST?a.default:r("d81GO");t.default=i}).call(this,r("dKCCg"))},dQYZx:function(e,t,r){},dQrqe:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dpVnL")),o=a(r("dlwsE")),s=a(r("dW8MJ")),l=a(r("da1gu")),u=a(r("dNsbk")),c=a(r("dPJYZ")),d=a(r("d7W2i")),f=a(r("d9B4+")),h=n(r("dcDcd")),p=a(r("dTSYQ")),v=a(r("dkXlQ")),g=a(r("djSMv")),m={actions:f.default.object,player:f.default.object,className:f.default.string,onFocus:f.default.func,onBlur:f.default.func},y=function(e){function t(e,r){var n;return(0,o.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).state={percentage:"0%"},n.handleMouseMove=n.handleMouseMove.bind((0,c.default)(n)),n.handlePercentageChange=n.handlePercentageChange.bind((0,c.default)(n)),n.checkMuted=n.checkMuted.bind((0,c.default)(n)),n.getPercent=n.getPercent.bind((0,c.default)(n)),n.stepForward=n.stepForward.bind((0,c.default)(n)),n.stepBack=n.stepBack.bind((0,c.default)(n)),n.handleFocus=n.handleFocus.bind((0,c.default)(n)),n.handleBlur=n.handleBlur.bind((0,c.default)(n)),n.handleClick=n.handleClick.bind((0,c.default)(n)),n}return(0,d.default)(t,e),(0,s.default)(t,[{key:"componentDidMount",value:function(){}},{key:"getPercent",value:function(){var e=this.props.player;return e.muted?0:e.volume}},{key:"checkMuted",value:function(){var e=this.props,t=e.player,r=e.actions;t.muted&&r.mute(!1)}},{key:"handleMouseMove",value:function(e){var t=this.props.actions;this.checkMuted();var r=this.slider.calculateDistance(e);t.changeVolume(r)}},{key:"stepForward",value:function(){var e=this.props,t=e.player,r=e.actions;this.checkMuted(),r.changeVolume(t.volume+.1)}},{key:"stepBack",value:function(){var e=this.props,t=e.player,r=e.actions;this.checkMuted(),r.changeVolume(t.volume-.1)}},{key:"handleFocus",value:function(e){this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){this.props.onBlur&&this.props.onBlur(e)}},{key:"handlePercentageChange",value:function(e){e!==this.state.percentage&&this.setState({percentage:e})}},{key:"handleClick",value:function(e){e.stopPropagation()}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,n=t.className,a=(100*r.volume).toFixed(2);return h.default.createElement(v.default,(0,i.default)({ref:function(t){e.slider=t},label:"volume level",valuenow:a,valuetext:"".concat(a,"%"),onMouseMove:this.handleMouseMove,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,sliderActive:this.handleFocus,sliderInactive:this.handleBlur,getPercent:this.getPercent,onPercentageChange:this.handlePercentageChange,stepForward:this.stepForward,stepBack:this.stepBack},this.props,{className:(0,p.default)(n,"video-react-volume-bar video-react-slider-bar")}),h.default.createElement(g.default,this.props))}}]),t}(h.Component);y.propTypes=m,y.displayName="VolumeBar";var b=y;t.default=b},dRIqP:function(e,t,r){var n=r("dIjbi"),a=r("dEbDI"),i=r("dZhPi"),o=r("dBnag");e.exports=function(e){return n(e)||a(e)||i(e)||o()},e.exports.default=e.exports,e.exports.__esModule=!0},dRPda:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,i=m(r("dQbLZ")),o=m(r("djo6Y")),s=m(r("diCc5")),l=m(r("dV7oC")),u=m(r("dFYw3")),c=m(r("dmRg0")),d=m(r("dlSCD")),f=r("dcDcd"),h=m(f),p=(m(r("d17x9")),m(r("dTSYQ"))),v=m(r("dvN+2")),g=m(r("dPuqe"));function m(e){return e&&e.__esModule?e:{default:e}}r("dBNTa");var y=["dateInputRef","fetchAreasByLang","displayFormat","monthFormat","searchData","setInitialValues","getInputRef","onSearch","searchWidgetData","twoline","renderSpanOnTag","useRefs","activeClassName"],b=(a=n=function(e){function t(){var e,r,n,a;(0,s.default)(this,t);for(var i=arguments.length,o=Array(i),l=0;l<i;l++)o[l]=arguments[l];return r=n=(0,u.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n.state={clickFocused:!1,clickFocusedAfterNewWindow:!1},n.handleMouseDown=function(e){n.props.onMouseDown(e),n.handleMouseClick(),n.mouseDown=!0},n.handleTouchStart=function(e){n.props.onTouchStart(e),n.handleMouseClick()},n.handleBlur=function(e){n.props.onBlur(e),n.setState({clickFocused:!1}),n.mouseDown=!1},n.handleFocus=function(e){var t=n.props.onFocus,r=n.state,a=r.clickFocused,i=r.clickFocusedAfterNewWindow;a||(n.mouseDown&&!i?(n.setState({clickFocusedAfterNewWindow:!0}),n.mouseDown=!1):!n.mouseDown&&i?n.setState({clickFocusedAfterNewWindow:!1}):n.mouseDown&&i&&(n.mouseDown=!1)),t(e)},n.tagRef=function(e){n.tag=e,n.props.innerRef(e)},a=r,(0,u.default)(n,a)}return(0,c.default)(t,e),(0,l.default)(t,[{key:"handleMouseClick",value:function(){this.setState({clickFocused:!0})}},{key:"focus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.makeButtonActive,r=void 0!==t&&t,n=(0,o.default)(e,["makeButtonActive"]);this.tag?(this.tag.focus(n),this.setState({clickFocused:r})):console.error("FocusButton: focus called without witRefs prop")}},{key:"blur",value:function(){this.tag?this.tag.blur():console.error("FocusButton: blur called without witRefs prop")}},{key:"render",value:function(){var e=this.props,t=e.tag,r=e.className,n=e.activeClassName,a=e.renderSpanOnTag,s=e.useRefs,l=(0,o.default)(e,["tag","className","activeClassName","renderSpanOnTag","useRefs"]),u=(0,d.default)(t)?{innerRef:this.tagRef}:{ref:this.tagRef},c=this.state,f=c.clickFocused,v=c.clickFocusedAfterNewWindow,m=f||v,b="button"===t?y:[],T=(0,d.default)(t)?{renderspan:""+a}:{};return h.default.createElement(t,(0,i.default)({},(0,g.default)(l,["innerRef"].concat(b)),s?u:{},T,{className:(0,p.default)(r,m&&n),onBlur:this.handleBlur,onFocus:this.handleFocus,onMouseDown:this.handleMouseDown,onTouchStart:this.handleTouchStart}))}}]),t}(f.PureComponent),n.defaultProps={activeClassName:"nofocus",tag:"button",onMouseDown:v.default,onTouchStart:v.default,onBlur:v.default,onFocus:v.default,innerRef:v.default,renderSpanOnTag:!0},a);t.default=b},dSksO:function(e,t){function r(t,n){return e.exports=r=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},e.exports.default=e.exports,e.exports.__esModule=!0,r(t,n)}e.exports=r,e.exports.default=e.exports,e.exports.__esModule=!0},"dT+Zs":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.dimensions=void 0;var n=o(r("dEJiy"));t.getSpaceAboveElement=function(e){var t=e.element,r=e.scrollableContainer;return s.memoized(t,r).top},t.getSpaceBelowElement=function(e){var t=e.element,r=e.scrollableContainer;return e.isWithVisibleElement?document.documentElement.clientHeight-t.getBoundingClientRect().bottom:r.scrollHeight-s.memoized(t,r).bottom};var a=o(r("d5yJu")),i=o(r("diP1z"));function o(e){return e&&e.__esModule?e:{default:e}}var s=t.dimensions=function(e,t){if(!(0,i.default)(e))return console.warn("Expected a DOM element, received:",void 0===e?"undefined":(0,n.default)(e)),{};var r=window.pageYOffset,a=window.pageXOffset;t&&t!==document.documentElement&&(r=t.scrollTop,a=t.scrollLeft);var o=e.getBoundingClientRect(),s=e.offsetHeight,l=e.offsetWidth,u=o.left+a,c=o.top+r;return{left:u,right:u+l,top:c,bottom:c+s,width:l,height:s}};s.timerId=null,s.resetMemoizedCache=function(){s.memoized=(0,a.default)(function(){return clearTimeout(s.timerId),s.timerId=setTimeout(function(){s.resetMemoizedCache()}),s.apply(void 0,arguments)})},s.resetMemoizedCache()},dT3X0:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("dPUKA");Object.keys(n).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return n[e]}})});var a=r("dxbxn");Object.keys(a).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return a[e]}})});var i=r("dfWmG");Object.keys(i).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return i[e]}})});var o=r("dxmFE");Object.keys(o).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return o[e]}})});var s=r("dyIOT");Object.keys(s).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return s[e]}})});var l=r("dc5dG");Object.keys(l).forEach(function(e){"default"!==e&&"__esModule"!==e&&Object.defineProperty(t,e,{enumerable:!0,get:function(){return l[e]}})})},dT729:function(e,t,r){},dTQIS:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.updateQueryStringParameter=function(e,t,r){var n=new RegExp("([?&])"+t+"=.*?(&|$)","i"),a=-1!==e.indexOf("?")?"&":"?";return e.match(n)?e.replace(n,"$1"+t+"="+r+"$2"):e+a+t+"="+r},t.getParameterByName=function(e,t){var r=t;r||(r=""),e=e.replace(/[\[\]]/g,"\\$&");var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)").exec(r);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null}},dTqRt:function(e,t){e.exports=function(e){return e&&e.__esModule?e:{default:e}},e.exports.default=e.exports,e.exports.__esModule=!0},"dU2+3":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getUniqueId=void 0;var n=r("d5v8Y");t.getUniqueId=function(e){return e+"__"+(0,n.v4)()}},dU3K2:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p=a(r("do4RB")),v=a(r("dDeZD")),g=a(r("dmJvV")),m={inline:d.default.bool,items:d.default.array,className:d.default.string,onSelectItem:d.default.func,children:d.default.any,selectedIndex:d.default.number},y=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).state={active:!1,activateIndex:e.selectedIndex||0},n.commitSelection=n.commitSelection.bind((0,u.default)(n)),n.activateMenuItem=n.activateMenuItem.bind((0,u.default)(n)),n.handleClick=n.handleClick.bind((0,u.default)(n)),n.renderMenu=n.renderMenu.bind((0,u.default)(n)),n.handleFocus=n.handleFocus.bind((0,u.default)(n)),n.handleBlur=n.handleBlur.bind((0,u.default)(n)),n.handleUpArrow=n.handleUpArrow.bind((0,u.default)(n)),n.handleDownArrow=n.handleDownArrow.bind((0,u.default)(n)),n.handleEscape=n.handleEscape.bind((0,u.default)(n)),n.handleReturn=n.handleReturn.bind((0,u.default)(n)),n.handleTab=n.handleTab.bind((0,u.default)(n)),n.handleKeyPress=n.handleKeyPress.bind((0,u.default)(n)),n.handleSelectItem=n.handleSelectItem.bind((0,u.default)(n)),n.handleIndexChange=n.handleIndexChange.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(e){e.selectedIndex!==this.props.selectedIndex&&this.activateMenuItem(this.props.selectedIndex)}},{key:"commitSelection",value:function(e){this.setState({activateIndex:e}),this.handleIndexChange(e)}},{key:"activateMenuItem",value:function(e){this.setState({activateIndex:e}),this.handleIndexChange(e)}},{key:"handleIndexChange",value:function(e){(0,this.props.onSelectItem)(e)}},{key:"handleClick",value:function(){this.setState(function(e){return{active:!e.active}})}},{key:"handleFocus",value:function(){document.addEventListener("keydown",this.handleKeyPress)}},{key:"handleBlur",value:function(){this.setState({active:!1}),document.removeEventListener("keydown",this.handleKeyPress)}},{key:"handleUpArrow",value:function(e){var t=this.props.items;if(this.state.active){e.preventDefault();var r=this.state.activateIndex-1;r<0&&(r=t.length?t.length-1:0),this.activateMenuItem(r)}}},{key:"handleDownArrow",value:function(e){var t=this.props.items;if(this.state.active){e.preventDefault();var r=this.state.activateIndex+1;r>=t.length&&(r=0),this.activateMenuItem(r)}}},{key:"handleTab",value:function(e){this.state.active&&(e.preventDefault(),this.commitSelection(this.state.activateIndex))}},{key:"handleReturn",value:function(e){e.preventDefault(),this.state.active?this.commitSelection(this.state.activateIndex):this.setState({active:!0})}},{key:"handleEscape",value:function(){this.setState({active:!1,activateIndex:0})}},{key:"handleKeyPress",value:function(e){27===e.which?this.handleEscape(e):9===e.which?this.handleTab(e):13===e.which?this.handleReturn(e):38===e.which?this.handleUpArrow(e):40===e.which&&this.handleDownArrow(e)}},{key:"handleSelectItem",value:function(e){this.commitSelection(e)}},{key:"renderMenu",value:function(){var e=this;if(!this.state.active)return null;var t=this.props.items;return f.default.createElement(p.default,null,t.map(function(t,r){return f.default.createElement(v.default,{item:t,index:r,onSelectItem:e.handleSelectItem,activateIndex:e.state.activateIndex,key:"item-".concat(r++)})}))}},{key:"render",value:function(){var e=this,t=this.props,r=t.inline,n=t.className;return f.default.createElement(g.default,{className:(0,h.default)(n,{"video-react-menu-button-inline":!!r,"video-react-menu-button-popup":!r,"video-react-menu-button-active":this.state.active},"video-react-control video-react-button video-react-menu-button"),role:"button",tabIndex:"0",ref:function(t){e.menuButton=t},onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur},this.props.children,this.renderMenu())}}]),t}(f.Component);t.default=y,y.propTypes=m,y.displayName="MenuButton"},dUXv2:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=(0,n(r("d8nKf")).default)("replay");a.displayName="ReplayControl";var i=a;t.default=i},dW8MJ:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}e.exports=function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e},e.exports.default=e.exports,e.exports.__esModule=!0},dWI6X:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=l(r("dQbLZ"));t.createClientErrorTracker=function(e){return T("Client",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DataPush.Common_siteErrorCode")},t.createClientWebChatTracker=function(e){return function(e,t,r,n){return(0,s.reportTracking)("Client","Webchat",t),function(e,a){var i=(0,s.extractLabel)(t,a);i&&(0,s.trackEvent)({event:n,category:d,action:f,label:e?i+":"+e:i,value:0},a,r)}}(0,e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EventTrigger.PageBody_Click")},t.createSystemErrorTracker=function(e){return T("System",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default,arguments.length>2&&void 0!==arguments[2]?arguments[2]:"DataPush.Common_siteErrorCode")},t.createOnLoadGATracker=function(e){return function(e,t,r,n,a){return function(e){var r=(0,s.extractLabel)(t,e);r&&(0,s.trackEvent)({event:"EventTrigger.JoinSkywards_Registration",category:"Join Skywards",action:"Registration",label:r},e,a)}}(0,e,0,0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default)},t.createFormStartTracker=function(e){return E("start",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default)},t.createFormSubmitTracker=function(e){return E("submit",e,arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default)},t.createFlightStatusRouteFormSubmitTracker=function(e){return k(e,"Search by Route",arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default)},t.createFlightStatusFlightFormSubmitTracker=function(e){return k(e,"Search by Flight Number",arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default)},t.createGenericClickTracker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CTA",t=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Clicked",i=arguments[5];return(0,s.reportTracking)(e,"click",t),function(e){var o=(0,s.extractLabel)(t,e);o&&(0,s.trackEvent)({event:r,category:n,action:a,label:o,value:0},e,i)}},t.createBodyCardClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("Card",e,g,u,t)},t.createBodyCtaClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u;return S(arguments.length>4&&void 0!==arguments[4]?arguments[4]:"CTA",e,r,n,t,!(arguments.length>5&&void 0!==arguments[5])||arguments[5],arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Clicked")},t.createPageBodyCtaClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("CTA",e,b,u,t)},t.createHeaderCtaClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("CTA",e,m,h,t)},t.createFooterCtaClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("CTA",e,y,p,t)},t.createPageBodyInteractionTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("CTA",e,b,u,t,!1)},t.createBodyIconClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("Icon",e,g,u,t)},t.createHeaderIconClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("Icon",e,m,h,t)},t.createBodyFormFieldClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("Form Field",e,g,u,t)},t.createBodyTabClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("Tab",e,g,u,t)},t.createHeaderSectionClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return S("Section",e,m,h,t)},t.createVideoClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return(0,s.reportTracking)("Video","click",e),function(r,n){return(0,s.trackEvent)({event:"EventTrigger.VideoInteraction_Common",category:c,action:r+" Button Clicked",label:(0,s.extractLabel)(e,n)||"Unknown",value:0},n,t)}},t.createScrollTracker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:o.default;return(0,s.reportTracking)("Page","scroll","Unique percentage with 10% step"),function(t,r){return(0,s.trackEvent)({event:"EventTrigger.Generic_ScrollTracking",category:u,action:"Scroll Tracking",label:String(t),value:0},r,e)}},t.createTypedTextboxCountryChooseTracker=function(e){return _(e,"Typed in Country",arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default)},t.createSelectedCountryChooseTracker=function(e){return _(e,"Selected Country",arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default)},t.createSearchTermSubmitTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return(0,s.reportTracking)("Search Term","submit",e),function(r){var n=(0,s.extractLabel)(e,r);n&&(0,s.trackEvent)({event:"EventTrigger.Search_searchTerm",category:v,action:"Search Term",label:n,value:0},r,t)}},t.createPopupShownTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return(0,s.reportTracking)("Popup","shown",e),function(r){return(0,s.trackEvent)({event:"EventTrigger.Generic_pageBodyInteractionPopupShown_nonInteractive",category:u,action:"Popup Shown",label:""+(0,s.extractLabel)(e,r)||"Unknown",value:0},r,t)}},t.createOnLoadCPMTracker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CPM",t=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"EventTrigger.PageBody_CardShown_nonInteractive",n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Card Shown",i=arguments.length>5&&void 0!==arguments[5]&&arguments[5],o=arguments[6];return(0,s.reportTracking)(e,"shown",t),function(e){var l=(0,s.extractLabel)(t,e);l&&(0,s.trackEvent)({event:r,category:n,action:a,label:l,value:0,nonInteraction:i},e,o)}},t.createPaymentTypeClickTracker=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"CTA",t=arguments[1],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:u,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"Clicked",i=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"",o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"",l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"",c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:"",d=arguments.length>9&&void 0!==arguments[9]?arguments[9]:"",f=arguments.length>10&&void 0!==arguments[10]&&arguments[10],h=arguments[11];return(0,s.reportTracking)(e,"click",t),function(e){var u=(0,s.extractLabel)(t,e);u&&(0,s.trackEvent)({event:r,category:n,action:a,label:u,value:0,creditCardType:i,paymentMethodType:o,URPpaymentOption:c,coRelationID:d,URPPayload:l,nonInteraction:f},e,h)}},t.createPromoClickTracker=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.default;return(0,s.reportTracking)("Promo","click",e),function(r){return(0,s.trackEvent)({event:"EventTrigger.PageBody_PromoClickTracking",category:u,action:"Promotion Clicked",label:e,value:0},r,t)}};var a=l(r("du6S6")),i=l(r("dExA7")),o=l(r("dvN+2")),s=r("dvyNr");function l(e){return e&&e.__esModule?e:{default:e}}var u="Page Body Interaction",c="Video Interaction",d="Form Interaction",f="Webchat Interaction",h="Links | Top Navigation",p="Links | Footer Navigation",v="Search",g="Generic",m="Common_topNavigation",y="Common_footerNavigation",b="PageBody";function T(e,t,r,n){return(0,s.reportTracking)(e,"error",t),function(a,i){return(0,s.trackEvent)({event:n,category:"Errors",action:e,label:((0,s.extractLabel)(t,i)||"Global")+":"+a,value:0},i,r)}}function E(e,t,r){return(0,s.reportTracking)("Form",e,t),function(a,o){return(0,s.trackEvent)((0,n.default)({event:"DataPush.Common_formSubmitStatus",category:d,formSubmitStatus:e,formName:(0,s.extractLabel)(t,o)||"Form"},(0,i.default)(a)?a:{}),o,r)}}function k(e,t,r){return(0,s.reportTracking)("Form","submit",e),function(n){var a=(0,s.extractLabel)(e,n);a&&(0,s.trackEvent)({event:"EventTrigger.FlightStatus_searchTypeFlightStatus",category:"Flight Status",label:a,value:0,action:t},n,r)}}function S(e,t,r,n,i){var o=!(arguments.length>5&&void 0!==arguments[5])||arguments[5],l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:"Clicked";return(0,s.reportTracking)(e,"click",t),function(u){var c=(0,s.extractLabel)(t,u);c&&(0,s.trackEvent)({event:"EventTrigger."+r+"_"+(o?(0,a.default)(e):e)+l,category:n,action:e+" Clicked",label:c,value:0},u,i)}}function _(e,t,r){return(0,s.reportTracking)("Country and Language Selector","choose",e),function(n){var a=(0,s.extractLabel)(e,n);a&&(0,s.trackEvent)({event:"EventTrigger.TopNavigation_chooseCountryCodeLanguageCode",category:"Top Navigation",action:t,label:a,value:0},n,r)}}},dWkPL:function(e,t){e.exports=function(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n},e.exports.default=e.exports,e.exports.__esModule=!0},dX2cd:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s={player:a.default.object,className:a.default.string};function l(e){var t=e.player,r=e.className;return t.error?null:i.default.createElement("div",{className:(0,o.default)("video-react-loading-spinner",r)})}l.propTypes=s,l.displayName="LoadingSpinner"},dZhPi:function(e,t,r){var n=r("dWkPL");e.exports=function(e,t){if(e){if("string"==typeof e)return n(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?n(e,t):void 0}},e.exports.default=e.exports,e.exports.__esModule=!0},dZx8M:function(e,t,r){},da1gu:function(e,t,r){var n=r("dcDf5").default,a=r("dPJYZ");e.exports=function(e,t){if(t&&("object"===n(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return a(e)},e.exports.default=e.exports,e.exports.__esModule=!0},daKe1:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,i,o=m(r("dQbLZ")),s=m(r("djo6Y")),l=m(r("diCc5")),u=m(r("dV7oC")),c=m(r("dFYw3")),d=m(r("dmRg0")),f=r("dcDcd"),h=m(f),p=m(r("dW/MQ")),v=r("dMqZe"),g=r("dGhfX");function m(e){return e&&e.__esModule?e:{default:e}}var y=(0,g.withBreakpoints)([g.withBreakpoints.BREAKPOINTS_NAMES.medium])(n=(0,v.safeRender)({componentName:"ImageResponsive"})((i=a=function(e){function t(){return(0,l.default)(this,t),(0,c.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,d.default)(t,e),(0,u.default)(t,[{key:"render",value:function(){var e=this.props,t=e.mobileImageUrl,r=e.mobileDefaultImageUrl,n=e.desktopImageUrl,a=e.desktopDefaultImageUrl,i=e.breakpoint,l=(0,s.default)(e,["mobileImageUrl","mobileDefaultImageUrl","desktopImageUrl","desktopDefaultImageUrl","breakpoint"]),u=i!==g.withBreakpoints.BREAKPOINTS_NAMES.medium;return h.default.createElement(p.default,(0,o.default)({},l,{imageUrl:u&&t?t:n,defaultImageUrl:u&&r?r:a}))}}]),t}(f.PureComponent),a.defaultProps={isLazyLoad:!1},n=i))||n)||n;t.default=y},daffn:function(e,t,r){},dbJ1j:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.safeRender=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.ErrorComponent,r=e.componentName,n=void 0===r?"Unspecified":r;return function(e){var r=e&&e.prototype?e.prototype.render:null;if((0,a.default)(r)){var s=(0,o.createSystemErrorTracker)(n+" component");return e.prototype.render=function(){try{for(var e=arguments.length,a=Array(e),o=0;o<e;o++)a[o]=arguments[o];return r.apply(this,a)}catch(e){if(u())throw e;return(0,i.logError)(e,n),s(e.message),c(t,e,n)}},e}if((0,a.default)(e)){var l=(0,o.createSystemErrorTracker)(n+" component"),d=function(){try{for(var r=arguments.length,a=Array(r),o=0;o<r;o++)a[o]=arguments[o];return e.apply(this,a)}catch(e){if(u())throw e;return(0,i.logError)(e,n),l(e.message),c(t,e,n)}};return Object.keys(e).forEach(function(t){return d[t]=e[t]}),Object.defineProperty(d,"name",{value:e.name}),d}return function(){return null}}},t.wrapWithTryCatch=function(e,t){var r=(0,o.createSystemErrorTracker)("Function "+e.name);return function(){try{return e.apply(void 0,arguments)}catch(n){if(u())throw n;return(0,i.logError)(n,e.name),r(n.message),t}}};var n=s(r("dcDcd")),a=s(r("dlSCD")),i=r("duJza"),o=r("d1rI7");function s(e){return e&&e.__esModule?e:{default:e}}var l=e||{};function u(){return!1===l.__SAFE_RENDER__}function c(e,t,r){return e?n.default.isValidElement(e)?e:e.prototype&&e.prototype.render?n.default.createElement(e):(0,a.default)(e)?e(t):null:n.default.createElement("div",{error:"true","aria-hidden":"true","component-name":r})}}).call(this,r("dyLpj"))},dc5dG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAbsoluteUrl=function(e){return new RegExp("^(?:[a-z]+:)?//","i").test(e)}},dcDcd:function(e,t){e.exports=React},dcTRj:function(e,t,r){(function(n){function a(){var e;try{e=t.storage.debug}catch(e){}return!e&&void 0!==n&&"env"in n&&(e=n.env.DEBUG),e}(t=e.exports=r("d4qA7")).log=function(){return"object"==typeof console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)},t.formatArgs=function(e){var r=this.useColors;if(e[0]=(r?"%c":"")+this.namespace+(r?" %c":" ")+e[0]+(r?"%c ":" ")+"+"+t.humanize(this.diff),r){var n="color: "+this.color;e.splice(1,0,n,"color: inherit");var a=0,i=0;e[0].replace(/%[a-zA-Z%]/g,function(e){"%%"!==e&&("%c"===e&&(i=++a))}),e.splice(i,0,n)}},t.save=function(e){try{null==e?t.storage.removeItem("debug"):t.storage.debug=e}catch(e){}},t.load=a,t.useColors=function(){return!(!window.process||"renderer"!==window.process.type)||"undefined"!=typeof document&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||window.console&&(window.console.firebug||window.console.exception&&window.console.table)||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||"undefined"!=typeof navigator&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)},t.storage="undefined"!=typeof chrome&&void 0!==chrome.storage?chrome.storage.local:function(){try{return window.localStorage}catch(e){}}(),t.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"],t.formatters.j=function(e){try{return JSON.stringify(e)}catch(e){return"[UnexpectedJSONParseError]: "+e.message}},t.enable(a())}).call(this,r("dKCCg"))},"dd+Od":function(e,t,r){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},dd204:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,i=E(r("dYEIV")),o=E(r("djo6Y")),s=E(r("dQbLZ")),l=E(r("diCc5")),u=E(r("dV7oC")),c=E(r("dFYw3")),d=E(r("dmRg0")),f=r("dcDcd"),h=E(f),p=E(r("dTSYQ")),v=(E(r("d17x9")),E(r("dlSCD"))),g=E(r("dPuqe")),m=E(r("dRPda")),y=E(r("de5f3")),b=(r("dBNTa"),r("dYBKM")),T=r("dT3X0");function E(e){return e&&e.__esModule?e:{default:e}}r("dFmol"),r("dvmJC");var k="call-to-action",S=(a=n=function(e){function t(){var e,r,n,a;(0,l.default)(this,t);for(var i=arguments.length,o=Array(i),s=0;s<i;s++)o[s]=arguments[s];return r=n=(0,c.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),n._id=(0,b.uniqueId)(k+"__"),n.renderChildren=function(e){var t=n.props,r=t.multiline,a=t.title,i=t.renderAdditionalButtonContent,o=t.multilineContentClassName,s=(0,v.default)(i)&&i();return r?h.default.createElement("div",{className:(0,p.default)(k+"__multiline-wrapper",o)},e||a,s):s?h.default.createElement(f.Fragment,null,e,s):e},a=r,(0,c.default)(n,a)}return(0,d.default)(t,e),(0,u.default)(t,[{key:"getHiddenSpan",value:function(e){return h.default.createElement("span",(0,s.default)({className:"hidden-control","aria-hidden":!0},e))}},{key:"getDescriptionId",value:function(){var e=this.props.id;return(void 0===e?this._id:e)+"__description"}},{key:"getButtonSpecificProps",value:function(){var e=this.props,t=e.innerRef,r=e.type,n=e.children;return{ref:t,useRefs:!!t,type:r,children:this.renderChildren(n)}}},{key:"getLinkSpecificProps",value:function(){var e=this.props,t=e.innerRef,r=e.customTag,n=e.href,a=e.target,i=e.title,o=e.transparent,s=e["data-id"],l=e["data-link"],u=e.children,c=e.multiline,d=e.externalPartner;return{innerRef:t,content:r?void 0:{externalLink:n,target:a,title:i,externalPartner:d},withHoverBg:!1,rel:"_blank"===a&&(0,T.isAbsoluteUrl)(n)?"noreferrer":void 0,underline:!!o,"data-id":s,"data-link":l,renderChildren:c?this.renderChildren:null,children:c?u:this.renderChildren(u)}}},{key:"render",value:function(){var e,t=this.props,r=t.tabIndex,n=t.ctaType,a=t.fitToContent,l=t.fixedWidth,u=t.transparent,c=t.size,d=t.disabled,v=t.ariaDisabled,b=t.onClick,T=t.onFocus,E=t.onBlur,S=t.extraClass,_=t.button,C=t.multiline,P=t.customTag,w=t.useCta,A=void 0===w||w,O=t["aria-expanded"],R=t["aria-label"],I=t["aria-labelledby"],D=t.role,L=t.children,x=t.description,M=t.submitFormMultiline,F=(0,o.default)(t,["tabIndex","ctaType","fitToContent","fixedWidth","transparent","size","disabled","ariaDisabled","onClick","onFocus","onBlur","extraClass","button","multiline","customTag","useCta","aria-expanded","aria-label","aria-labelledby","role","children","description","submitFormMultiline"]),N=(0,p.default)(S,(e={},(0,i.default)(e,k,A),(0,i.default)(e,k+"__"+n,Boolean(n)),(0,i.default)(e,k+"--fixed-width",l),(0,i.default)(e,k+"__transparent",u),(0,i.default)(e,k+"--multiline",C),(0,i.default)(e,k+"--"+c,Boolean(c)),(0,i.default)(e,k+"--disabled",v||d),(0,i.default)(e,k+"--fit-to-content",a),(0,i.default)(e,k+"--submit-multiline",M),e)),B=P||(_?m.default:y.default),j={"aria-expanded":O,"aria-label":R,"aria-disabled":v||d,"aria-labelledby":I,disabled:d,role:D,onClick:b,onFocus:T,onBlur:E,tabIndex:r,className:N,children:L},U=_?this.getButtonSpecificProps():this.getLinkSpecificProps(),V=!1;if(x){var G=this.getDescriptionId();j["aria-describedby"]=G,V=this.getHiddenSpan({children:x,id:G})}return h.default.createElement(f.Fragment,null,h.default.createElement(B,(0,s.default)({},(0,g.default)(F,["renderAdditionalButtonContent","multilineContentClassName","innerRef","href","type","target","title"]),j,U)),V)}}]),t}(f.PureComponent),n.defaultProps={type:"button"},a);t.default=S},ddsKO:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=d(r("diCc5")),a=d(r("dV7oC")),i=d(r("dFYw3")),o=d(r("dmRg0")),s=r("dcDcd"),l=d(s),u=d(r("dTSYQ")),c=(d(r("d17x9")),d(r("dJ2iB")));function d(e){return e&&e.__esModule?e:{default:e}}r("dgfOf");var f=function(e){function t(){return(0,n.default)(this,t),(0,i.default)(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return(0,o.default)(t,e),(0,a.default)(t,[{key:"render",value:function(){var e=this.props,t=e.htmlText,r=e.className,n=e.children;return(0,c.default)(t)||(0,c.default)(n)||console.warn("[RichText] You should send htmlText props or children props not both in some time!"),(0,c.default)(t)?l.default.createElement("div",{className:(0,u.default)("rich-text",r)},n):l.default.createElement("div",{className:(0,u.default)("rich-text",r),dangerouslySetInnerHTML:t&&{__html:t&&t.replace(/(<a[^>]*target="_blank"[^>]*>.*?)<\/a>/g,'$1<span dir="auto" class="link__external pictogram-wrapper" aria-hidden="true">&#xfeff;<i class="icon icon-external-link"></i></span></a>')}})}}]),t}(s.PureComponent);t.default=f},de5f3:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,i,o=L(r("dYEIV")),s=L(r("djo6Y")),l=L(r("dQbLZ")),u=L(r("dsk9p")),c=L(r("diCc5")),d=L(r("dV7oC")),f=L(r("dFYw3")),h=L(r("dmRg0")),p=L(r("dTSYQ")),v=L(r("dJ2iB")),g=L(r("dzZ0H")),m=L(r("dvN+2")),y=L(r("dPuqe")),b=L(r("dmwIZ")),T=L(r("dD0BC")),E=(L(r("d17x9")),r("dcDcd")),k=L(E),S=r("dbJ1j"),_=r("d2GSb"),C=r("dEvct"),P=r("dc5dG"),w=r("dxmFE"),A=(r("dBNTa"),r("dtHUb")),O=r("dYBKM"),R=L(r("dRPda")),I=L(r("dNucv")),D=L(r("dH38v"));function L(e){return e&&e.__esModule?e:{default:e}}r("dN0m3");var x="Opens an external link in a new tab",M=(0,S.safeRender)({componentName:"Link"})((i=a=function(e){function t(e){(0,c.default)(this,t);var r=(0,f.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.getOpensInNewTabDefaultText=function(e){var t=r.props.isAddTitleToExternalAccessibilityResource;return e?t?e+" "+x:e:x},r.getFinalId=function(e){var t=r.props["aria-labelledby"];return e&&t?t+" "+r.id:e?r.id:t},r.handleHrefClick=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=r.props,n=t.onClick,a=t.linkClickDelay,i=t.content,o=t.content.externalLink,s=void 0===o?"":o,c=e.currentTarget;if(n(e),-1!==s.indexOf("#")){var d=s.split("#"),f=(0,u.default)(d,2),h=f[0],p=f[1];h&&-1===window.location.href.indexOf(h)||(e.preventDefault(),setTimeout(function(){var e=window.location.href.split("#"),t=(0,u.default)(e,1)[0];window.history.pushState(null,null,t),window.location.replace(t+"#"+p),(0,C.focusAndScroll)(p)},a))}else a&&s&&(e.preventDefault(),setTimeout(function(){i.externalPartner?(0,w.mimicLinkClick)((0,l.default)({},i,{externalLink:(0,A.getFormattedPartnerLink)(i)}),e):(0,w.mimicLinkClick)(i,e)},a));_.trackLinkClicked&&"function"==typeof _.trackLinkClicked&&(0,_.trackLinkClicked)(c)},r.parseWebViewAnalytics=function(e){var t=r.state.externalLink,n=e.detail;if(n){var a=t.split("?");t=a[0]+"?"+(a.length>1?""+a[1]+n:n),r.setState({externalLink:t})}},r.id=(0,O.uniqueId)("hidden_text_"),r.state={externalLink:(0,b.default)(e,"content.externalLink")},r}return(0,h.default)(t,e),(0,d.default)(t,[{key:"componentDidMount",value:function(){var e=this;window.addEventListener("isWebView",this.parseWebViewAnalytics);var t=this.props.content;t&&t.externalPartner&&window.addEventListener("load",function(){setTimeout(function(){return e.forceUpdate()},200)})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("isWebView",this.parseWebViewAnalytics)}},{key:"getNote",value:function(){var e=this.props,t=e.note,r=e.content,n=r.target,a=r.title,i=e.opensInNewTabText;return t||"_blank"!==n?t:i||this.getOpensInNewTabDefaultText(a)}},{key:"render",value:function(){var e,t=(0,y.default)(this.props,["linkClickDelay","opensInNewTabText"]),r=t.className,n=t.content,a=t.children,i=t.arrowed,u=t.mobileBordered,c=t.customIcon,d=t["aria-labelledby"],f=t.underline,h=t.squareLink,m=t.isFake,b=t.dotted,S=t.innerRef,_=t.withHoverBg,C=t.withIcon,w=t.tag,O=t.renderChildren,L=t.renderSpan,x=t.removeIconTag,M=t.prependIcon,F=(0,s.default)(t,["className","content","children","arrowed","mobileBordered","customIcon","aria-labelledby","underline","squareLink","isFake","dotted","innerRef","withHoverBg","withIcon","tag","renderChildren","renderSpan","removeIconTag","prependIcon"]),N=F.allyId;if((0,v.default)(n))return null;var B=n.target,j=n.title,U=n.externalPartner,V=this.getNote(),G=this.getFinalId(V),H=("function"==typeof O?O:g.default)(k.default.createElement(E.Fragment,null,M&&i&&k.default.createElement(D.default,{isNonBreaking:!0,appendSpace:!0},k.default.createElement(I.default,{icon:c||"icon-chevron-left",className:(0,p.default)("link__chevron"),iconClassName:(0,p.default)("link__chevron-icon"),removeIconTag:x})),a||(L?k.default.createElement("span",{className:(0,p.default)("link__text",f&&"link__text--underline"),id:N},j):j),"_blank"===B&&(!a||C)&&k.default.createElement(I.default,{icon:"icon-external-link",className:(0,p.default)("link__external"),removeIconTag:x}),b&&k.default.createElement(D.default,null,k.default.createElement("span",{className:(0,p.default)("link__dotted")},"")),!M&&i&&k.default.createElement(D.default,{isNonBreaking:!0},k.default.createElement(I.default,{icon:c||"icon-chevron-right",className:(0,p.default)("link__chevron"),iconClassName:(0,p.default)("link__chevron-icon"),removeIconTag:x})),V&&!m&&k.default.createElement("span",{id:this.id,className:(0,p.default)("hidden-control")},V))),K=(0,l.default)({},(0,y.default)(F,["resources","isAddTitleToExternalAccessibilityResource","renderSpan","spanPropertyName"]),{ref:S}),W=this.state.externalLink;W&&!/[#.?:]/.test(W)&&(W=W.replace(/[/]*$/,"/"));var Y=m?k.default.createElement(R.default,(0,l.default)({},K,{title:j,useRefs:!!S,tag:w,className:(0,p.default)("link--fake",(0,o.default)({},"link--default",!a),r),"aria-labelledby":d}),H):k.default.createElement(R.default,(0,l.default)({},K,{useRefs:!!S,tag:"a",className:(0,p.default)("link",(e={},(0,o.default)(e,"link--with-hover-bg",_),(0,o.default)(e,"link--mobile-bordered",u),(0,o.default)(e,"link--default",!a),(0,o.default)(e,"link--underline",f&&!i),e),r),href:U?(0,A.getFormattedPartnerLink)(n):W,key:U?""+(0,T.default)(1e5,999999):void 0,target:B,rel:"_blank"===B&&(0,P.isAbsoluteUrl)(W)?"noreferrer":void 0,onClick:this.handleHrefClick,"aria-labelledby":G}),H);return h?k.default.createElement(E.Fragment,null,"[",Y,"]"):Y}}],[{key:"getDerivedStateFromProps",value:function(e,t){var r=(0,b.default)(e,"content.externalLink");return r!==t.externalLink?{externalLink:r}:null}}]),t}(E.Component),a.defaultProps={underline:!0,onClick:m.default,withHoverBg:!0,tag:"span",linkClickDelay:0,withIcon:!0,renderSpan:!0,removeIconTag:!0,isAddTitleToExternalAccessibilityResource:!0,prependIcon:!1},n=i))||n;t.default=M},del96:function(e,t,r){"use strict";r.r(t),r.d(t,"__DO_NOT_USE__ActionTypes",function(){return u}),r.d(t,"applyMiddleware",function(){return v}),r.d(t,"bindActionCreators",function(){return h}),r.d(t,"combineReducers",function(){return d}),r.d(t,"compose",function(){return p}),r.d(t,"createStore",function(){return c});var n=r("drePB");function a(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?a(Object(r),!0).forEach(function(t){Object(n.a)(e,t,r[t])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function o(e){return"Minified Redux error #"+e+"; visit https://redux.js.org/Errors?code="+e+" for the full message or use the non-minified dev environment for full errors. "}var s="function"==typeof Symbol&&Symbol.observable||"@@observable",l=function(){return Math.random().toString(36).substring(7).split("").join(".")},u={INIT:"@@redux/INIT"+l(),REPLACE:"@@redux/REPLACE"+l(),PROBE_UNKNOWN_ACTION:function(){return"@@redux/PROBE_UNKNOWN_ACTION"+l()}};function c(e,t,r){var n;if("function"==typeof t&&"function"==typeof r||"function"==typeof r&&"function"==typeof arguments[3])throw new Error(o(0));if("function"==typeof t&&void 0===r&&(r=t,t=void 0),void 0!==r){if("function"!=typeof r)throw new Error(o(1));return r(c)(e,t)}if("function"!=typeof e)throw new Error(o(2));var a=e,i=t,l=[],d=l,f=!1;function h(){d===l&&(d=l.slice())}function p(){if(f)throw new Error(o(3));return i}function v(e){if("function"!=typeof e)throw new Error(o(4));if(f)throw new Error(o(5));var t=!0;return h(),d.push(e),function(){if(t){if(f)throw new Error(o(6));t=!1,h();var r=d.indexOf(e);d.splice(r,1),l=null}}}function g(e){if(!function(e){if("object"!=typeof e||null===e)return!1;for(var t=e;null!==Object.getPrototypeOf(t);)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t}(e))throw new Error(o(7));if(void 0===e.type)throw new Error(o(8));if(f)throw new Error(o(9));try{f=!0,i=a(i,e)}finally{f=!1}for(var t=l=d,r=0;r<t.length;r++)(0,t[r])();return e}return g({type:u.INIT}),(n={dispatch:g,subscribe:v,getState:p,replaceReducer:function(e){if("function"!=typeof e)throw new Error(o(10));a=e,g({type:u.REPLACE})}})[s]=function(){var e,t=v;return(e={subscribe:function(e){if("object"!=typeof e||null===e)throw new Error(o(11));function r(){e.next&&e.next(p())}return r(),{unsubscribe:t(r)}}})[s]=function(){return this},e},n}function d(e){for(var t=Object.keys(e),r={},n=0;n<t.length;n++){var a=t[n];"function"==typeof e[a]&&(r[a]=e[a])}var i,s=Object.keys(r);try{!function(e){Object.keys(e).forEach(function(t){var r=e[t];if(void 0===r(void 0,{type:u.INIT}))throw new Error(o(12));if(void 0===r(void 0,{type:u.PROBE_UNKNOWN_ACTION()}))throw new Error(o(13))})}(r)}catch(e){i=e}return function(e,t){if(void 0===e&&(e={}),i)throw i;for(var n=!1,a={},l=0;l<s.length;l++){var u=s[l],c=r[u],d=e[u],f=c(d,t);if(void 0===f)throw t&&t.type,new Error(o(14));a[u]=f,n=n||f!==d}return(n=n||s.length!==Object.keys(e).length)?a:e}}function f(e,t){return function(){return t(e.apply(this,arguments))}}function h(e,t){if("function"==typeof e)return f(e,t);if("object"!=typeof e||null===e)throw new Error(o(16));var r={};for(var n in e){var a=e[n];"function"==typeof a&&(r[n]=f(a,t))}return r}function p(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return 0===t.length?function(e){return e}:1===t.length?t[0]:t.reduce(function(e,t){return function(){return e(t.apply(void 0,arguments))}})}function v(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(e){return function(){var r=e.apply(void 0,arguments),n=function(){throw new Error(o(15))},a={getState:r.getState,dispatch:function(){return n.apply(void 0,arguments)}},s=t.map(function(e){return e(a)});return n=p.apply(void 0,s)(r.dispatch),i(i({},r),{},{dispatch:n})}}}},dfWmG:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=window.process.env.MEDIA_URL||"";t.getFullAssetsUrl=function(e,t){return null!=e?""+n+e+(t?"?h="+t:""):e}},dfaye:function(e,t){e.exports=ReactDOM},dfhzZ:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n,a,i,o=k(r("diCc5")),s=k(r("dV7oC")),l=k(r("dFYw3")),u=k(r("dmRg0")),c=r("dcDcd"),d=k(c),f=(k(r("d17x9")),k(r("dTSYQ"))),h=k(r("dLx3f")),p=k(r("dvN+2")),v=k(r("dmwIZ")),g=r("d1rI7"),m=r("dbJ1j"),y=r("dYBKM"),b=k(r("dd204")),T=k(r("dy/ur")),E=(r("dBNTa"),k(r("dNucv")));function k(e){return e&&e.__esModule?e:{default:e}}r("d7liZ");var S="portal-dropdown",_=(0,m.safeRender)({componentName:"PortalDropDown"})((i=a=function(e){function t(e){(0,o.default)(this,t);var r=(0,l.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.state={hidden:!0},r.handleToggle=function(){r.setState(function(e){return{hidden:!e.hidden}}),r.props.isTrackCtaClick&&r.trackCtaClick()},r.handleFocus=function(e){r.props.content.onFocus&&(r.handleToggle(),r.props.content.onFocus(e))},r.trackCtaClick=(0,g.createBodyCtaClickTracker)(function(){return(0,g.blendAnalytics)(r.props.analytics,"Change Search")}),r.id=(0,y.uniqueId)("portal-dropdown_"),r}return(0,u.default)(t,e),(0,s.default)(t,[{key:"render",value:function(){var e=this.props,t=e.className,r=e.content,n=r.innerRef,a=r.onClick,i=r.compLink,o=r.title,s=r.isOpen,l=r.onKeyDown,u=r.onBlur,p=r.ariaLabel,g=this.state.hidden,m=(0,v.default)(i,"content.identifier"),y=n?s:g;return d.default.createElement(c.Fragment,null,d.default.createElement("div",{className:(0,f.default)(t,S)},d.default.createElement(b.default,{role:"combobox","aria-expanded":!y,extraClass:(0,f.default)(S+"__button"),transparent:!0,size:"middle",button:!0,innerRef:n,onClick:(0,h.default)(this.handleToggle,a),onFocus:this.handleFocus,onKeyDown:l,onBlur:u,"aria-label":p,"aria-describedby":this.id+"__caption"},d.default.createElement("span",{id:this.id+"__caption"},o),d.default.createElement(E.default,{icon:"icon-chevron-"+(y?"down":"up"),className:(0,f.default)(S+"__icon")}))),m&&d.default.createElement(T.default,{extraClass:(0,f.default)(S+"__dropdown"),hidden:g,contentId:m}))}}]),t}(c.PureComponent),a.defaultProps={content:{innerRef:p.default},isTrackCtaClick:!0},n=i))||n;t.default=_},dgfOf:function(e,t,r){},dhMnm:function(e,t,r){"use strict";(function(e){var r=void 0!==e&&"[object global]"==={}.toString.call(e);function n(e,t){return 0===e.indexOf(t.toLowerCase())?e:"".concat(t.toLowerCase()).concat(e.substr(0,1).toUpperCase()).concat(e.substr(1))}function a(e){return/^(https?:)?\/\/((player|www)\.)?vimeo\.com(?=$|\/)/.test(e)}function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},r=t.id,n=t.url,i=r||n;if(!i)throw new Error("An id or url must be passed, either in an options object or as a data-vimeo-id or data-vimeo-url attribute.");if(e=i,!isNaN(parseFloat(e))&&isFinite(e)&&Math.floor(e)==e)return"https://vimeo.com/".concat(i);if(a(i))return i.replace("http:","https:");if(r)throw new TypeError("".concat(r," is not a valid video id."));throw new TypeError("".concat(i," is not a vimeo.com url."))}var o=void 0!==Array.prototype.indexOf,s="undefined"!=typeof window&&void 0!==window.postMessage;if(!(r||o&&s))throw new Error("Sorry, the Vimeo Player API is not available in this browser.");var l="undefined"!=typeof window?window:void 0!==e?e:"undefined"!=typeof self?self:{};!function(e){if(!e.WeakMap){var t=Object.prototype.hasOwnProperty,r=function(e,t,r){Object.defineProperty?Object.defineProperty(e,t,{configurable:!0,writable:!0,value:r}):e[t]=r};e.WeakMap=function(){function e(){if(void 0===this)throw new TypeError("Constructor WeakMap requires 'new'");if(r(this,"_id","_WeakMap_"+i()+"."+i()),arguments.length>0)throw new TypeError("WeakMap iterable is not supported")}function a(e,r){if(!n(e)||!t.call(e,"_id"))throw new TypeError(r+" method called on incompatible receiver "+typeof e)}function i(){return Math.random().toString().substring(2)}return r(e.prototype,"delete",function(e){if(a(this,"delete"),!n(e))return!1;var t=e[this._id];return!(!t||t[0]!==e||(delete e[this._id],0))}),r(e.prototype,"get",function(e){if(a(this,"get"),n(e)){var t=e[this._id];return t&&t[0]===e?t[1]:void 0}}),r(e.prototype,"has",function(e){if(a(this,"has"),!n(e))return!1;var t=e[this._id];return!(!t||t[0]!==e)}),r(e.prototype,"set",function(e,t){if(a(this,"set"),!n(e))throw new TypeError("Invalid value used as weak map key");var i=e[this._id];return i&&i[0]===e?(i[1]=t,this):(r(e,this._id,[e,t]),this)}),r(e,"_polyfill",!0),e}()}function n(e){return Object(e)===e}}("undefined"!=typeof self?self:"undefined"!=typeof window?window:l);var u=function(e,t){return function(e){var t,r,n;n=function(){var e,t,r,n=Object.prototype.toString,a="undefined"!=typeof setImmediate?function(e){return setImmediate(e)}:setTimeout;try{Object.defineProperty({},"x",{}),e=function(e,t,r,n){return Object.defineProperty(e,t,{value:r,writable:!0,configurable:!1!==n})}}catch(t){e=function(e,t,r){return e[t]=r,e}}function i(e,n){r.add(e,n),t||(t=a(r.drain))}function o(e){var t,r=typeof e;return null==e||"object"!=r&&"function"!=r||(t=e.then),"function"==typeof t&&t}function s(){for(var e=0;e<this.chain.length;e++)l(this,1===this.state?this.chain[e].success:this.chain[e].failure,this.chain[e]);this.chain.length=0}function l(e,t,r){var n,a;try{!1===t?r.reject(e.msg):(n=!0===t?e.msg:t.call(void 0,e.msg))===r.promise?r.reject(TypeError("Promise-chain cycle")):(a=o(n))?a.call(n,r.resolve,r.reject):r.resolve(n)}catch(e){r.reject(e)}}function u(e){var t=this;t.triggered||(t.triggered=!0,t.def&&(t=t.def),t.msg=e,t.state=2,t.chain.length>0&&i(s,t))}function c(e,t,r,n){for(var a=0;a<t.length;a++)!function(a){e.resolve(t[a]).then(function(e){r(a,e)},n)}(a)}function d(e){this.def=e,this.triggered=!1}function f(e){if("function"!=typeof e)throw TypeError("Not a function");if(0!==this.__NPO__)throw TypeError("Not a promise");this.__NPO__=1;var t=new function(e){this.promise=e,this.state=0,this.triggered=!1,this.chain=[],this.msg=void 0}(this);this.then=function(e,r){var n={success:"function"!=typeof e||e,failure:"function"==typeof r&&r};return n.promise=new this.constructor(function(e,t){if("function"!=typeof e||"function"!=typeof t)throw TypeError("Not a function");n.resolve=e,n.reject=t}),t.chain.push(n),0!==t.state&&i(s,t),n.promise},this.catch=function(e){return this.then(void 0,e)};try{e.call(void 0,function(e){(function e(t){var r,n=this;if(!n.triggered){n.triggered=!0,n.def&&(n=n.def);try{(r=o(t))?i(function(){var a=new d(n);try{r.call(t,function(){e.apply(a,arguments)},function(){u.apply(a,arguments)})}catch(e){u.call(a,e)}}):(n.msg=t,n.state=1,n.chain.length>0&&i(s,n))}catch(t){u.call(new d(n),t)}}}).call(t,e)},function(e){u.call(t,e)})}catch(e){u.call(t,e)}}r=function(){var e,r,n;return{add:function(t,a){n=new function(e,t){this.fn=e,this.self=t,this.next=void 0}(t,a),r?r.next=n:e=n,r=n,n=void 0},drain:function(){var n=e;for(e=r=t=void 0;n;)n.fn.call(n.self),n=n.next}}}();var h=e({},"constructor",f,!1);return f.prototype=h,e(h,"__NPO__",0,!1),e(f,"resolve",function(e){return e&&"object"==typeof e&&1===e.__NPO__?e:new this(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");t(e)})}),e(f,"reject",function(e){return new this(function(t,r){if("function"!=typeof t||"function"!=typeof r)throw TypeError("Not a function");r(e)})}),e(f,"all",function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):0===e.length?t.resolve([]):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");var a=e.length,i=Array(a),o=0;c(t,e,function(e,t){i[e]=t,++o===a&&r(i)},n)})}),e(f,"race",function(e){var t=this;return"[object Array]"!=n.call(e)?t.reject(TypeError("Not an array")):new t(function(r,n){if("function"!=typeof r||"function"!=typeof n)throw TypeError("Not a function");c(t,e,function(e,t){r(t)},n)})}),f},(r=l)[t="Promise"]=r[t]||n(),e.exports&&(e.exports=r[t])}(t={exports:{}}),t.exports}(),c=new WeakMap;function d(e,t,r){var n=c.get(e.element)||{};t in n||(n[t]=[]),n[t].push(r),c.set(e.element,n)}function f(e,t){return(c.get(e.element)||{})[t]||[]}function h(e,t,r){var n=c.get(e.element)||{};if(!n[t])return!0;if(!r)return n[t]=[],c.set(e.element,n),!0;var a=n[t].indexOf(r);return-1!==a&&n[t].splice(a,1),c.set(e.element,n),n[t]&&0===n[t].length}var p=["autopause","autoplay","background","byline","color","controls","dnt","height","id","loop","maxheight","maxwidth","muted","playsinline","portrait","responsive","speed","texttrack","title","transparent","url","width"];function v(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return p.reduce(function(t,r){var n=e.getAttribute("data-vimeo-".concat(r));return(n||""===n)&&(t[r]=""===n?1:n),t},t)}function g(e,t){var r=e.html;if(!t)throw new TypeError("An element must be provided");if(null!==t.getAttribute("data-vimeo-initialized"))return t.querySelector("iframe");var n=document.createElement("div");return n.innerHTML=r,t.appendChild(n.firstChild),t.setAttribute("data-vimeo-initialized","true"),t.querySelector("iframe")}function m(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2?arguments[2]:void 0;return new Promise(function(n,i){if(!a(e))throw new TypeError("".concat(e," is not a vimeo.com url."));var o="https://vimeo.com/api/oembed.json?url=".concat(encodeURIComponent(e));for(var s in t)t.hasOwnProperty(s)&&(o+="&".concat(s,"=").concat(encodeURIComponent(t[s])));var l="XDomainRequest"in window?new XDomainRequest:new XMLHttpRequest;l.open("GET",o,!0),l.onload=function(){if(404!==l.status)if(403!==l.status)try{var t=JSON.parse(l.responseText);if(403===t.domain_status_code)return g(t,r),void i(new Error("".concat(e," is not embeddable.")));n(t)}catch(e){i(e)}else i(new Error("".concat(e," is not embeddable.")));else i(new Error("".concat(e," was not found.")))},l.onerror=function(){var e=l.status?" (".concat(l.status,")"):"";i(new Error("There was an error fetching the embed code from Vimeo".concat(e,".")))},l.send()})}function y(e){if("string"==typeof e)try{e=JSON.parse(e)}catch(e){return console.warn(e),{}}return e}function b(e,t,r){if(e.element.contentWindow&&e.element.contentWindow.postMessage){var n={method:t};void 0!==r&&(n.value=r);var a=parseFloat(navigator.userAgent.toLowerCase().replace(/^.*msie (\d+).*$/,"$1"));a>=8&&a<10&&(n=JSON.stringify(n)),e.element.contentWindow.postMessage(n,e.origin)}}var T=new WeakMap,E=new WeakMap,k=function(){function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(function(t,r){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this),window.jQuery&&t instanceof jQuery&&(t.length>1&&window.console&&console.warn&&console.warn("A jQuery object with multiple elements was passed, using the first element."),t=t[0]),"undefined"!=typeof document&&"string"==typeof t&&(t=document.getElementById(t)),!function(e){return Boolean(e&&1===e.nodeType&&"nodeName"in e&&e.ownerDocument&&e.ownerDocument.defaultView)}(t))throw new TypeError("You must pass either a valid element or a valid id.");var o=t.ownerDocument.defaultView;if("IFRAME"!==t.nodeName){var s=t.querySelector("iframe");s&&(t=s)}if("IFRAME"===t.nodeName&&!a(t.getAttribute("src")||""))throw new Error("The player element passed isnt a Vimeo embed.");if(T.has(t))return T.get(t);this.element=t,this.origin="*";var l=new u(function(e,s){var l=function(t){if(a(t.origin)&&r.element.contentWindow===t.source){"*"===r.origin&&(r.origin=t.origin);var n=y(t.data);if(n&&"error"===n.event&&n.data&&"ready"===n.data.method){var i=new Error(n.data.message);return i.name=n.data.name,void s(i)}var o=n&&"ready"===n.event,l=n&&"ping"===n.method;if(o||l)return r.element.setAttribute("data-ready","true"),void e();!function(e,t){var r,n=[];if((t=y(t)).event)"error"===t.event&&f(e,t.data.method).forEach(function(r){var n=new Error(t.data.message);n.name=t.data.name,r.reject(n),h(e,t.data.method,r)}),n=f(e,"event:".concat(t.event)),r=t.data;else if(t.method){var a=function(e,t){var r=f(e,t);if(r.length<1)return!1;var n=r.shift();return h(e,t,n),n}(e,t.method);a&&(n.push(a),r=t.value)}n.forEach(function(t){try{if("function"==typeof t)return void t.call(e,r);t.resolve(r)}catch(e){}})}(r,n)}};if(o.addEventListener?o.addEventListener("message",l,!1):o.attachEvent&&o.attachEvent("onmessage",l),"IFRAME"!==r.element.nodeName){var u=v(t,n);m(i(u),u,t).then(function(e){var n=g(e,t);return r.element=n,r._originalElement=t,function(e,t){var r=c.get(e);c.set(t,r),c.delete(e)}(t,n),T.set(r.element,r),e}).catch(s)}});return E.set(this,l),T.set(this.element,this),"IFRAME"===this.element.nodeName&&b(this,"ping"),this}var t;return(t=[{key:"callMethod",value:function(e){var t=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new u(function(n,a){return t.ready().then(function(){d(t,e,{resolve:n,reject:a}),b(t,e,r)}).catch(a)})}},{key:"get",value:function(e){var t=this;return new u(function(r,a){return e=n(e,"get"),t.ready().then(function(){d(t,e,{resolve:r,reject:a}),b(t,e)}).catch(a)})}},{key:"set",value:function(e,t){var r=this;return new u(function(a,i){if(e=n(e,"set"),null==t)throw new TypeError("There must be a value to set.");return r.ready().then(function(){d(r,e,{resolve:a,reject:i}),b(r,e,t)}).catch(i)})}},{key:"on",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(!t)throw new TypeError("You must pass a callback function.");if("function"!=typeof t)throw new TypeError("The callback must be a function.");0===f(this,"event:".concat(e)).length&&this.callMethod("addEventListener",e).catch(function(){}),d(this,"event:".concat(e),t)}},{key:"off",value:function(e,t){if(!e)throw new TypeError("You must pass an event name.");if(t&&"function"!=typeof t)throw new TypeError("The callback must be a function.");h(this,"event:".concat(e),t)&&this.callMethod("removeEventListener",e).catch(function(e){})}},{key:"loadVideo",value:function(e){return this.callMethod("loadVideo",e)}},{key:"ready",value:function(){var e=E.get(this)||new u(function(e,t){t(new Error("Unknown player. Probably unloaded."))});return u.resolve(e)}},{key:"addCuePoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.callMethod("addCuePoint",{time:e,data:t})}},{key:"removeCuePoint",value:function(e){return this.callMethod("removeCuePoint",e)}},{key:"enableTextTrack",value:function(e,t){if(!e)throw new TypeError("You must pass a language.");return this.callMethod("enableTextTrack",{language:e,kind:t})}},{key:"disableTextTrack",value:function(){return this.callMethod("disableTextTrack")}},{key:"pause",value:function(){return this.callMethod("pause")}},{key:"play",value:function(){return this.callMethod("play")}},{key:"unload",value:function(){return this.callMethod("unload")}},{key:"destroy",value:function(){var e=this;return new u(function(t){E.delete(e),T.delete(e.element),e._originalElement&&(T.delete(e._originalElement),e._originalElement.removeAttribute("data-vimeo-initialized")),e.element&&"IFRAME"===e.element.nodeName&&e.element.parentNode&&e.element.parentNode.removeChild(e.element),t()})}},{key:"getAutopause",value:function(){return this.get("autopause")}},{key:"setAutopause",value:function(e){return this.set("autopause",e)}},{key:"getBuffered",value:function(){return this.get("buffered")}},{key:"getColor",value:function(){return this.get("color")}},{key:"setColor",value:function(e){return this.set("color",e)}},{key:"getCuePoints",value:function(){return this.get("cuePoints")}},{key:"getCurrentTime",value:function(){return this.get("currentTime")}},{key:"setCurrentTime",value:function(e){return this.set("currentTime",e)}},{key:"getDuration",value:function(){return this.get("duration")}},{key:"getEnded",value:function(){return this.get("ended")}},{key:"getLoop",value:function(){return this.get("loop")}},{key:"setLoop",value:function(e){return this.set("loop",e)}},{key:"setMuted",value:function(e){return this.set("muted",e)}},{key:"getMuted",value:function(){return this.get("muted")}},{key:"getPaused",value:function(){return this.get("paused")}},{key:"getPlaybackRate",value:function(){return this.get("playbackRate")}},{key:"setPlaybackRate",value:function(e){return this.set("playbackRate",e)}},{key:"getPlayed",value:function(){return this.get("played")}},{key:"getSeekable",value:function(){return this.get("seekable")}},{key:"getSeeking",value:function(){return this.get("seeking")}},{key:"getTextTracks",value:function(){return this.get("textTracks")}},{key:"getVideoEmbedCode",value:function(){return this.get("videoEmbedCode")}},{key:"getVideoId",value:function(){return this.get("videoId")}},{key:"getVideoTitle",value:function(){return this.get("videoTitle")}},{key:"getVideoWidth",value:function(){return this.get("videoWidth")}},{key:"getVideoHeight",value:function(){return this.get("videoHeight")}},{key:"getVideoUrl",value:function(){return this.get("videoUrl")}},{key:"getVolume",value:function(){return this.get("volume")}},{key:"setVolume",value:function(e){return this.set("volume",e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();r||(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document,t=function(e){"console"in window&&console.error&&console.error("There was an error creating an embed: ".concat(e))};[].slice.call(e.querySelectorAll("[data-vimeo-id], [data-vimeo-url]")).forEach(function(e){try{if(null!==e.getAttribute("data-vimeo-defer"))return;var r=v(e);m(i(r),r,e).then(function(t){return g(t,e)}).catch(t)}catch(e){t(e)}})}(),function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:document;if(!window.VimeoPlayerResizeEmbeds_){window.VimeoPlayerResizeEmbeds_=!0;var t=function(t){if(a(t.origin)&&t.data&&"spacechange"===t.data.event)for(var r=e.querySelectorAll("iframe"),n=0;n<r.length;n++)if(r[n].contentWindow===t.source){r[n].parentElement.style.paddingBottom="".concat(t.data.data[0].bottom,"px");break}};window.addEventListener?window.addEventListener("message",t,!1):window.attachEvent&&window.attachEvent("onmessage",t)}}()),t.a=k}).call(this,r("dyLpj"))},di5LR:function(e,t,r){},diAfH:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dMVZn")),o=a(r("dlwsE")),s=a(r("dW8MJ")),l=r("del96"),u=a(r("dulZL")),c=n(r("dwe7k")),d=n(r("dINgg")),f=function(){function e(t){(0,o.default)(this,e),this.store=t||(0,l.createStore)(u.default),this.video=null,this.rootElement=null}return(0,s.default)(e,[{key:"getActions",value:function(){var e=this,t=this.store.dispatch,r=(0,i.default)({},c,d);return Object.keys(r).filter(function(e){return"function"==typeof r[e]}).reduce(function(n,a){var i;return n[a]=(i=r[a],function(){var r=i.apply(e,arguments);void 0!==r&&t(r)}),n},{})}},{key:"getState",value:function(){return this.store.getState()}},{key:"subscribeToStateChange",value:function(e,t){t||(t=this.getState.bind(this));var r=t();return this.store.subscribe(function(){var n=t();if(n!==r){var a=r;r=n,e(n,a)}})}},{key:"subscribeToOperationStateChange",value:function(e){var t=this;return this.subscribeToStateChange(e,function(){return t.getState().operation})}},{key:"subscribeToPlayerStateChange",value:function(e){var t=this;return this.subscribeToStateChange(e,function(){return t.getState().player})}}]),e}();t.default=f},djSMv:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s={percentage:a.default.string,vertical:a.default.bool,className:a.default.string};function l(e){var t=e.percentage,r=e.vertical,n=e.className,a={};return r?a.height=t:a.width=t,i.default.createElement("div",{className:(0,o.default)(n,"video-react-volume-level"),style:a},i.default.createElement("span",{className:"video-react-control-text"}))}l.propTypes=s,l.defaultProps={percentage:"100%",vertical:!1},l.displayName="VolumeLevel";var u=l;t.default=u},dkXlQ:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p=n(r("dEVUy")),v={className:d.default.string,onMouseDown:d.default.func,onMouseMove:d.default.func,stepForward:d.default.func,stepBack:d.default.func,sliderActive:d.default.func,sliderInactive:d.default.func,onMouseUp:d.default.func,onFocus:d.default.func,onBlur:d.default.func,onClick:d.default.func,getPercent:d.default.func,vertical:d.default.bool,children:d.default.node,label:d.default.string,valuenow:d.default.string,valuetext:d.default.string},g=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleMouseDown=n.handleMouseDown.bind((0,u.default)(n)),n.handleMouseMove=n.handleMouseMove.bind((0,u.default)(n)),n.handleMouseUp=n.handleMouseUp.bind((0,u.default)(n)),n.handleFocus=n.handleFocus.bind((0,u.default)(n)),n.handleBlur=n.handleBlur.bind((0,u.default)(n)),n.handleClick=n.handleClick.bind((0,u.default)(n)),n.handleKeyPress=n.handleKeyPress.bind((0,u.default)(n)),n.stepForward=n.stepForward.bind((0,u.default)(n)),n.stepBack=n.stepBack.bind((0,u.default)(n)),n.calculateDistance=n.calculateDistance.bind((0,u.default)(n)),n.getProgress=n.getProgress.bind((0,u.default)(n)),n.renderChildren=n.renderChildren.bind((0,u.default)(n)),n.state={active:!1},n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentWillUnmount",value:function(){document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUp,!0),document.removeEventListener("touchmove",this.handleMouseMove,!0),document.removeEventListener("touchend",this.handleMouseUp,!0),document.removeEventListener("keydown",this.handleKeyPress,!0)}},{key:"getProgress",value:function(){var e=this.props.getPercent;if(!e)return 0;var t=e();return("number"!=typeof t||t<0||t===1/0)&&(t=0),t}},{key:"handleMouseDown",value:function(e){var t=this.props.onMouseDown;document.addEventListener("mousemove",this.handleMouseMove,!0),document.addEventListener("mouseup",this.handleMouseUp,!0),document.addEventListener("touchmove",this.handleMouseMove,!0),document.addEventListener("touchend",this.handleMouseUp,!0),this.setState({active:!0}),this.props.sliderActive&&this.props.sliderActive(e),this.handleMouseMove(e),t&&t(e)}},{key:"handleMouseMove",value:function(e){var t=this.props.onMouseMove;t&&t(e)}},{key:"handleMouseUp",value:function(e){var t=this.props.onMouseUp;document.removeEventListener("mousemove",this.handleMouseMove,!0),document.removeEventListener("mouseup",this.handleMouseUp,!0),document.removeEventListener("touchmove",this.handleMouseMove,!0),document.removeEventListener("touchend",this.handleMouseUp,!0),this.setState({active:!1}),this.props.sliderInactive&&this.props.sliderInactive(e),t&&t(e)}},{key:"handleFocus",value:function(e){document.addEventListener("keydown",this.handleKeyPress,!0),this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){document.removeEventListener("keydown",this.handleKeyPress,!0),this.props.onBlur&&this.props.onBlur(e)}},{key:"handleClick",value:function(e){e.preventDefault(),this.props.onClick&&this.props.onClick(e)}},{key:"handleKeyPress",value:function(e){37===e.which||40===e.which?(e.preventDefault(),e.stopPropagation(),this.stepBack()):38!==e.which&&39!==e.which||(e.preventDefault(),e.stopPropagation(),this.stepForward())}},{key:"stepForward",value:function(){this.props.stepForward&&this.props.stepForward()}},{key:"stepBack",value:function(){this.props.stepBack&&this.props.stepBack()}},{key:"calculateDistance",value:function(e){var t=this.slider,r=p.getPointerPosition(t,e);return this.props.vertical?r.y:r.x}},{key:"renderChildren",value:function(){var e=this.getProgress(),t="".concat((100*e).toFixed(2),"%");return f.default.Children.map(this.props.children,function(r){return f.default.cloneElement(r,{progress:e,percentage:t})})}},{key:"render",value:function(){var e=this,t=this.props,r=t.vertical,n=t.label,a=t.valuenow,i=t.valuetext;return f.default.createElement("div",{className:(0,h.default)(this.props.className,{"video-react-slider-vertical":r,"video-react-slider-horizontal":!r,"video-react-sliding":this.state.active},"video-react-slider"),ref:function(t){e.slider=t},tabIndex:"0",role:"slider",onMouseDown:this.handleMouseDown,onTouchStart:this.handleMouseDown,onFocus:this.handleFocus,onBlur:this.handleBlur,onClick:this.handleClick,"aria-label":n||"","aria-valuenow":a||"","aria-valuetext":i||"","aria-valuemin":0,"aria-valuemax":100},this.renderChildren())}}]),t}(f.Component);t.default=g,g.propTypes=v,g.displayName="Slider"},dlSNA:function(e,t){e.exports=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e},e.exports.default=e.exports,e.exports.__esModule=!0},dlwsE:function(e,t){e.exports=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},e.exports.default=e.exports,e.exports.__esModule=!0},dmJvV:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dpVnL")),o=a(r("dMVZn")),s=a(r("dlwsE")),l=a(r("dW8MJ")),u=a(r("da1gu")),c=a(r("dNsbk")),d=a(r("dPJYZ")),f=a(r("d7W2i")),h=a(r("d9B4+")),p=n(r("dcDcd")),v=a(r("dTSYQ")),g={tagName:h.default.string,onClick:h.default.func.isRequired,onFocus:h.default.func,onBlur:h.default.func,className:h.default.string},m=function(e){function t(e,r){var n;return(0,s.default)(this,t),(n=(0,u.default)(this,(0,c.default)(t).call(this,e,r))).handleClick=n.handleClick.bind((0,d.default)(n)),n.handleFocus=n.handleFocus.bind((0,d.default)(n)),n.handleBlur=n.handleBlur.bind((0,d.default)(n)),n.handleKeypress=n.handleKeypress.bind((0,d.default)(n)),n}return(0,f.default)(t,e),(0,l.default)(t,[{key:"handleKeypress",value:function(e){32!==e.which&&13!==e.which||(e.preventDefault(),this.handleClick(e))}},{key:"handleClick",value:function(e){(0,this.props.onClick)(e)}},{key:"handleFocus",value:function(e){document.addEventListener("keydown",this.handleKeypress),this.props.onFocus&&this.props.onFocus(e)}},{key:"handleBlur",value:function(e){document.removeEventListener("keydown",this.handleKeypress),this.props.onBlur&&this.props.onBlur(e)}},{key:"render",value:function(){var e=this.props.tagName,t=(0,o.default)({},this.props);return delete t.tagName,delete t.className,p.default.createElement(e,(0,i.default)({className:(0,v.default)(this.props.className),role:"button",tabIndex:"0",onClick:this.handleClick,onFocus:this.handleFocus,onBlur:this.handleBlur},t))}}]),t}(p.Component);t.default=m,m.propTypes=g,m.defaultProps={tagName:"div"},m.displayName="ClickableComponent"},do4RB:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h={children:d.default.any},p=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=n.handleClick.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"handleClick",value:function(e){e.preventDefault()}},{key:"render",value:function(){return f.default.createElement("div",{className:"video-react-menu video-react-lock-showing",role:"presentation",onClick:this.handleClick},f.default.createElement("ul",{className:"video-react-menu-content"},this.props.children))}}]),t}(f.Component);t.default=p,p.propTypes=h,p.displayName="Menu"},doIRg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=u(r("diCc5")),a=u(r("dV7oC")),i=u(r("dFYw3")),o=u(r("dmRg0")),s=r("dcDcd"),l=u(s);function u(e){return e&&e.__esModule?e:{default:e}}u(r("d17x9"));var c=function(){return l.default.createElement("span",null)},d=function(e){function t(){var e,r,a,o;(0,n.default)(this,t);for(var s=arguments.length,l=Array(s),u=0;u<s;u++)l[u]=arguments[u];return r=a=(0,i.default)(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(l))),a.state={canRender:!1},o=r,(0,i.default)(a,o)}return(0,o.default)(t,e),(0,a.default)(t,[{key:"componentDidMount",value:function(){this.setState({canRender:!0})}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.onSSR,n=void 0===r?l.default.createElement(c,null):r;return this.state.canRender?t:n}}]),t}(s.Component);t.default=d},"dq+t5":function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=u;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s=r("dtJTW"),l={currentTime:a.default.number,duration:a.default.number,percentage:a.default.string,className:a.default.string};function u(e){var t=e.currentTime,r=e.duration,n=e.percentage,a=e.className;return i.default.createElement("div",{"data-current-time":(0,s.formatTime)(t,r),className:(0,o.default)("video-react-play-progress video-react-slider-bar",a),style:{width:n}},i.default.createElement("span",{className:"video-react-control-text"},"Progress: ".concat(n)))}u.propTypes=l,u.displayName="PlayProgressBar"},dqZXj:function(e,t){e.exports=LazyLoad},dqdLH:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.IS_IOS=t.IS_IPOD=t.IS_IPHONE=t.IS_IPAD=void 0;var n="undefined"!=typeof window&&window.navigator?window.navigator.userAgent:"",a=/iPad/i.test(n);t.IS_IPAD=a;var i=/iPhone/i.test(n)&&!a;t.IS_IPHONE=i;var o=/iPod/i.test(n);t.IS_IPOD=o;var s=i||a||o;t.IS_IOS=s},drQrh:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.iconsList=["icon-3dots","icon-72hours","icon-a-380-outbound","icon-add-contact","icon-add-customer","icon-adult-female-customer","icon-adult-male-customer","icon-adventure","icon-advertising-outdoor","icon-advertising","icon-air-conditioning","icon-airbus-a-330-200","icon-airbus-a-340-340","icon-airbus-a-340-500","icon-airbus-a-380","icon-airplane-seat","icon-airplane","icon-airport-control","icon-airport-parking","icon-airport-security","icon-airport-spa","icon-aquarium","icon-arrow-left","icon-arrow-right","icon-arrow","icon-attention","icon-award","icon-baggagerestriction","icon-balcony","icon-bar","icon-bassinet","icon-bath","icon-bathrobes","icon-beach-volleyball","icon-beach","icon-big-arrow-down","icon-big-arrow-left","icon-big-arrow-right","icon-big-arrow-up","icon-boeing-777-200","icon-boeing-777-300","icon-boeing-777-lr-200","icon-boeing-777-lr-300","icon-book-dubai-services","icon-breakfast","icon-briefcase","icon-bus-traditional","icon-bus","icon-business-suitcase","icon-cabin-crew-hat","icon-cabin-crew","icon-calculator","icon-calendar-changes","icon-calendar-inverted","icon-calendar-month","icon-calendar","icon-camera","icon-cancel-booking","icon-car-hire","icon-casino","icon-catering","icon-champagne","icon-change-booking","icon-chat","icon-chauffeur-drive","icon-check-circle","icon-check-in-Failure","icon-check-in-area","icon-check-in-online","icon-check","icon-checked-baggage","icon-chevron-down","icon-chevron-left","icon-chevron-right","icon-chevron-up","icon-child-female-customer","icon-child-male-customer","icon-children-s-product","icon-cigar-lounge","icon-city-break","icon-clock-fare","icon-clock-time","icon-clock","icon-close","icon-clothing-hanger","icon-clothing","icon-cloudy","icon-cold","icon-collapse","icon-conference-room","icon-contact","icon-continental-breakfast","icon-corporate-dress-code","icon-cot","icon-credit-card","icon-cruise","icon-cuisine","icon-culinary","icon-cvv","icon-debit-card","icon-delete-bold","icon-delete-light","icon-delete","icon-destination-served","icon-destinations","icon-disabled-facilities","icon-distance-between","icon-diving-equipment","icon-document-paper","icon-double-big-arrow-left","icon-double-big-arrow-right","icon-download","icon-drinks","icon-driver","icon-duty-free-bag","icon-duty-free","icon-edit","icon-email-text-on-board","icon-email","icon-engine","icon-error-inverse","icon-error","icon-escalator","icon-eticket","icon-evoucher-inverted","icon-evoucher","icon-excess-baggage","icon-exclamation","icon-expand","icon-explore-reverse","icon-explore","icon-external-link","icon-facebook","icon-farelock-6-hours","icon-farelock-no-time","icon-fares","icon-filetype-PDF","icon-filter","icon-finance-money","icon-finance","icon-fire-hose","icon-first-class-private-suite","icon-fitness","icon-fleet","icon-flight-cancelled","icon-flight-connection","icon-flight-delayed","icon-flight-diverted","icon-flight-landing","icon-flight-status","icon-flight-stopover","icon-flight-take-off","icon-fly-drive","icon-food-and-beverage","icon-food-beverage","icon-forbidden","icon-fridge","icon-fuel-gas","icon-fuel","icon-games","icon-garmet-holder","icon-gate","icon-generic-plane","icon-globe-map","icon-globe-travel","icon-golf-clubs","icon-googleplus","icon-hair-salon","icon-hairdryer","icon-hand-baggage","icon-headsets-noise-cancellation","icon-heating","icon-helicopter-1","icon-helicopter-2","icon-help-special-needs","icon-high-chair","icon-historical","icon-hold-payment","icon-home","icon-hot-meals","icon-hot","icon-hotels","icon-hours-1","icon-hours-2","icon-hours-3","icon-hours-4","icon-household-couch","icon-household-lamp","icon-household-vase","icon-howto-reverse","icon-howto","icon-ice-digital","icon-ice-widescreen","icon-ice","icon-id","icon-inbound-flight","icon-inbound","icon-infant","icon-information-reverse","icon-information","icon-instagram","icon-insurance","icon-internet","icon-iron","icon-jetski","icon-kettle-tea-coffee","icon-kgs-hand-baggage","icon-kgs-hold-baggage-2","icon-kgs-hold-baggage","icon-kids-club","icon-kids-meal","icon-kids-pack","icon-kitchenette","icon-landing","icon-laundrey","icon-leisure-beach","icon-leisure-diving","icon-lift","icon-linkedin","icon-live-entertainment","icon-loading","icon-location","icon-lounge-airport","icon-luggage","icon-maintenance","icon-map-pin","icon-map-reverse","icon-map","icon-meals-and-drinks","icon-menu","icon-megamenu-loyalty-emirates-skywards","icon-microwave","icon-miles","icon-minibar","icon-mins-1","icon-mins-2","icon-mins-3","icon-mins-4","icon-mins-5","icon-minus","icon-mobile-boarding-pass-1","icon-mobile-boarding-pass","icon-mobile-classic","icon-mobile-coverage","icon-mobile-payment","icon-mobile-phone","icon-moon-lighting-system","icon-mountain-ski","icon-music","icon-mytrips","icon-navigation-search","icon-newspapers","icon-nightlife","icon-no-checked-baggage","icon-offline-transfers","icon-onboard-lounge","icon-onboard-spa","icon-one-way-flight","icon-one-way","icon-online-transfers","icon-or","icon-outbound-flight","icon-outbound","icon-oversize-baggage","icon-paint","icon-parasol","icon-partner-lounge","icon-parts","icon-passenger","icon-pay-dollars","icon-pay-office","icon-payment-on-hold","icon-paypal","icon-pet","icon-pieces-luggage","icon-pillow","icon-pilot-cap","icon-pilot","icon-play-area","icon-plus","icon-pool-bar","icon-powder","icon-power-supply-inseat","icon-prayer-room-female","icon-prayer-room-male","icon-print-boarding-pass","icon-print-reverse","icon-print","icon-profile-account","icon-prohibited-luggage","icon-pub","icon-public-holiday","icon-question-mark","icon-quote","icon-radar","icon-radio-podcast","icon-rainy","icon-refresh","icon-remove-customer","icon-reservation","icon-restaurant","icon-restaurants","icon-return-flight","icon-return","icon-right-arrow","icon-safe","icon-satellite-tv","icon-sauna","icon-scenic","icon-schedule","icon-scheduled-flight","icon-sea-view","icon-search","icon-seat-business-class","icon-seat-deeply-reclining","icon-seat-flat","icon-seat-lie-flat","icon-seat-y","icon-select-seat","icon-services","icon-settings","icon-share","icon-shop","icon-shopping-basket","icon-shopping","icon-smoking-area","icon-snow","icon-spa","icon-special-diet","icon-special-meal","icon-sports-american-football","icon-sports-baseball","icon-sports-basketball","icon-sports-car-racing","icon-sports-cricket","icon-sports-football","icon-sports-golf","icon-sports-horse-racing","icon-sports-soccer","icon-sports-tennis","icon-sports","icon-staircase","icon-stand-by","icon-stand","icon-steam-room","icon-storm","icon-stpc-stop-over","icon-summer","icon-sun-lounger","icon-sunny-cloudy","icon-sunny","icon-surfboard","icon-tailfin","icon-target","icon-taxi","icon-telephone","icon-theatre-shows","icon-theatre","icon-therapists","icon-time","icon-toilet-area","icon-toilet-female","icon-toilet-male","icon-tools","icon-tooltip","icon-trade-calc","icon-trade-graphic","icon-trade-pie","icon-train","icon-transfer-bank","icon-transport-car","icon-transport-gas","icon-travel-agent","icon-travel-trade","icon-travelmate","icon-trouser-press","icon-tv-shows","icon-tv","icon-twitter","icon-um-services","icon-upgrade-class","icon-upgrade","icon-usb","icon-valuable-luggage","icon-visa","icon-waitlisted","icon-wake-up-service","icon-walk","icon-wallet","icon-water-sports-motorised","icon-water-sports","icon-waterside","icon-wedding-service","icon-weibo","icon-whats-on-flight","icon-who","icon-widescreen-17-inch","icon-widescreen-23-inch","icon-wifi","icon-window-seat","icon-windy","icon-x-23-kgs","icon-x-32-kgs","icon-youtube"]},drsAN:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s={duration:a.default.number,buffered:a.default.object,className:a.default.string};function l(e){var t=e.buffered,r=e.duration,n=e.className;if(!t||!t.length)return null;var a=t.end(t.length-1),s={};function l(e,t){var r=e/t||0;return"".concat(100*(r>=1?1:r),"%")}a>r&&(a=r),s.width=l(a,r);for(var u=[],c=0;c<t.length;c++){var d=t.start(c),f=t.end(c),h=i.default.createElement("div",{style:{left:l(d,a),width:l(f-d,a)},key:"part-".concat(c)});u.push(h)}return 0===u.length&&(u=null),i.default.createElement("div",{style:s,className:(0,o.default)("video-react-load-progress",n)},i.default.createElement("span",{className:"video-react-control-text"},"Loaded: 0%"),u)}l.propTypes=s,l.displayName="LoadProgressBar"},druMa:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=l;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s={separator:a.default.string,className:a.default.string};function l(e){var t=e.separator,r=e.className,n=t||"/";return i.default.createElement("div",{className:(0,o.default)("video-react-time-control video-react-time-divider",r),dir:"ltr"},i.default.createElement("div",null,i.default.createElement("span",null,n)))}l.propTypes=s,l.displayName="TimeDivider"},drzyQ:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("dlwsE")),i=n(r("dW8MJ")),o=new(function(){function e(){(0,a.default)(this,e)}return(0,i.default)(e,[{key:"request",value:function(e){e.requestFullscreen?e.requestFullscreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.msRequestFullscreen&&e.msRequestFullscreen()}},{key:"exit",value:function(){document.exitFullscreen?document.exitFullscreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.msExitFullscreen&&document.msExitFullscreen()}},{key:"addEventListener",value:function(e){document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e)}},{key:"removeEventListener",value:function(e){document.removeEventListener("fullscreenchange",e),document.removeEventListener("webkitfullscreenchange",e),document.removeEventListener("mozfullscreenchange",e),document.removeEventListener("MSFullscreenChange",e)}},{key:"isFullscreen",get:function(){return document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement}},{key:"enabled",get:function(){return document.fullscreenEnabled||document.webkitFullscreenEnabled||document.mozFullScreenEnabled||document.msFullscreenEnabled}}]),e}());t.default=o},"ds/rx":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["ready","stateChange","playbackQualityChange","playbackRateChange","error","apiChange","volumeChange"],e.exports=t.default},dt0y4:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=["cueVideoById","loadVideoById","cueVideoByUrl","loadVideoByUrl","playVideo","pauseVideo","stopVideo","getVideoLoadedFraction","cuePlaylist","loadPlaylist","nextVideo","previousVideo","playVideoAt","setShuffle","setLoop","getPlaylist","getPlaylistIndex","setOption","mute","unMute","isMuted","setVolume","getVolume","seekTo","getPlayerState","getPlaybackRate","setPlaybackRate","getAvailablePlaybackRates","getPlaybackQuality","setPlaybackQuality","getAvailableQualityLevels","getCurrentTime","getDuration","removeEventListener","getVideoUrl","getVideoEmbedCode","getOptions","getOption","addEventListener","destroy","setSize","getIframe"],e.exports=t.default},dtHUb:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getFormattedPartnerLink=function(e){var t=window.dataLayer,r=(0,n.default)(window.__INITIAL_STATE__,"urlparser.results",{}),s=t[0],u=s.platformType,c=void 0===u?"Desktop":u,d=s.countryCode,f=void 0===d?"GB":d,h=s.languageCode,p=void 0===h?"EN":h,v=s.pageName,g=s.posSiteCurrencyCode,m=void 0===g?"USD":g,y=t.find(function(e){return"DataPush.Common_UniqueIDs"===e.event})||{},b=y.googleAnalyticsClientID,T=y.boxeverBrowserID,E=r.countryCompat,k=(E?"/":"")+E+"/"+r.language;if(b&&"undefined"!==b||!window.GA_ID||(b=window.GA_ID.substr("GA1.1.".length)),!T&&window.Boxever&&(T=window.Boxever.getID()),l(e)){var S=e.externalLink.split("?")[0],_=S.startsWith("/")?S:"/"+S,C=(0,i.default)((0,o.getParameterByName)("partner",e.externalLink))+("Desktop"===c?"d":"m"),P=r.query?Object.keys(r.query).filter(function(e){return e.startsWith("utm")}).map(function(e){return"&"+e+"="+r.query[e]}).join(""):"";return""+k+_+"?ssoProduct="+C+"&countryLang="+(0,i.default)(p.split("-")[0])+"-"+(0,a.default)(f)+"&languageCode="+(0,a.default)(p)+"&countryCode="+(0,a.default)(f)+"&previouspagename="+encodeURIComponent(encodeURIComponent(v))+"&platformType="+c+"&posSiteCurrencyCode="+m+"&googleAnalyticsClientID="+b+"&boxeverBrowserID="+T+P}};var n=s(r("dmwIZ")),a=s(r("dmoYt")),i=s(r("dL5/0")),o=r("dTQIS");function s(e){return e&&e.__esModule?e:{default:e}}var l=function(e){return"points"===(0,i.default)(e.externalPartner)}},dtJTW:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.formatTime=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e,r=Math.floor(e%60),n=Math.floor(e/60%60),a=Math.floor(e/3600),i=Math.floor(t/60%60),o=Math.floor(t/3600);return(l(e)||e===1/0)&&(a="-",n="-",r="-"),(a=a>0||o>0?"".concat(a,":"):"")+(n="".concat((a||i>=10)&&n<10?"0".concat(n):n,":"))+(r<10?"0".concat(r):r)},t.isVideoChild=function(e){return!(!e.props||!e.props.isVideoChild)||"source"===e.type||"track"===e.type},t.mergeAndSortChildren=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,a=s.default.Children.toArray(t),l=(r.order,(0,o.default)(r,["order"]));return a.filter(function(e){return!e.props.disabled}).concat(e.filter(function(e){return!u(a,function(t){return c(t,e)})})).map(function(t){var r=u(e,function(e){return c(e,t)}),n=r?r.props:{},a=(0,i.default)({},l,n,t.props);return s.default.cloneElement(t,a,t.props.children)}).sort(function(e,t){return(e.props.order||n)-(t.props.order||n)})},t.deprecatedWarning=function(e,t){console.warn("WARNING: ".concat(e," will be deprecated soon! Please use ").concat(t," instead."))},t.throttle=function(e,t){var r=arguments,n=!1;return function(){n||(e.apply(void 0,(0,a.default)(r)),n=!0,setTimeout(function(){n=!1},t))}},t.mediaProperties=void 0;var a=n(r("dRIqP")),i=n(r("dMVZn")),o=n(r("dQILm")),s=n(r("dcDcd")),l=Number.isNaN||function(e){return e!=e},u=function(e,t){return e.filter(t)[0]},c=function(e,t){var r=e.type,n=t.type;return"string"==typeof r||"string"==typeof n?r===n:"function"==typeof r&&"function"==typeof n&&r.displayName===n.displayName};t.mediaProperties=["error","src","srcObject","currentSrc","crossOrigin","networkState","preload","buffered","readyState","seeking","currentTime","duration","paused","defaultPlaybackRate","playbackRate","played","seekable","ended","autoplay","loop","mediaGroup","controller","controls","volume","muted","defaultMuted","audioTracks","videoTracks","textTracks","width","height","videoWidth","videoHeight","poster"]},dtPgb:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=n(r("d9B4+")),i=n(r("dcDcd")),o=n(r("dTSYQ")),s={poster:a.default.string,player:a.default.object,actions:a.default.object,className:a.default.string};function l(e){var t=e.poster,r=e.player,n=e.actions,a=e.className;return!t||r.hasStarted?null:i.default.createElement("div",{className:(0,o.default)("video-react-poster",a),style:{backgroundImage:'url("'.concat(t,'")')},onClick:function(){r.paused&&n.play()}})}l.propTypes=s,l.displayName="PosterImage";var u=l;t.default=u},dtlqc:function(e,t,r){},du6sg:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={BUFFERING:3,ENDED:0,PAUSED:2,PLAYING:1,UNSTARTED:-1,VIDEO_CUED:5},e.exports=t.default},duJza:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=e||window||{};t.logError=function(e,t){if(!r.__JEST__&&console){var n=t||(e&&e.message?e.message:void 0);n?console.error(n,e):e&&console.error(e)}}}).call(this,r("dyLpj"))},dudzn:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),Object.defineProperty(t,"Player",{enumerable:!0,get:function(){return i.default}}),Object.defineProperty(t,"Video",{enumerable:!0,get:function(){return o.default}}),Object.defineProperty(t,"BigPlayButton",{enumerable:!0,get:function(){return s.default}}),Object.defineProperty(t,"LoadingSpinner",{enumerable:!0,get:function(){return l.default}}),Object.defineProperty(t,"PosterImage",{enumerable:!0,get:function(){return u.default}}),Object.defineProperty(t,"Slider",{enumerable:!0,get:function(){return c.default}}),Object.defineProperty(t,"Bezel",{enumerable:!0,get:function(){return d.default}}),Object.defineProperty(t,"Shortcut",{enumerable:!0,get:function(){return f.default}}),Object.defineProperty(t,"ControlBar",{enumerable:!0,get:function(){return h.default}}),Object.defineProperty(t,"PlayToggle",{enumerable:!0,get:function(){return p.default}}),Object.defineProperty(t,"ForwardControl",{enumerable:!0,get:function(){return v.default}}),Object.defineProperty(t,"ReplayControl",{enumerable:!0,get:function(){return g.default}}),Object.defineProperty(t,"FullscreenToggle",{enumerable:!0,get:function(){return m.default}}),Object.defineProperty(t,"ProgressControl",{enumerable:!0,get:function(){return y.default}}),Object.defineProperty(t,"SeekBar",{enumerable:!0,get:function(){return b.default}}),Object.defineProperty(t,"PlayProgressBar",{enumerable:!0,get:function(){return T.default}}),Object.defineProperty(t,"LoadProgressBar",{enumerable:!0,get:function(){return E.default}}),Object.defineProperty(t,"MouseTimeDisplay",{enumerable:!0,get:function(){return k.default}}),Object.defineProperty(t,"VolumeMenuButton",{enumerable:!0,get:function(){return S.default}}),Object.defineProperty(t,"PlaybackRateMenuButton",{enumerable:!0,get:function(){return _.default}}),Object.defineProperty(t,"PlaybackRate",{enumerable:!0,get:function(){return C.default}}),Object.defineProperty(t,"ClosedCaptionButton",{enumerable:!0,get:function(){return P.default}}),Object.defineProperty(t,"RemainingTimeDisplay",{enumerable:!0,get:function(){return w.default}}),Object.defineProperty(t,"CurrentTimeDisplay",{enumerable:!0,get:function(){return A.default}}),Object.defineProperty(t,"DurationDisplay",{enumerable:!0,get:function(){return O.default}}),Object.defineProperty(t,"TimeDivider",{enumerable:!0,get:function(){return R.default}}),Object.defineProperty(t,"MenuButton",{enumerable:!0,get:function(){return I.default}}),Object.defineProperty(t,"playerReducer",{enumerable:!0,get:function(){return x.playerReducer}}),Object.defineProperty(t,"operationReducer",{enumerable:!0,get:function(){return x.operationReducer}}),t.videoActions=t.playerActions=void 0;var i=a(r("dvcz5")),o=a(r("dEdwz")),s=a(r("dvu4D")),l=a(r("dX2cd")),u=a(r("dtPgb")),c=a(r("dkXlQ")),d=a(r("dzFvY")),f=a(r("dLgmY")),h=a(r("dFcgA")),p=a(r("d0yDM")),v=a(r("d4b3c")),g=a(r("dUXv2")),m=a(r("d54lq")),y=a(r("dzHIc")),b=a(r("dxFFL")),T=a(r("dq+t5")),E=a(r("drsAN")),k=a(r("dGuGs")),S=a(r("dAZ0a")),_=a(r("dDGqw")),C=a(r("dwXLL")),P=a(r("dyYHT")),w=a(r("dNa29")),A=a(r("dHI9P")),O=a(r("dGdU9")),R=a(r("druMa")),I=a(r("dU3K2")),D=n(r("dwe7k"));t.playerActions=D;var L=n(r("dINgg"));t.videoActions=L;var x=r("dulZL")},dulZL:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1?arguments[1]:void 0;return{player:(0,a.default)(e.player,t),operation:(0,i.default)(e.operation,t)}},t.operationReducer=t.playerReducer=void 0;var a=n(r("d56F6")),i=n(r("d3nJo")),o=a.default;t.playerReducer=o;var s=i.default;t.operationReducer=s},dulZh:function(e,t,r){var n;"undefined"!=typeof window&&(n=function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(n,a,function(t){return e[t]}.bind(null,a));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/dist/",r(r.s="./src/hls.ts")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";var n=Object.prototype.hasOwnProperty,a="~";function i(){}function o(e,t,r,n,i){if("function"!=typeof r)throw new TypeError("The listener must be a function");var o=new function(e,t,r){this.fn=e,this.context=t,this.once=r||!1}(r,n||e,i),s=a?a+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],o]:e._events[s].push(o):(e._events[s]=o,e._eventsCount++),e}function s(e,t){0==--e._eventsCount?e._events=new i:delete e._events[t]}function l(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(a=!1)),l.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)n.call(e,t)&&r.push(a?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},l.prototype.listeners=function(e){var t=a?a+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=new Array(i);n<i;n++)o[n]=r[n].fn;return o},l.prototype.listenerCount=function(e){var t=a?a+e:e,r=this._events[t];return r?r.fn?1:r.length:0},l.prototype.emit=function(e,t,r,n,i,o){var s=a?a+e:e;if(!this._events[s])return!1;var l,u,c=this._events[s],d=arguments.length;if(c.fn){switch(c.once&&this.removeListener(e,c.fn,void 0,!0),d){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,t),!0;case 3:return c.fn.call(c.context,t,r),!0;case 4:return c.fn.call(c.context,t,r,n),!0;case 5:return c.fn.call(c.context,t,r,n,i),!0;case 6:return c.fn.call(c.context,t,r,n,i,o),!0}for(u=1,l=new Array(d-1);u<d;u++)l[u-1]=arguments[u];c.fn.apply(c.context,l)}else{var f,h=c.length;for(u=0;u<h;u++)switch(c[u].once&&this.removeListener(e,c[u].fn,void 0,!0),d){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,t);break;case 3:c[u].fn.call(c[u].context,t,r);break;case 4:c[u].fn.call(c[u].context,t,r,n);break;default:if(!l)for(f=1,l=new Array(d-1);f<d;f++)l[f-1]=arguments[f];c[u].fn.apply(c[u].context,l)}}return!0},l.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},l.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},l.prototype.removeListener=function(e,t,r,n){var i=a?a+e:e;if(!this._events[i])return this;if(!t)return s(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||s(this,i);else{for(var l=0,u=[],c=o.length;l<c;l++)(o[l].fn!==t||n&&!o[l].once||r&&o[l].context!==r)&&u.push(o[l]);u.length?this._events[i]=1===u.length?u[0]:u:s(this,i)}return this},l.prototype.removeAllListeners=function(e){var t;return e?(t=a?a+e:e,this._events[t]&&s(this,t)):(this._events=new i,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=a,l.EventEmitter=l,e.exports=l},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,a=/(?:\/|^)\.(?=\/)/g,i=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,o={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var a=o.parseURL(e);if(!a)throw new Error("Error trying to parse base URL.");return a.path=o.normalizePath(a.path),o.buildURLFromParts(a)}var i=o.parseURL(t);if(!i)throw new Error("Error trying to parse relative URL.");if(i.scheme)return r.alwaysNormalize?(i.path=o.normalizePath(i.path),o.buildURLFromParts(i)):t;var s=o.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var u={scheme:s.scheme,netLoc:i.netLoc,path:null,params:i.params,query:i.query,fragment:i.fragment};if(!i.netLoc&&(u.netLoc=s.netLoc,"/"!==i.path[0]))if(i.path){var c=s.path,d=c.substring(0,c.lastIndexOf("/")+1)+i.path;u.path=o.normalizePath(d)}else u.path=s.path,i.params||(u.params=s.params,i.query||(u.query=s.query));return null===u.path&&(u.path=r.alwaysNormalize?o.normalizePath(i.path):i.path),o.buildURLFromParts(u)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(a,"");e.length!==(e=e.replace(i,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=o}()},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){var t={};function r(n){if(t[n])return t[n].exports;var a=t[n]={i:n,l:!1,exports:{}};return e[n].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.i=function(e){return e},r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},r.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="/",r.oe=function(e){throw console.error(e),e};var n=r(r.s=ENTRY_MODULE);return n.default||n}var a="[\\.|\\-|\\+|\\w|/|@]+",i="\\(\\s*(/\\*.*?\\*/)?\\s*.*?("+a+").*?\\)";function o(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function s(e,t,n){var s={};s[n]=[];var l=t.toString(),u=l.match(/^function\s?\w*\(\w+,\s*\w+,\s*(\w+)\)/);if(!u)return s;for(var c,d=u[1],f=new RegExp("(\\\\n|\\W)"+o(d)+i,"g");c=f.exec(l);)"dll-reference"!==c[3]&&s[n].push(c[3]);for(f=new RegExp("\\("+o(d)+'\\("(dll-reference\\s('+a+'))"\\)\\)'+i,"g");c=f.exec(l);)e[c[2]]||(s[n].push(c[1]),e[c[2]]=r(c[1]).m),s[c[2]]=s[c[2]]||[],s[c[2]].push(c[4]);for(var h,p=Object.keys(s),v=0;v<p.length;v++)for(var g=0;g<s[p[v]].length;g++)h=s[p[v]][g],isNaN(1*h)||(s[p[v]][g]=1*s[p[v]][g]);return s}function l(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length>0},!1)}e.exports=function(e,t){t=t||{};var a={main:r.m},i=t.all?{main:Object.keys(a.main)}:function(e,t){for(var r={main:[t]},n={main:[]},a={main:{}};l(r);)for(var i=Object.keys(r),o=0;o<i.length;o++){var u=i[o],c=r[u].pop();if(a[u]=a[u]||{},!a[u][c]&&e[u][c]){a[u][c]=!0,n[u]=n[u]||[],n[u].push(c);for(var d=s(e,e[u][c],u),f=Object.keys(d),h=0;h<f.length;h++)r[f[h]]=r[f[h]]||[],r[f[h]]=r[f[h]].concat(d[f[h]])}}return n}(a,e),o="";Object.keys(i).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;i[e][t];)t++;i[e].push(t),a[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",o=o+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+i[e].map(function(t){return JSON.stringify(t)+": "+a[e][t].toString()}).join(",")+"});\n"}),o=o+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+i.main.map(function(e){return JSON.stringify(e)+": "+a.main[e].toString()}).join(",")+"}))(self);";var u=new window.Blob([o],{type:"text/javascript"});if(t.bare)return u;var c=(window.URL||window.webkitURL||window.mozURL||window.msURL).createObjectURL(u),d=new window.Worker(c);return d.objectURL=c,d}},"./src/crypt/decrypter.js":function(e,t,r){"use strict";r.r(t);var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}(),a=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}(),i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}var t=e.prototype;return t.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},t.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],a=r[1],i=r[2],o=r[3],s=this.invSubMix,l=s[0],u=s[1],c=s[2],d=s[3],f=new Uint32Array(256),h=0,p=0,v=0;for(v=0;v<256;v++)f[v]=v<128?v<<1:v<<1^283;for(v=0;v<256;v++){var g=p^p<<1^p<<2^p<<3^p<<4;g=g>>>8^255&g^99,e[h]=g,t[g]=h;var m=f[h],y=f[m],b=f[y],T=257*f[g]^16843008*g;n[h]=T<<24|T>>>8,a[h]=T<<16|T>>>16,i[h]=T<<8|T>>>24,o[h]=T,T=16843009*b^65537*y^257*m^16843008*h,l[g]=T<<24|T>>>8,u[g]=T<<16|T>>>16,c[g]=T<<8|T>>>24,d[g]=T,h?(h=m^f[f[f[b^m]]],p^=f[f[p]]):h=p=1}},t.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var a=this.keySize=t.length;if(4!==a&&6!==a&&8!==a)throw new Error("Invalid aes key size="+a);var i,o,s,l,u=this.ksRows=4*(a+6+1),c=this.keySchedule=new Uint32Array(u),d=this.invKeySchedule=new Uint32Array(u),f=this.sBox,h=this.rcon,p=this.invSubMix,v=p[0],g=p[1],m=p[2],y=p[3];for(i=0;i<u;i++)i<a?s=c[i]=t[i]:(l=s,i%a==0?(l=f[(l=l<<8|l>>>24)>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=h[i/a|0]<<24):a>6&&i%a==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),c[i]=s=(c[i-a]^l)>>>0);for(o=0;o<u;o++)i=u-o,l=3&o?c[i]:c[i-4],d[o]=o<4||i<=4?l:v[f[l>>>24]]^g[f[l>>>16&255]]^m[f[l>>>8&255]]^y[f[255&l]],d[o]=d[o]>>>0}},t.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},t.decrypt=function(e,t,r,n){for(var a,i,o,s,l,u,c,d,f,h,p,v,g,m,y=this.keySize+6,b=this.invKeySchedule,T=this.invSBox,E=this.invSubMix,k=E[0],S=E[1],_=E[2],C=E[3],P=this.uint8ArrayToUint32Array_(r),w=P[0],A=P[1],O=P[2],R=P[3],I=new Int32Array(e),D=new Int32Array(I.length),L=this.networkToHostOrderSwap;t<I.length;){for(f=L(I[t]),h=L(I[t+1]),p=L(I[t+2]),v=L(I[t+3]),l=f^b[0],u=v^b[1],c=p^b[2],d=h^b[3],g=4,m=1;m<y;m++)a=k[l>>>24]^S[u>>16&255]^_[c>>8&255]^C[255&d]^b[g],i=k[u>>>24]^S[c>>16&255]^_[d>>8&255]^C[255&l]^b[g+1],o=k[c>>>24]^S[d>>16&255]^_[l>>8&255]^C[255&u]^b[g+2],s=k[d>>>24]^S[l>>16&255]^_[u>>8&255]^C[255&c]^b[g+3],l=a,u=i,c=o,d=s,g+=4;a=T[l>>>24]<<24^T[u>>16&255]<<16^T[c>>8&255]<<8^T[255&d]^b[g],i=T[u>>>24]<<24^T[c>>16&255]<<16^T[d>>8&255]<<8^T[255&l]^b[g+1],o=T[c>>>24]<<24^T[d>>16&255]<<16^T[l>>8&255]<<8^T[255&u]^b[g+2],s=T[d>>>24]<<24^T[l>>16&255]<<16^T[u>>8&255]<<8^T[255&c]^b[g+3],g+=3,D[t]=L(a^w),D[t+1]=L(s^A),D[t+2]=L(o^O),D[t+3]=L(i^R),w=f,A=h,O=p,R=v,t+=4}return n?function(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}(D.buffer):D.buffer},t.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}(),o=r("./src/errors.ts"),s=r("./src/utils/logger.js"),l=r("./src/events.js"),u=r("./src/utils/get-self-scope.js"),c=Object(u.getSelfScope)(),d=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,a=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=a,a)try{var i=c.crypto;i&&(this.subtle=i.subtle||i.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}var t=e.prototype;return t.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},t.decrypt=function(e,t,r,o){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var u=this.decryptor;u||(this.decryptor=u=new i),u.expandKey(t),o(u.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var c=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new a(c,t)),this.fastAesKey.expandKey().then(function(a){new n(c,r).decrypt(e,a).catch(function(n){l.onWebCryptoError(n,e,t,r,o)}).then(function(e){o(e)})}).catch(function(n){l.onWebCryptoError(n,e,t,r,o)})}},t.onWebCryptoError=function(e,t,r,n,a){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,a)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},t.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=d},"./src/demux/demuxer-inline.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/events.js"),a=r("./src/errors.ts"),i=r("./src/crypt/decrypter.js"),o=r("./src/polyfills/number-isFinite.js"),s=r("./src/utils/logger.js"),l=r("./src/utils/get-self-scope.js");function u(e,t){return 255===e[t]&&240==(246&e[t+1])}function c(e,t){return 1&e[t+1]?7:9}function d(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function f(e,t){return!!(t+1<e.length&&u(e,t))}function h(e,t){if(f(e,t)){var r=c(e,t);t+5<e.length&&(r=d(e,t));var n=t+r;if(n===e.length||n+1<e.length&&u(e,n))return!0}return!1}function p(e,t,r,i,o){if(!e.samplerate){var l=function(e,t,r,i){var o,l,u,c,d,f=navigator.userAgent.toLowerCase(),h=i,p=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];if(o=1+((192&t[r+2])>>>6),!((l=(60&t[r+2])>>>2)>p.length-1))return c=(1&t[r+2])<<2,c|=(192&t[r+3])>>>6,s.logger.log("manifest codec:"+i+",ADTS data:type:"+o+",sampleingIndex:"+l+"["+p[l]+"Hz],channelConfig:"+c),/firefox/i.test(f)?l>=6?(o=5,d=new Array(4),u=l-3):(o=2,d=new Array(2),u=l):-1!==f.indexOf("android")?(o=2,d=new Array(2),u=l):(o=5,d=new Array(4),i&&(-1!==i.indexOf("mp4a.40.29")||-1!==i.indexOf("mp4a.40.5"))||!i&&l>=6?u=l-3:((i&&-1!==i.indexOf("mp4a.40.2")&&(l>=6&&1===c||/vivaldi/i.test(f))||!i&&1===c)&&(o=2,d=new Array(2)),u=l)),d[0]=o<<3,d[0]|=(14&l)>>1,d[1]|=(1&l)<<7,d[1]|=c<<3,5===o&&(d[1]|=(14&u)>>1,d[2]=(1&u)<<7,d[2]|=8,d[3]=0),{config:d,samplerate:p[l],channelCount:c,codec:"mp4a.40."+o,manifestCodec:h};e.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+l})}(t,r,i,o);e.config=l.config,e.samplerate=l.samplerate,e.channelCount=l.channelCount,e.codec=l.codec,e.manifestCodec=l.manifestCodec,s.logger.log("parsed codec:"+e.codec+",rate:"+l.samplerate+",nb channel:"+l.channelCount)}}function v(e){return 9216e4/e}function g(e,t,r,n,a){var i=function(e,t,r,n,a){var i,o,s=e.length;if(i=c(e,t),o=d(e,t),(o-=i)>0&&t+i+o<=s)return{headerLength:i,frameLength:o,stamp:r+n*a}}(t,r,n,a,v(e.samplerate));if(i){var o=i.stamp,s=i.headerLength,l=i.frameLength,u={unit:t.subarray(r+s,r+s+l),pts:o,dts:o};return e.samples.push(u),{sample:u,length:l+s}}}var m=r("./src/demux/id3.js"),y=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){if(!e)return!1;for(var t=(m.default.getID3Data(e,0)||[]).length,r=e.length;t<r;t++)if(h(e,t))return s.logger.log("ADTS sync word found !"),!0;return!1},t.append=function(e,t,r,n){for(var a=this._audioTrack,i=m.default.getID3Data(e,0)||[],l=m.default.getTimeStamp(i),u=Object(o.isFiniteNumber)(l)?90*l:9e4*t,c=0,d=u,h=e.length,v=i.length,y=[{pts:d,dts:d,data:i}];v<h-1;)if(f(e,v)&&v+5<h){p(a,this.observer,e,v,a.manifestCodec);var b=g(a,e,v,u,c);if(!b){s.logger.log("Unable to parse AAC frame");break}v+=b.length,d=b.sample.pts,c++}else m.default.isHeader(e,v)?(i=m.default.getID3Data(e,v),y.push({pts:d,dts:d,data:i}),v+=i.length):v++;this.remuxer.remux(a,{samples:[]},{samples:y,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),b=r("./src/demux/mp4demuxer.js"),T={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,a){if(!(r+24>t.length)){var i=this.parseHeader(t,r);if(i&&r+i.frameLength<=t.length){var o=n+a*(9e4*i.samplesPerFrame/i.sampleRate),s={unit:t.subarray(r,r+i.frameLength),pts:o,dts:o};return e.config=[],e.channelCount=i.channelCount,e.samplerate=i.sampleRate,e.samples.push(s),{sample:s,length:i.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,n=e[t+1]>>1&3,a=e[t+2]>>4&15,i=e[t+2]>>2&3,o=e[t+2]>>1&1;if(1!==r&&0!==a&&15!==a&&3!==i){var s=3===r?3-n:3===n?3:4,l=1e3*T.BitratesMap[14*s+a-1],u=3===r?0:2===r?1:2,c=T.SamplingRateMap[3*u+i],d=e[t+3]>>6==3?1:2,f=T.SamplesCoefficients[r][n],h=T.BytesInSlot[n],p=8*f*h;return{sampleRate:c,channelCount:d,frameLength:parseInt(f*l/c+o,10)*h,samplesPerFrame:p}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var a=t+n;if(a===e.length||a+1<e.length&&this.isHeaderPattern(e,a))return!0}return!1}},E=T,k=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}var t=e.prototype;return t.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),a=Math.min(4,t);if(0===a)throw new Error("no bytes available");n.set(e.subarray(r,r+a)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*a,this.bytesAvailable-=a},t.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,e-=(t=e>>3)>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},t.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&s.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),(t=e-t)>0&&this.bitsAvailable?r<<t|this.readBits(t):r},t.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},t.skipUEG=function(){this.skipBits(1+this.skipLZ())},t.skipEG=function(){this.skipBits(1+this.skipLZ())},t.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},t.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},t.readBoolean=function(){return 1===this.readBits(1)},t.readUByte=function(){return this.readBits(8)},t.readUShort=function(){return this.readBits(16)},t.readUInt=function(){return this.readBits(32)},t.skipScalingList=function(e){var t,r=8,n=8;for(t=0;t<e;t++)0!==n&&(n=(r+this.readEG()+256)%256),r=0===n?r:n},t.readSPS=function(){var e,t,r,n,a,i,o,s=0,l=0,u=0,c=0,d=this.readUByte.bind(this),f=this.readBits.bind(this),h=this.readUEG.bind(this),p=this.readBoolean.bind(this),v=this.skipBits.bind(this),g=this.skipEG.bind(this),m=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(d(),e=d(),f(5),v(3),d(),m(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var b=h();if(3===b&&v(1),m(),m(),v(1),p())for(i=3!==b?8:12,o=0;o<i;o++)p()&&y(o<6?16:64)}m();var T=h();if(0===T)h();else if(1===T)for(v(1),g(),g(),t=h(),o=0;o<t;o++)g();m(),v(1),r=h(),n=h(),0===(a=f(1))&&v(1),v(1),p()&&(s=h(),l=h(),u=h(),c=h());var E=[1,1];if(p()&&p())switch(d()){case 1:E=[1,1];break;case 2:E=[12,11];break;case 3:E=[10,11];break;case 4:E=[16,11];break;case 5:E=[40,33];break;case 6:E=[24,11];break;case 7:E=[20,11];break;case 8:E=[32,11];break;case 9:E=[80,33];break;case 10:E=[18,11];break;case 11:E=[15,11];break;case 12:E=[64,33];break;case 13:E=[160,99];break;case 14:E=[4,3];break;case 15:E=[3,2];break;case 16:E=[2,1];break;case 255:E=[d()<<8|d(),d()<<8|d()]}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-a)*(n+1)*16-(a?2:4)*(u+c),pixelRatio:E}},t.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}(),S=function(){function e(e,t,r,n){this.decryptdata=r,this.discardEPB=n,this.decrypter=new i.default(e,t,{removePKCS7Padding:!1})}var t=e.prototype;return t.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},t.decryptAacSample=function(e,t,r,n){var a=e[t].unit,i=a.subarray(16,a.length-a.length%16),o=i.buffer.slice(i.byteOffset,i.byteOffset+i.length),s=this;this.decryptBuffer(o,function(i){i=new Uint8Array(i),a.set(i,16),n||s.decryptAacSamples(e,t+1,r)})},t.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},t.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,a=32;a<=e.length-16;a+=160,n+=16)r.set(e.subarray(a,a+16),n);return r},t.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},t.decryptAvcSample=function(e,t,r,n,a,i){var o=this.discardEPB(a.data),s=this.getAvcEncryptedData(o),l=this;this.decryptBuffer(s.buffer,function(s){a.data=l.getAvcDecryptedUnit(o,s),i||l.decryptAvcSamples(e,t,r+1,n)})},t.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var a=e[t].units;!(r>=a.length);r++){var i=a[r];if(!(i.length<=48||1!==i.type&&5!==i.type)){var o=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,i,o),!o)return}}}},e}(),_={video:1,audio:2,id3:3,text:4},C=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}var t=e.prototype;return t.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new S(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0||(r&&s.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),0))},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:_[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},t.resetInitSegment=function(t,r,n,a){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",a),this._audioTrack=e.createTrack("audio",a),this._id3Track=e.createTrack("id3",a),this._txtTrack=e.createTrack("text",a),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=a},t.resetTimeStamp=function(){},t.append=function(t,r,i,o){var l,u,c,d,f,h=t.length,p=!1;this.contiguous=i;var v=this.pmtParsed,g=this._avcTrack,m=this._audioTrack,y=this._id3Track,b=g.pid,T=m.pid,E=y.pid,k=this._pmtId,S=g.pesData,_=m.pesData,C=y.pesData,P=this._parsePAT,w=this._parsePMT,A=this._parsePES,O=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),I=this._parseMPEGPES.bind(this),D=this._parseID3PES.bind(this),L=e._syncOffset(t);for(h-=(h+L)%188,l=L;l<h;l+=188)if(71===t[l]){if(u=!!(64&t[l+1]),c=((31&t[l+1])<<8)+t[l+2],(48&t[l+3])>>4>1){if((d=l+5+t[l+4])===l+188)continue}else d=l+4;switch(c){case b:u&&(S&&(f=A(S))&&O(f,!1),S={data:[],size:0}),S&&(S.data.push(t.subarray(d,l+188)),S.size+=l+188-d);break;case T:u&&(_&&(f=A(_))&&(m.isAAC?R(f):I(f)),_={data:[],size:0}),_&&(_.data.push(t.subarray(d,l+188)),_.size+=l+188-d);break;case E:u&&(C&&(f=A(C))&&D(f),C={data:[],size:0}),C&&(C.data.push(t.subarray(d,l+188)),C.size+=l+188-d);break;case 0:u&&(d+=t[d]+1),k=this._pmtId=P(t,d);break;case k:u&&(d+=t[d]+1);var x=w(t,d,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);(b=x.avc)>0&&(g.pid=b),(T=x.audio)>0&&(m.pid=T,m.isAAC=x.isAAC),(E=x.id3)>0&&(y.pid=E),p&&!v&&(s.logger.log("reparse from beginning"),p=!1,l=L-188),v=this.pmtParsed=!0;break;case 17:case 8191:break;default:p=!0}}else this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});S&&(f=A(S))?(O(f,!0),g.pesData=null):g.pesData=S,_&&(f=A(_))?(m.isAAC?R(f):I(f),m.pesData=null):(_&&_.size&&s.logger.log("last AAC PES packet truncated,might overlap between fragments"),m.pesData=_),C&&(f=A(C))?(D(f),y.pesData=null):y.pesData=C,null==this.sampleAes?this.remuxer.remux(m,g,y,this._txtTrack,r,i,o):this.decryptAndRemux(m,g,y,this._txtTrack,r,i,o)},t.decryptAndRemux=function(e,t,r,n,a,i,o){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,a,i,o)})}else this.decryptAndRemuxAvc(e,t,r,n,a,i,o)},t.decryptAndRemuxAvc=function(e,t,r,n,a,i,o){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,a,i,o)})}else this.remuxer.remux(e,t,r,n,a,i,o)},t.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},t._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},t._parsePMT=function(e,t,r,n){var a,i,o={audio:-1,avc:-1,id3:-1,isAAC:!0};for(a=t+3+((15&e[t+1])<<8|e[t+2])-4,t+=12+((15&e[t+10])<<8|e[t+11]);t<a;){switch(i=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){s.logger.log("unknown stream type:"+e[t]);break}case 15:-1===o.audio&&(o.audio=i);break;case 21:-1===o.id3&&(o.id3=i);break;case 219:if(!n){s.logger.log("unknown stream type:"+e[t]);break}case 27:-1===o.avc&&(o.avc=i);break;case 3:case 4:r?-1===o.audio&&(o.audio=i,o.isAAC=!1):s.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:s.logger.warn("HEVC stream type found, not supported for now");break;default:s.logger.log("unknown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return o},t._parsePES=function(e){var t,r,n,a,i,o,l,u,c=0,d=e.data;if(!e||0===e.size)return null;for(;d[0].length<19&&d.length>1;){var f=new Uint8Array(d[0].length+d[1].length);f.set(d[0]),f.set(d[1],d[0].length),d[0]=f,d.splice(1,1)}if(1===((t=d[0])[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;if(192&(r=t[7])&&((o=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2)>4294967295&&(o-=8589934592),64&r?((l=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2)>4294967295&&(l-=8589934592),o-l>54e5&&(s.logger.warn(Math.round((o-l)/9e4)+"s delta between PTS and DTS, align them"),o=l)):l=o),u=(a=t[8])+9,e.size<=u)return null;e.size-=u,i=new Uint8Array(e.size);for(var h=0,p=d.length;h<p;h++){var v=(t=d[h]).byteLength;if(u){if(u>v){u-=v;continue}t=t.subarray(u),v-=u,u=0}i.set(t,c),c+=v}return n&&(n-=a+3),{data:i,pts:o,dts:l,len:n}}return null},t.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;if(isNaN(e.pts)){if(!n)return void t.dropped++;var a=r[n-1];e.pts=a.pts,e.dts=a.dts}!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&s.logger.log(e.pts+"/"+e.dts+":"+e.debug)},t._parseAVCPES=function(e,t){var r,n,a,i=this,o=this._avcTrack,s=this._parseAVCNALu(e.data),l=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),d=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,l&&s.length&&!o.audFound&&(c(l,o),l=this.avcSample=d(!1,e.pts,e.dts,"")),s.forEach(function(t){switch(t.type){case 1:n=!0,l||(l=i.avcSample=d(!0,e.pts,e.dts,"")),l.frame=!0;var s=t.data;if(u&&s.length>4){var f=new k(s).readSliceType();2!==f&&4!==f&&7!==f&&9!==f||(l.key=!0)}break;case 5:n=!0,l||(l=i.avcSample=d(!0,e.pts,e.dts,"")),l.key=!0,l.frame=!0;break;case 6:n=!0,(r=new k(i.discardEPB(t.data))).readUByte();for(var h=0,p=0,v=!1,g=0;!v&&r.bytesAvailable>1;){h=0;do{h+=g=r.readUByte()}while(255===g);p=0;do{p+=g=r.readUByte()}while(255===g);if(4===h&&0!==r.bytesAvailable){if(v=!0,181===r.readUByte()&&49===r.readUShort()&&1195456820===r.readUInt()&&3===r.readUByte()){var y=r.readUByte(),b=31&y,T=[y,r.readUByte()];for(a=0;a<b;a++)T.push(r.readUByte()),T.push(r.readUByte()),T.push(r.readUByte());i._insertSampleInOrder(i._txtTrack.samples,{type:3,pts:e.pts,bytes:T})}}else if(5===h&&0!==r.bytesAvailable){if(v=!0,p>16){var E=[];for(a=0;a<16;a++)E.push(r.readUByte().toString(16)),3!==a&&5!==a&&7!==a&&9!==a||E.push("-");var S=p-16,_=new Uint8Array(S);for(a=0;a<S;a++)_[a]=r.readUByte();i._insertSampleInOrder(i._txtTrack.samples,{pts:e.pts,payloadType:h,uuid:E.join(""),userDataBytes:_,userData:Object(m.utf8ArrayToStr)(_.buffer)})}}else if(p<r.bytesAvailable)for(a=0;a<p;a++)r.readUByte()}break;case 7:if(n=!0,u=!0,!o.sps){var C=(r=new k(t.data)).readSPS();o.width=C.width,o.height=C.height,o.pixelRatio=C.pixelRatio,o.sps=[t.data],o.duration=i._duration;var P=t.data.subarray(1,4),w="avc1.";for(a=0;a<3;a++){var A=P[a].toString(16);A.length<2&&(A="0"+A),w+=A}o.codec=w}break;case 8:n=!0,o.pps||(o.pps=[t.data]);break;case 9:n=!1,o.audFound=!0,l&&c(l,o),l=i.avcSample=d(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,l&&(l.debug+="unknown NAL "+t.type+" ")}l&&n&&l.units.push(t)}),t&&l&&(c(l,o),this.avcSample=null)},t._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},t._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack.samples;t=r[r.length-1]}if(t){var n=t.units;e=n[n.length-1]}return e},t._parseAVCNALu=function(e){var t,r,n,a,i=0,o=e.byteLength,s=this._avcTrack,l=s.naluState||0,u=l,c=[],d=-1;for(-1===l&&(d=0,a=31&e[0],l=0,i=1);i<o;)if(t=e[i++],l)if(1!==l)if(t)if(1===t){if(d>=0)n={data:e.subarray(d,i-l-1),type:a},c.push(n);else{var f=this._getLastNalUnit();if(f&&(u&&i<=4-u&&f.state&&(f.data=f.data.subarray(0,f.data.byteLength-u)),(r=i-l-1)>0)){var h=new Uint8Array(f.data.byteLength+r);h.set(f.data,0),h.set(e.subarray(0,r),f.data.byteLength),f.data=h}}i<o?(d=i,a=31&e[i],l=0):l=-1}else l=0;else l=3;else l=t?0:2;else l=t?0:1;if(d>=0&&l>=0&&(n={data:e.subarray(d,o),type:a,state:l},c.push(n)),0===c.length){var p=this._getLastNalUnit();if(p){var v=new Uint8Array(p.data.byteLength+e.byteLength);v.set(p.data,0),v.set(e,p.data.byteLength),p.data=v}}return s.naluState=l,c},t.discardEPB=function(e){for(var t,r,n=e.byteLength,a=[],i=1;i<n-2;)0===e[i]&&0===e[i+1]&&3===e[i+2]?(a.push(i+2),i+=2):i++;if(0===a.length)return e;t=n-a.length,r=new Uint8Array(t);var o=0;for(i=0;i<t;o++,i++)o===a[0]&&(o++,a.shift()),r[i]=e[o];return r},t._parseAACPES=function(e){var t,r,i,o,l,u,c,d=this._audioTrack,h=e.data,m=e.pts,y=this.aacOverFlow,b=this.aacLastPTS;if(y){var T=new Uint8Array(y.byteLength+h.byteLength);T.set(y,0),T.set(h,y.byteLength),h=T}for(i=0,l=h.length;i<l-1&&!f(h,i);i++);if(!i||(i<l-1?(u="AAC PES did not start with ADTS header,offset:"+i,c=!1):(u="no ADTS header found in AAC PES",c=!0),s.logger.warn("parsing error:"+u),this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:c,reason:u}),!c)){if(p(d,this.observer,h,i,this.audioCodec),r=0,t=v(d.samplerate),y&&b){var E=b+t;Math.abs(E-m)>1&&(s.logger.log("AAC: align PTS for overlapping frames by "+Math.round((E-m)/90)),m=E)}for(;i<l;){if(f(h,i)){if(i+5<l){var k=g(d,h,i,m,r);if(k){i+=k.length,o=k.sample.pts,r++;continue}}break}i++}y=i<l?h.subarray(i,l):null,this.aacOverFlow=y,this.aacLastPTS=o}},t._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,a=0,i=e.pts;a<r;)if(E.isHeader(t,a)){var o=E.appendFrame(this._audioTrack,t,a,i,n);if(!o)break;a+=o.length,n++}else a++},t._parseID3PES=function(e){this._id3Track.samples.push(e)},e}(),P=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}var t=e.prototype;return t.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.resetTimeStamp=function(){},e.probe=function(e){var t,r,n=m.default.getID3Data(e,0);if(n&&void 0!==m.default.getTimeStamp(n))for(t=n.length,r=Math.min(e.length-1,t+100);t<r;t++)if(E.probe(e,t))return s.logger.log("MPEG Audio sync word found !"),!0;return!1},t.append=function(e,t,r,n){for(var a=m.default.getID3Data(e,0),i=m.default.getTimeStamp(a),o=i?90*i:9e4*t,s=a.length,l=e.length,u=0,c=0,d=this._audioTrack,f=[{pts:o,dts:o,data:a}];s<l;)if(E.isHeader(e,s)){var h=E.appendFrame(d,e,s,o,u);if(!h)break;s+=h.length,c=h.sample.pts,u++}else m.default.isHeader(e,s)?(a=m.default.getID3Data(e,s),f.push({pts:c,dts:c,data:a}),s+=a.length):s++;this.remuxer.remux(d,{samples:[]},{samples:f,inputTimeScale:9e4},{samples:[]},t,r,n)},t.destroy=function(){},e}(),w=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}(),A=Math.pow(2,32)-1,O=function(){function e(){}return e.init=function(){var t;for(t in e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]},e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var a=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),i=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=i,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var o=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,o,l,o,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,a))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,a=r.length,i=a;a--;)n+=r[a].byteLength;for((t=new Uint8Array(n))[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),a=0,n=8;a<i;a++)t.set(r[a],n),n+=r[a].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var n=Math.floor(r/(A+1)),a=Math.floor(r%(A+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var n=Math.floor(r/(A+1)),a=Math.floor(r%(A+1)),i=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,n>>24,n>>16&255,n>>8&255,255&n,a>>24,a>>16&255,a>>8&255,255&a,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,i)},e.sdtp=function(t){var r,n,a=t.samples||[],i=new Uint8Array(4+a.length);for(n=0;n<a.length;n++)r=a[n].flags,i[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,i)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,a,i=[],o=[];for(r=0;r<t.sps.length;r++)a=(n=t.sps[r]).byteLength,i.push(a>>>8&255),i.push(255&a),i=i.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)a=(n=t.pps[r]).byteLength,o.push(a>>>8&255),o.push(255&a),o=o.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,i[3],i[4],i[5],255,224|t.sps.length].concat(i).concat([t.pps.length]).concat(o))),l=t.width,u=t.height,c=t.pixelRatio[0],d=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,u>>8&255,255&u,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([c>>24,c>>16&255,c>>8&255,255&c,d>>24,d>>16&255,d>>8&255,255&d])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,n=t.duration*t.timescale,a=t.width,i=t.height,o=Math.floor(n/(A+1)),s=Math.floor(n%(A+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o,s>>24,s>>16&255,s>>8&255,255&s,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,a>>8&255,255&a,0,0,i>>8&255,255&i,0,0]))},e.traf=function(t,r){var n=e.sdtp(t),a=t.id,i=Math.floor(r/(A+1)),o=Math.floor(r%(A+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,a>>24,a>>16&255,a>>8&255,255&a])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o])),e.trun(t,n.length+16+20+8+16+8+8),n)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,a,i,o,s,l,u=t.samples||[],c=u.length,d=12+16*c,f=new Uint8Array(d);for(r+=8+d,f.set([0,0,15,1,c>>>24&255,c>>>16&255,c>>>8&255,255&c,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<c;n++)i=(a=u[n]).duration,o=a.size,s=a.flags,l=a.cts,f.set([i>>>24&255,i>>>16&255,i>>>8&255,255&i,o>>>24&255,o>>>16&255,o>>>8&255,255&o,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return(r=new Uint8Array(e.FTYP.byteLength+n.byteLength)).set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();function R(e,t,r,n){void 0===r&&(r=1),void 0===n&&(n=!1);var a=e*t*r;return n?Math.round(a):a}function I(e,t){return void 0===t&&(t=!1),R(e,1e3,1/9e4,t)}function D(e,t){return void 0===t&&(t=1),R(e,9e4,1/t)}var L,x=D(10),M=D(.2),F=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var a=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&a&&!a.match("CriOS"),this.ISGenerated=!1}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},t.resetInitSegment=function(){this.ISGenerated=!1},t.remux=function(e,t,r,a,i,o,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var u=e.samples.length,c=t.samples.length,d=i,f=i;if(u&&c){var h=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;d+=Math.max(0,h),f+=Math.max(0,-h)}if(u){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var p,v=this.remuxAudio(e,d,o,l);c&&(v&&(p=v.endPTS-v.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,o,p,l))}else if(c){var g=this.remuxVideo(t,f,o,0,l);g&&e.codec&&this.remuxEmptyAudio(e,d,o,g)}}r.samples.length&&this.remuxID3(r,i),a.samples.length&&this.remuxText(a,i),this.observer.trigger(n.default.FRAG_PARSED)},t.generateIS=function(e,t,r){var i,o,l=this.observer,u=e.samples,c=t.samples,d=this.typeSupported,f="audio/mp4",h={},p={tracks:h},v=void 0===this._initPTS;if(v&&(i=o=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(d.mpeg?(f="audio/mpeg",e.codec=""):d.mp3&&(e.codec="mp3")),h.audio={container:f,codec:e.codec,initSegment:!e.isAAC&&d.mpeg?new Uint8Array:O.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(i=o=u[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&c.length){var g=t.inputTimeScale;t.timescale=g,h.video={container:"video/mp4",codec:t.codec,initSegment:O.initSegment([t]),metadata:{width:t.width,height:t.height}},v&&(i=Math.min(i,c[0].pts-g*r),o=Math.min(o,c[0].dts-g*r),this.observer.trigger(n.default.INIT_PTS_FOUND,{initPTS:i}))}Object.keys(h).length?(l.trigger(n.default.FRAG_PARSING_INIT_SEGMENT,p),this.ISGenerated=!0,v&&(this._initPTS=i,this._initDTS=o)):l.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},t.remuxVideo=function(e,t,r,i,o){var l,u,c,d,f,h,p,v=8,g=e.timescale,m=e.samples,y=[],b=m.length,T=this._PTSNormalize,E=this._initPTS,k=this.nextAvcDts,S=this.isSafari;if(0!==b){S&&(r|=m.length&&k&&(o&&Math.abs(t-k/g)<.1||Math.abs(m[0].pts-k-E)<g/5)),r||(k=t*g),m.forEach(function(e){e.pts=T(e.pts-E,k),e.dts=T(e.dts-E,k)}),m.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var _=m.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-1*M)},0);if(_<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+I(_,!0)+" ms to overcome this issue");for(var C=0;C<m.length;C++)m[C].dts+=_}var P=m[0];f=Math.max(P.dts,0),d=Math.max(P.pts,0);var w=f-k;r&&w&&(w>1?s.logger.log("AVC: "+I(w,!0)+" ms hole between fragments detected,filling it"):w<-1&&s.logger.log("AVC: "+I(-w,!0)+" ms overlapping between fragments detected"),f=k,m[0].dts=f,d=Math.max(d-w,k),m[0].pts=d,s.logger.log("Video: PTS/DTS adjusted: "+I(d,!0)+"/"+I(f,!0)+", delta: "+I(w,!0)+" ms")),P=m[m.length-1],p=Math.max(P.dts,0),h=Math.max(P.pts,0,p),S&&(l=Math.round((p-f)/(m.length-1)));for(var A=0,R=0,D=0;D<b;D++){for(var L=m[D],x=L.units,F=x.length,N=0,B=0;B<F;B++)N+=x[B].data.length;R+=N,A+=F,L.length=N,L.dts=S?f+D*l:Math.max(L.dts,f),L.pts=Math.max(L.pts,L.dts)}var j=R+4*A+8;try{u=new Uint8Array(j)}catch(e){return void this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:j,reason:"fail allocating video mdat "+j})}var U=new DataView(u.buffer);U.setUint32(0,j),u.set(O.types.mdat,4);for(var V=0;V<b;V++){for(var G=m[V],H=G.units,K=0,W=void 0,Y=0,q=H.length;Y<q;Y++){var z=H[Y],X=z.data,Q=z.data.byteLength;U.setUint32(v,Q),v+=4,u.set(X,v),v+=Q,K+=4+Q}if(S)W=Math.max(0,l*Math.round((G.pts-G.dts)/l));else{if(V<b-1)l=m[V+1].dts-G.dts;else{var J=this.config,Z=G.dts-m[V>0?V-1:V].dts;if(J.stretchShortVideoTrack){var $=J.maxBufferHole,ee=Math.floor($*g),te=(i?d+i*g:this.nextAudioPts)-G.pts;te>ee?((l=te-Z)<0&&(l=Z),s.logger.log("It is approximately "+I(te,!1)+" ms to the next segment; using duration "+I(l,!1)+" ms for the last video frame.")):l=Z}else l=Z}W=Math.round(G.pts-G.dts)}y.push({size:K,duration:l,cts:W,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:G.key?2:1,isNonSync:G.key?0:1}})}this.nextAvcDts=p+l;var re=e.dropped;if(e.nbNalu=0,e.dropped=0,y.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var ne=y[0].flags;ne.dependsOn=2,ne.isNonSync=0}e.samples=y,c=O.moof(e.sequenceNumber++,f,e),e.samples=[];var ae={data1:c,data2:u,startPTS:d/g,endPTS:(h+l)/g,startDTS:f/g,endDTS:this.nextAvcDts/g,type:"video",hasAudio:!1,hasVideo:!0,nb:y.length,dropped:re};return this.observer.trigger(n.default.FRAG_PARSING_DATA,ae),ae}},t.remuxAudio=function(e,t,r,i){var o,l,u,c,d,f,h=e.inputTimeScale,p=e.timescale,v=h/p,g=(e.isAAC?1024:1152)*v,m=this._PTSNormalize,y=this._initPTS,b=!e.isAAC&&this.typeSupported.mpeg,T=b?0:8,E=e.samples,k=[],S=this.nextAudioPts;if(r|=E.length&&S&&(i&&Math.abs(t-S/h)<.1||Math.abs(E[0].pts-S-y)<20*g),E.forEach(function(e){e.pts=e.dts=m(e.pts-y,t*h)}),0!==(E=E.filter(function(e){return e.pts>=0})).length){if(r||(S=i?t*h:E[0].pts),e.isAAC)for(var _=this.config.maxAudioFramesDrift,C=0,P=S;C<E.length;){var A,R=E[C];if((A=R.pts-P)<=-_*g)s.logger.warn("Dropping 1 audio frame @ "+I(P,!0)+" ms due to "+I(A,!0)+" ms overlap."),E.splice(C,1);else if(A>=_*g&&A<x&&P){var D=Math.round(A/g);s.logger.warn("Injecting "+D+" audio frames @ "+I(P,!0)+" ms due to "+I(P,!0)+" ms gap.");for(var L=0;L<D;L++){var M=Math.max(P,0);(l=w.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),l=R.unit.subarray()),E.splice(C,0,{unit:l,pts:M,dts:M}),P+=g,C++}R.pts=R.dts=P,P+=g,C++}else Math.abs(A),R.pts=R.dts=P,P+=g,C++}for(var F=E.length,N=0;F--;)N+=E[F].unit.byteLength;for(var B=0,j=E.length;B<j;B++){var U=E[B],V=U.unit,G=U.pts;if(void 0!==f)o.duration=Math.round((G-f)/v);else{var H=G-S,K=0;if(r&&e.isAAC&&H){if(H>0&&H<x)K=Math.round((G-S)/g),s.logger.log(I(H,!0)+" ms hole between AAC samples detected,filling it"),K>0&&((l=w.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(l=V.subarray()),N+=K*l.length);else if(H<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta: "+I(S,!0)+" ms / "+I(G,!0)+" ms / "+I(-H,!0)+" ms"),N-=V.byteLength;continue}G=S}if(d=G,!(N>0))return;N+=T;try{u=new Uint8Array(N)}catch(e){return void this.observer.trigger(n.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating audio mdat "+N})}b||(new DataView(u.buffer).setUint32(0,N),u.set(O.types.mdat,4));for(var W=0;W<K;W++)(l=w.getSilentFrame(e.manifestCodec||e.codec,e.channelCount))||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),l=V.subarray()),u.set(l,T),T+=l.byteLength,o={size:l.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(o)}u.set(V,T);var Y=V.byteLength;T+=Y,o={size:Y,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},k.push(o),f=G}var q=0;if((F=k.length)>=2&&(q=k[F-2].duration,o.duration=q),F){this.nextAudioPts=S=f+v*q,e.samples=k,c=b?new Uint8Array:O.moof(e.sequenceNumber++,d/v,e),e.samples=[];var z=d/h,X=S/h,Q={data1:c,data2:u,startPTS:z,endPTS:X,startDTS:z,endDTS:X,type:"audio",hasAudio:!0,hasVideo:!1,nb:F};return this.observer.trigger(n.default.FRAG_PARSING_DATA,Q),Q}return null}},t.remuxEmptyAudio=function(e,t,r,n){var a=e.inputTimeScale,i=a/(e.samplerate?e.samplerate:a),o=this.nextAudioPts,l=(void 0!==o?o:n.startDTS*a)+this._initDTS,u=n.endDTS*a+this._initDTS,c=1024*i,d=Math.ceil((u-l)/c),f=w.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),f){for(var h=[],p=0;p<d;p++){var v=l+p*c;h.push({unit:f,pts:v,dts:v})}e.samples=h,this.remuxAudio(e,t,r)}else s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!")},t.remuxID3=function(e){var t,r=e.samples.length,a=e.inputTimeScale,i=this._initPTS,o=this._initDTS;if(r){for(var s=0;s<r;s++)(t=e.samples[s]).pts=(t.pts-i)/a,t.dts=(t.dts-o)/a;this.observer.trigger(n.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},t.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,a=e.inputTimeScale,i=this._initPTS;if(r){for(var o=0;o<r;o++)(t=e.samples[o]).pts=(t.pts-i)/a;this.observer.trigger(n.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},t._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}(),N=function(){function e(e){this.observer=e}var t=e.prototype;return t.destroy=function(){},t.resetTimeStamp=function(){},t.resetInitSegment=function(){},t.remux=function(e,t,r,a,i,o,s,l){var u=this.observer,c="";e&&(c+="audio"),t&&(c+="video"),u.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:i,startDTS:i,type:c,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),u.trigger(n.default.FRAG_PARSED)},e}(),B=Object(l.getSelfScope)();try{L=B.performance.now.bind(B.performance)}catch(e){s.logger.debug("Unable to use Performance API on this environment"),L=B.Date.now}var j=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}var t=e.prototype;return t.destroy=function(){var e=this.demuxer;e&&e.destroy()},t.push=function(e,t,r,a,o,s,l,u,c,d,f,h){var p=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var v=this.decrypter;null==v&&(v=this.decrypter=new i.default(this.observer,this.config));var g=L();v.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var i=L();p.observer.trigger(n.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:i}}),p.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,o,s,l,u,c,d,f,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),a,o,s,l,u,c,d,f,h)},t.pushDecrypted=function(e,t,r,i,o,s,l,u,c,d,f,h){var p=this.demuxer;if(!p||(l||u)&&!this.probe(e)){for(var v=this.observer,g=this.typeSupported,m=this.config,T=[{demux:C,remux:F},{demux:b.default,remux:N},{demux:y,remux:F},{demux:P,remux:F}],E=0,k=T.length;E<k;E++){var S=T[E],_=S.demux.probe;if(_(e)){var w=this.remuxer=new S.remux(v,m,g,this.vendor);p=new S.demux(v,w,m,g),this.probe=_;break}}if(!p)return void v.trigger(n.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=p}var A=this.remuxer;(l||u)&&(p.resetInitSegment(r,i,o,d),A.resetInitSegment()),l&&(p.resetTimeStamp(h),A.resetTimeStamp(h)),"function"==typeof p.setDecryptData&&p.setDecryptData(t),p.append(e,s,c,f)},e}();t.default=j},"./src/demux/demuxer-worker.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/demux/demuxer-inline.js"),a=r("./src/events.js"),i=r("./src/utils/logger.js"),o=r("./node_modules/eventemitter3/index.js");t.default=function(e){var t=new o.EventEmitter;t.trigger=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.emit.apply(t,[e,e].concat(n))},t.off=function(e){for(var r=arguments.length,n=new Array(r>1?r-1:0),a=1;a<r;a++)n[a-1]=arguments[a];t.removeListener.apply(t,[e].concat(n))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(a){var o=a.data;switch(o.cmd){case"init":var s=JSON.parse(o.config);e.demuxer=new n.default(t,o.typeSupported,s,o.vendor),Object(i.enableLogs)(s.debug),r("init",null);break;case"demux":e.demuxer.push(o.data,o.decryptdata,o.initSegment,o.audioCodec,o.videoCodec,o.timeOffset,o.discontinuity,o.trackSwitch,o.contiguous,o.duration,o.accurateTimeOffset,o.defaultInitPTS)}}),t.on(a.default.FRAG_DECRYPTED,r),t.on(a.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(a.default.FRAG_PARSED,r),t.on(a.default.ERROR,r),t.on(a.default.FRAG_PARSING_METADATA,r),t.on(a.default.FRAG_PARSING_USERDATA,r),t.on(a.default.INIT_PTS_FOUND,r),t.on(a.default.FRAG_PARSING_DATA,function(t,r){var n=[],a={event:t,data:r};r.data1&&(a.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(a.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(a,n)})}},"./src/demux/id3.js":function(e,t,r){"use strict";r.r(t),r.d(t,"utf8ArrayToStr",function(){return s});var n,a=r("./src/utils/get-self-scope.js"),i=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,a=0;e.isHeader(t,r);)a+=10,a+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(a+=10),r+=a;if(a>0)return t.subarray(n,n+a)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,(r|=(127&e[t+2])<<7)|127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var a=r[n];if(e.isTimeStampFrame(a))return e._readTimeStamp(a)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){for(var a=e._readSize(t,r+6),i=(r+=10)+a;r+8<i;){var o=e._getFrameData(t.subarray(r)),s=e._decodeFrame(o);s&&n.push(s),r+=o.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r),!0);r+=n.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:a}}var i=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:i}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var a=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:a}}var i=e._utf8ArrayToStr(t.data);return{key:t.type,data:i}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);var r=o();if(r){var n=r.decode(e);if(t){var a=n.indexOf("\0");return-1!==a?n.substring(0,a):n}return n.replace(/\0/g,"")}for(var i,s,l,u=e.length,c="",d=0;d<u;){if(0===(i=e[d++])&&t)return c;if(0!==i&&3!==i)switch(i>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:c+=String.fromCharCode(i);break;case 12:case 13:s=e[d++],c+=String.fromCharCode((31&i)<<6|63&s);break;case 14:s=e[d++],l=e[d++],c+=String.fromCharCode((15&i)<<12|(63&s)<<6|(63&l)<<0)}}return c},e}();function o(){var e=Object(a.getSelfScope)();return n||void 0===e.TextDecoder||(n=new e.TextDecoder("utf-8")),n}var s=i._utf8ArrayToStr;t.default=i},"./src/demux/mp4demuxer.js":function(e,t,r){"use strict";r.r(t);var n=r("./src/utils/logger.js"),a=r("./src/events.js"),i=Math.pow(2,32)-1,o=function(){function e(e,t){this.observer=e,this.remuxer=t}var t=e.prototype;return t.resetTimeStamp=function(e){this.initPTS=e},t.resetInitSegment=function(t,r,n,i){if(t&&t.byteLength){var o=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};o.audio&&o.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:i?t:null}:(o.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:i?t:null}),o.video&&(s.video={container:"video/mp4",codec:n,initSegment:i?t:null})),this.observer.trigger(a.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,a,i,o,s,l,u=[];if(t.data?(s=t.start,i=t.end,t=t.data):(s=0,i=t.byteLength),!r.length)return null;for(n=s;n<i;)l=(a=e.readUint32(t,n))>1?n+a:i,e.bin2str(t.subarray(n+4,n+8))===r[0]&&(1===r.length?u.push({data:t,start:n+8,end:l}):(o=e.findBox({data:t,start:n+8,end:l},r.slice(1))).length&&(u=u.concat(o))),n=l;return u},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],a=n?n.end:null,i=0,o=e.findBox(t,["sidx"]);if(!o||!o[0])return null;r=[];var s=(o=o[0]).data[0];i=0===s?8:16;var l=e.readUint32(o,i);i+=4,i+=0===s?8:16,i+=2;var u=o.end+0,c=e.readUint16(o,i);i+=2;for(var d=0;d<c;d++){var f=i,h=e.readUint32(o,f);f+=4;var p=2147483647&h;if(1==(2147483648&h)>>>31)return void console.warn("SIDX has hierarchical references (not supported)");var v=e.readUint32(o,f);f+=4,r.push({referenceSize:p,subsegmentDuration:v,info:{duration:v/l,start:u,end:u+p-1}}),u+=p,i=f+=4}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:c,references:r,moovEndOffset:a}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var a=e.findBox(t,["tkhd"])[0];if(a){var i=a.data[a.start],o=0===i?12:20,s=e.readUint32(a,o),l=e.findBox(t,["mdia","mdhd"])[0];if(l){o=0===(i=l.data[l.start])?12:20;var u=e.readUint32(l,o),c=e.findBox(t,["mdia","hdlr"])[0];if(c){var d={soun:"audio",vide:"video"}[e.bin2str(c.data.subarray(c.start+8,c.start+12))];if(d){var f=e.findBox(t,["mdia","minf","stbl","stsd"]);if(f.length){f=f[0];var h=e.bin2str(f.data.subarray(f.start+12,f.start+16));n.logger.log("MP4Demuxer:"+d+":"+h+" found")}r[s]={timescale:u,type:d},r[d]={timescale:u,id:s}}}}}}),r},e.getStartDTS=function(t,r){var n,a,i;return n=e.findBox(r,["moof","traf"]),a=[].concat.apply([],n.map(function(r){return e.findBox(r,["tfhd"]).map(function(n){var a,i;return a=e.readUint32(n,4),i=t[a].timescale||9e4,e.findBox(r,["tfdt"]).map(function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0]/i})})),i=Math.min.apply(null,a),isFinite(i)?i:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map(function(r){return e.findBox(r,["tfhd"]).map(function(a){var o=e.readUint32(a,4),s=t[o].timescale||9e4;e.findBox(r,["tfdt"]).map(function(t){var r=t.data[t.start],a=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,a-n*s);else{a*=Math.pow(2,32),a+=e.readUint32(t,8),a-=n*s,a=Math.max(a,0);var o=Math.floor(a/(i+1)),l=Math.floor(a%(i+1));e.writeUint32(t,4,o),e.writeUint32(t,8,l)}})})})},t.append=function(t,r,n,i){var o=this.initData;o||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),o=this.initData);var s,l=this.initPTS;if(void 0===l){var u=e.getStartDTS(o,t);this.initPTS=l=u-r,this.observer.trigger(a.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(o,t,l),s=e.getStartDTS(o,t),this.remuxer.remux(o.audio,o.video,null,null,s,n,i,t)},t.destroy=function(){},e}();t.default=o},"./src/errors.ts":function(e,t,r){"use strict";var n,a;r.r(t),r.d(t,"ErrorTypes",function(){return n}),r.d(t,"ErrorDetails",function(){return a}),function(e){e.NETWORK_ERROR="networkError",e.MEDIA_ERROR="mediaError",e.KEY_SYSTEM_ERROR="keySystemError",e.MUX_ERROR="muxError",e.OTHER_ERROR="otherError"}(n||(n={})),function(e){e.KEY_SYSTEM_NO_KEYS="keySystemNoKeys",e.KEY_SYSTEM_NO_ACCESS="keySystemNoAccess",e.KEY_SYSTEM_NO_SESSION="keySystemNoSession",e.KEY_SYSTEM_LICENSE_REQUEST_FAILED="keySystemLicenseRequestFailed",e.KEY_SYSTEM_NO_INIT_DATA="keySystemNoInitData",e.MANIFEST_LOAD_ERROR="manifestLoadError",e.MANIFEST_LOAD_TIMEOUT="manifestLoadTimeOut",e.MANIFEST_PARSING_ERROR="manifestParsingError",e.MANIFEST_INCOMPATIBLE_CODECS_ERROR="manifestIncompatibleCodecsError",e.LEVEL_LOAD_ERROR="levelLoadError",e.LEVEL_LOAD_TIMEOUT="levelLoadTimeOut",e.LEVEL_SWITCH_ERROR="levelSwitchError",e.AUDIO_TRACK_LOAD_ERROR="audioTrackLoadError",e.AUDIO_TRACK_LOAD_TIMEOUT="audioTrackLoadTimeOut",e.FRAG_LOAD_ERROR="fragLoadError",e.FRAG_LOAD_TIMEOUT="fragLoadTimeOut",e.FRAG_DECRYPT_ERROR="fragDecryptError",e.FRAG_PARSING_ERROR="fragParsingError",e.REMUX_ALLOC_ERROR="remuxAllocError",e.KEY_LOAD_ERROR="keyLoadError",e.KEY_LOAD_TIMEOUT="keyLoadTimeOut",e.BUFFER_ADD_CODEC_ERROR="bufferAddCodecError",e.BUFFER_APPEND_ERROR="bufferAppendError",e.BUFFER_APPENDING_ERROR="bufferAppendingError",e.BUFFER_STALLED_ERROR="bufferStalledError",e.BUFFER_FULL_ERROR="bufferFullError",e.BUFFER_SEEK_OVER_HOLE="bufferSeekOverHole",e.BUFFER_NUDGE_ON_STALL="bufferNudgeOnStall",e.INTERNAL_EXCEPTION="internalException"}(a||(a={}))},"./src/events.js":function(e,t,r){"use strict";r.r(t),t.default={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition",LIVE_BACK_BUFFER_REACHED:"hlsLiveBackBufferReached"}},"./src/hls.ts":function(e,t,r){"use strict";r.r(t);var n={};r.r(n),r.d(n,"newCue",function(){return it});var a,i,o=r("./node_modules/url-toolkit/src/url-toolkit.js"),s=r("./src/errors.ts"),l=r("./src/polyfills/number-isFinite.js"),u=r("./src/events.js"),c=r("./src/utils/logger.js"),d={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},f=function(){function e(e){this.hls=void 0,this.handledEvents=void 0,this.useGenericHandler=void 0,this.hls=e,this.onEvent=this.onEvent.bind(this);for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.handledEvents=r,this.useGenericHandler=!0,this.registerListeners()}var t=e.prototype;return t.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},t.onHandlerDestroying=function(){},t.onHandlerDestroyed=function(){},t.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},t.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(d[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},t.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},t.onEvent=function(e,t){this.onEventGeneric(e,t)},t.onEventGeneric=function(e,t){try{(function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)}).call(this,e,t).call()}catch(t){c.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();!function(e){e.MANIFEST="manifest",e.LEVEL="level",e.AUDIO_TRACK="audioTrack",e.SUBTITLE_TRACK="subtitleTrack"}(a||(a={})),function(e){e.MAIN="main",e.AUDIO="audio",e.SUBTITLE="subtitle"}(i||(i={}));var h=r("./src/demux/mp4demuxer.js");var p,v=function(){function e(e,t){this._uri=null,this.baseuri=void 0,this.reluri=void 0,this.method=null,this.key=null,this.iv=null,this.baseuri=e,this.reluri=t}var t;return(t=[{key:"uri",get:function(){return!this._uri&&this.reluri&&(this._uri=Object(o.buildAbsoluteURL)(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();!function(e){e.AUDIO="audio",e.VIDEO="video"}(p||(p={}));var g=function(){function e(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this._elementaryStreams=((e={})[p.AUDIO]=!1,e[p.VIDEO]=!1,e),this.deltaPTS=0,this.rawProgramDateTime=null,this.programDateTime=null,this.title=null,this.tagList=[],this.cc=void 0,this.type=void 0,this.relurl=void 0,this.baseurl=void 0,this.duration=void 0,this.start=void 0,this.sn=0,this.urlId=0,this.level=0,this.levelkey=void 0,this.loader=void 0}var t,r=e.prototype;return r.setByteRange=function(e,t){var r=e.split("@",2),n=[];1===r.length?n[0]=t?t.byteRangeEndOffset:0:n[0]=parseInt(r[1]),n[1]=parseInt(r[0])+n[0],this._byteRange=n},r.addElementaryStream=function(e){this._elementaryStreams[e]=!0},r.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},r.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},r.setDecryptDataFromLevelKey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&((r=new v(e.baseuri,e.reluri)).method=e.method,r.iv=this.createInitializationVector(t)),r},(t=[{key:"url",get:function(){return!this._url&&this.relurl&&(this._url=Object(o.buildAbsoluteURL)(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e}},{key:"byteRange",get:function(){return this._byteRange?this._byteRange:[]}},{key:"byteRangeStartOffset",get:function(){return this.byteRange[0]}},{key:"byteRangeEndOffset",get:function(){return this.byteRange[1]}},{key:"decryptdata",get:function(){if(!this.levelkey&&!this._decryptdata)return null;if(!this._decryptdata&&this.levelkey){var e=this.sn;"number"!=typeof e&&(this.levelkey&&"AES-128"===this.levelkey.method&&!this.levelkey.iv&&c.logger.warn('missing IV for initialization segment with method="'+this.levelkey.method+'" - compliance issue'),e=0),this._decryptdata=this.setDecryptDataFromLevelKey(this.levelkey,e)}return this._decryptdata}},{key:"endProgramDateTime",get:function(){if(null===this.programDateTime)return null;if(!Object(l.isFiniteNumber)(this.programDateTime))return null;var e=Object(l.isFiniteNumber)(this.duration)?this.duration:0;return this.programDateTime+1e3*e}},{key:"encrypted",get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}();var m=function(){function e(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}var t;return(t=[{key:"hasProgramDateTime",get:function(){return!(!this.fragments[0]||!Object(l.isFiniteNumber)(this.fragments[0].programDateTime))}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(e.prototype,t),e}(),y=/^(\d+)x(\d+)$/,b=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,T=function(){function e(t){for(var r in"string"==typeof t&&(t=e.parseAttrList(t)),t)t.hasOwnProperty(r)&&(this[r]=t[r])}var t=e.prototype;return t.decimalInteger=function(e){var t=parseInt(this[e],10);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.hexadecimalIntegerAsNumber=function(e){var t=parseInt(this[e],16);return t>Number.MAX_SAFE_INTEGER?1/0:t},t.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.enumeratedString=function(e){return this[e]},t.decimalResolution=function(e){var t=y.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},e.parseAttrList=function(e){var t,r={};for(b.lastIndex=0;null!==(t=b.exec(e));){var n=t[2];0===n.indexOf('"')&&n.lastIndexOf('"')===n.length-1&&(n=n.slice(1,-1)),r[t[1]]=n}return r},e}(),E={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};function k(e,t){return MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}var S=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,_=/#EXT-X-MEDIA:(.*)/g,C=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),P=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,w=/\.(mp4|m4s|m4v|m4a)$/i,A=function(){function e(){}return e.findGroup=function(e,t){for(var r=0;r<e.length;r++){var n=e[r];if(n.id===t)return n}},e.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},e.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},e.parseMasterPlaylist=function(t,r){var n,a=[];function i(e,t){["video","audio"].forEach(function(r){var n=e.filter(function(e){return function(e,t){var r=E[t];return!!r&&!0===r[e.slice(0,4)]}(e,r)});if(n.length){var a=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[r+"Codec"]=a.length>0?a[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}for(S.lastIndex=0;null!=(n=S.exec(t));){var o={},s=o.attrs=new T(n[1]);o.url=e.resolve(n[2],r);var l=s.decimalResolution("RESOLUTION");l&&(o.width=l.width,o.height=l.height),o.bitrate=s.decimalInteger("AVERAGE-BANDWIDTH")||s.decimalInteger("BANDWIDTH"),o.name=s.NAME,i([].concat((s.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=e.convertAVC1ToAVCOTI(o.videoCodec)),a.push(o)}return a},e.parseMasterPlaylistMedia=function(t,r,n,a){var i;void 0===a&&(a=[]);var o=[],s=0;for(_.lastIndex=0;null!==(i=_.exec(t));){var l=new T(i[1]);if(l.TYPE===n){var u={id:s++,groupId:l["GROUP-ID"],name:l.NAME||l.LANGUAGE,type:n,default:"YES"===l.DEFAULT,autoselect:"YES"===l.AUTOSELECT,forced:"YES"===l.FORCED,lang:l.LANGUAGE};if(l.URI&&(u.url=e.resolve(l.URI,r)),a.length){var c=e.findGroup(a,u.groupId);u.audioCodec=c?c.codec:a[0].codec}o.push(u)}}return o},e.parseLevelPlaylist=function(e,t,r,n,a){var i,o,s,u=0,d=0,f=new m(t),h=0,p=null,y=new g,b=null;for(C.lastIndex=0;null!==(i=C.exec(e));){var E=i[1];if(E){y.duration=parseFloat(E);var k=(" "+i[2]).slice(1);y.title=k||null,y.tagList.push(k?["INF",E,k]:["INF",E])}else if(i[3]){if(Object(l.isFiniteNumber)(y.duration)){var S=u++;y.type=n,y.start=d,s&&(y.levelkey=s),y.sn=S,y.level=r,y.cc=h,y.urlId=a,y.baseurl=t,y.relurl=(" "+i[3]).slice(1),O(y,p),f.fragments.push(y),p=y,d+=y.duration,y=new g}}else if(i[4]){var _=(" "+i[4]).slice(1);p?y.setByteRange(_,p):y.setByteRange(_)}else if(i[5])y.rawProgramDateTime=(" "+i[5]).slice(1),y.tagList.push(["PROGRAM-DATE-TIME",y.rawProgramDateTime]),null===b&&(b=f.fragments.length);else{if(!(i=i[0].match(P))){c.logger.warn("No matches on slow regex match for level playlist!");continue}for(o=1;o<i.length&&void 0===i[o];o++);var A=(" "+i[o+1]).slice(1),R=(" "+i[o+2]).slice(1);switch(i[o]){case"#":y.tagList.push(R?[A,R]:[A]);break;case"PLAYLIST-TYPE":f.type=A.toUpperCase();break;case"MEDIA-SEQUENCE":u=f.startSN=parseInt(A);break;case"TARGETDURATION":f.targetduration=parseFloat(A);break;case"VERSION":f.version=parseInt(A);break;case"EXTM3U":break;case"ENDLIST":f.live=!1;break;case"DIS":h++,y.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":h=parseInt(A);break;case"KEY":var I=new T(A),D=I.enumeratedString("METHOD"),L=I.URI,x=I.hexadecimalInteger("IV");D&&(s=new v(t,L),L&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(D)>=0&&(s.method=D,s.key=null,s.iv=x));break;case"START":var M=new T(A).decimalFloatingPoint("TIME-OFFSET");Object(l.isFiniteNumber)(M)&&(f.startTimeOffset=M);break;case"MAP":var F=new T(A);y.relurl=F.URI,F.BYTERANGE&&y.setByteRange(F.BYTERANGE),y.baseurl=t,y.level=r,y.type=n,y.sn="initSegment",f.initSegment=y,(y=new g).rawProgramDateTime=f.initSegment.rawProgramDateTime;break;default:c.logger.warn("line parsed but not handled: "+i)}}}return(y=p)&&!y.relurl&&(f.fragments.pop(),d-=y.duration),f.totalduration=d,f.averagetargetduration=d/f.fragments.length,f.endSN=u-1,f.startCC=f.fragments[0]?f.fragments[0].cc:0,f.endCC=h,!f.initSegment&&f.fragments.length&&f.fragments.every(function(e){return w.test(e.relurl)})&&(c.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),(y=new g).relurl=f.fragments[0].relurl,y.baseurl=t,y.level=r,y.type=n,y.sn="initSegment",f.initSegment=y,f.needSidxRanges=!0),b&&function(e,t){for(var r=e[t],n=t-1;n>=0;n--){var a=e[n];a.programDateTime=r.programDateTime-1e3*a.duration,r=a}}(f.fragments,b),f},e}();function O(e,t){e.rawProgramDateTime?e.programDateTime=Date.parse(e.rawProgramDateTime):t&&t.programDateTime&&(e.programDateTime=t.endProgramDateTime),Object(l.isFiniteNumber)(e.programDateTime)||(e.programDateTime=null,e.rawProgramDateTime=null)}var R=window.performance,I=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADING,u.default.LEVEL_LOADING,u.default.AUDIO_TRACK_LOADING,u.default.SUBTITLE_TRACK_LOADING)||this).loaders={},r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.canHaveQualityLevels=function(e){return e!==a.AUDIO_TRACK&&e!==a.SUBTITLE_TRACK},n.mapContextToLevelType=function(e){switch(e.type){case a.AUDIO_TRACK:return i.AUDIO;case a.SUBTITLE_TRACK:return i.SUBTITLE;default:return i.MAIN}},n.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r};var o=n.prototype;return o.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,a=new(r||n)(t);return e.loader=a,this.loaders[e.type]=a,a},o.getInternalLoader=function(e){return this.loaders[e.type]},o.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},o.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},o.destroy=function(){this.destroyInternalLoaders(),e.prototype.destroy.call(this)},o.onManifestLoading=function(e){this.load({url:e.url,type:a.MANIFEST,level:0,id:null,responseType:"text"})},o.onLevelLoading=function(e){this.load({url:e.url,type:a.LEVEL,level:e.level,id:e.id,responseType:"text"})},o.onAudioTrackLoading=function(e){this.load({url:e.url,type:a.AUDIO_TRACK,level:null,id:e.id,responseType:"text"})},o.onSubtitleTrackLoading=function(e){this.load({url:e.url,type:a.SUBTITLE_TRACK,level:null,id:e.id,responseType:"text"})},o.load=function(e){var t=this.hls.config;c.logger.debug("Loading playlist of type "+e.type+", level: "+e.level+", id: "+e.id);var r,n,i,o,s=this.getInternalLoader(e);if(s){var l=s.context;if(l&&l.url===e.url)return c.logger.trace("playlist request ongoing"),!1;c.logger.warn("aborting previous loader for type: "+e.type),s.abort()}switch(e.type){case a.MANIFEST:r=t.manifestLoadingMaxRetry,n=t.manifestLoadingTimeOut,i=t.manifestLoadingRetryDelay,o=t.manifestLoadingMaxRetryTimeout;break;case a.LEVEL:r=0,o=0,i=0,n=t.levelLoadingTimeOut;break;default:r=t.levelLoadingMaxRetry,n=t.levelLoadingTimeOut,i=t.levelLoadingRetryDelay,o=t.levelLoadingMaxRetryTimeout}s=this.createInternalLoader(e);var u={timeout:n,maxRetry:r,retryDelay:i,maxRetryDelay:o},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return c.logger.debug("Calling internal loader delegate for URL: "+e.url),s.load(e,u,d),!0},o.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);if(this.resetInternalLoader(r.type),"string"!=typeof e.data)throw new Error('expected responseType of "text" for PlaylistLoader');var a=e.data;t.tload=R.now(),0===a.indexOf("#EXTM3U")?a.indexOf("#EXTINF:")>0||a.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n):this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n)},o.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},o.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},o._handleMasterPlaylist=function(e,t,r,a){var i=this.hls,o=e.data,s=n.getResponseUrl(e,r),l=A.parseMasterPlaylist(o,s);if(l.length){var d=l.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),f=A.parseMasterPlaylistMedia(o,s,"AUDIO",d),h=A.parseMasterPlaylistMedia(o,s,"SUBTITLES");if(f.length){var p=!1;f.forEach(function(e){e.url||(p=!0)}),!1===p&&l[0].audioCodec&&!l[0].attrs.AUDIO&&(c.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),f.unshift({type:"main",name:"main",default:!1,autoselect:!1,forced:!1,id:-1}))}i.trigger(u.default.MANIFEST_LOADED,{levels:l,audioTracks:f,subtitles:h,url:s,stats:t,networkDetails:a})}else this._handleManifestParsingError(e,r,"no level found in manifest",a)},o._handleTrackOrLevelPlaylist=function(e,t,r,i){var o=this.hls,s=r.id,c=r.level,d=r.type,f=n.getResponseUrl(e,r),h=Object(l.isFiniteNumber)(s)?s:0,p=Object(l.isFiniteNumber)(c)?c:h,v=n.mapContextToLevelType(r),g=A.parseLevelPlaylist(e.data,f,p,v,h);if(g.tload=t.tload,d===a.MANIFEST){var m={url:f,details:g};o.trigger(u.default.MANIFEST_LOADED,{levels:[m],audioTracks:[],url:f,stats:t,networkDetails:i})}if(t.tparsed=R.now(),g.needSidxRanges){var y=g.initSegment.url;this.load({url:y,isSidxRequest:!0,type:d,level:c,levelDetails:g,id:s,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}else r.levelDetails=g,this._handlePlaylistLoaded(e,t,r,i)},o._handleSidxRequest=function(e,t){if("string"==typeof e.data)throw new Error("sidx request must be made with responseType of array buffer");var r=h.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,a=t.levelDetails;n.forEach(function(e,t){var r=e.info;if(a){var n=a.fragments[t];0===n.byteRange.length&&n.setByteRange(String(1+r.end-r.start)+"@"+String(r.start))}}),a&&a.initSegment.setByteRange(String(r.moovEndOffset)+"@0")}},o._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},o._handleNetworkError=function(e,t,r,n){var i,o;void 0===r&&(r=!1),void 0===n&&(n=null),c.logger.info("A network error occured while loading a "+e.type+"-type playlist");var l=this.getInternalLoader(e);switch(e.type){case a.MANIFEST:i=r?s.ErrorDetails.MANIFEST_LOAD_TIMEOUT:s.ErrorDetails.MANIFEST_LOAD_ERROR,o=!0;break;case a.LEVEL:i=r?s.ErrorDetails.LEVEL_LOAD_TIMEOUT:s.ErrorDetails.LEVEL_LOAD_ERROR,o=!1;break;case a.AUDIO_TRACK:i=r?s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,o=!1;break;default:o=!1}l&&(l.abort(),this.resetInternalLoader(e.type));var d={type:s.ErrorTypes.NETWORK_ERROR,details:i,fatal:o,url:e.url,loader:l,context:e,networkDetails:t};n&&(d.response=n),this.hls.trigger(u.default.ERROR,d)},o._handlePlaylistLoaded=function(e,t,r,i){var o=r.type,s=r.level,l=r.id,c=r.levelDetails;if(c&&c.targetduration)if(n.canHaveQualityLevels(r.type))this.hls.trigger(u.default.LEVEL_LOADED,{details:c,level:s||0,id:l||0,stats:t,networkDetails:i});else switch(o){case a.AUDIO_TRACK:this.hls.trigger(u.default.AUDIO_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:i});break;case a.SUBTITLE_TRACK:this.hls.trigger(u.default.SUBTITLE_TRACK_LOADED,{details:c,id:l,stats:t,networkDetails:i})}else this._handleManifestParsingError(e,r,"invalid target duration",i)},n}(f),D=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.FRAG_LOADING)||this).loaders={},r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){var t=this.loaders;for(var r in t){var n=t[r];n&&n.destroy()}this.loaders={},e.prototype.destroy.call(this)},a.onFragLoading=function(e){var t=e.frag,r=t.type,n=this.loaders,a=this.hls.config,i=a.fLoader,o=a.loader;t.loaded=0;var s,u,d,f=n[r];f&&(c.logger.warn("abort previous fragment loader for type: "+r),f.abort()),f=n[r]=t.loader=a.fLoader?new i(a):new o(a),s={url:t.url,frag:t,responseType:"arraybuffer",progressData:!1};var h=t.byteRangeStartOffset,p=t.byteRangeEndOffset;Object(l.isFiniteNumber)(h)&&Object(l.isFiniteNumber)(p)&&(s.rangeStart=h,s.rangeEnd=p),u={timeout:a.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:a.fragLoadingMaxRetryTimeout},d={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},f.load(s,u,d)},a.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var a=e.data,i=r.frag;i.loader=void 0,this.loaders[i.type]=void 0,this.hls.trigger(u.default.FRAG_LOADED,{payload:a,frag:i,stats:t,networkDetails:n})},a.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},a.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,a=n.loader;a&&a.abort(),this.loaders[n.type]=void 0,this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},a.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var a=t.frag;a.loaded=e.loaded,this.hls.trigger(u.default.FRAG_LOAD_PROGRESS,{frag:a,stats:e,networkDetails:n})},n}(f),L=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.KEY_LOADING)||this).loaders={},r.decryptkey=null,r.decrypturl=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){for(var t in this.loaders){var r=this.loaders[t];r&&r.destroy()}this.loaders={},e.prototype.destroy.call(this)},a.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r];if(t.decryptdata){var a=t.decryptdata.uri;if(a!==this.decrypturl||null===this.decryptkey){var i=this.hls.config;if(n&&(c.logger.warn("abort previous key loader for type:"+r),n.abort()),!a)return void c.logger.warn("key uri is falsy");t.loader=this.loaders[r]=new i.loader(i),this.decrypturl=a,this.decryptkey=null;var o={url:a,frag:t,responseType:"arraybuffer"},s={timeout:i.fragLoadingTimeOut,maxRetry:0,retryDelay:i.fragLoadingRetryDelay,maxRetryDelay:i.fragLoadingMaxRetryTimeout},l={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};t.loader.load(o,s,l)}else this.decryptkey&&(t.decryptdata.key=this.decryptkey,this.hls.trigger(u.default.KEY_LOADED,{frag:t}))}else c.logger.warn("Missing decryption data on fragment in onKeyLoading")},a.loadsuccess=function(e,t,r){var n=r.frag;n.decryptdata?(this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,delete this.loaders[n.type],this.hls.trigger(u.default.KEY_LOADED,{frag:n})):c.logger.error("after key load, decryptdata unset")},a.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},a.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),delete this.loaders[r.type],this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.NETWORK_ERROR,details:s.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},n}(f),x="NOT_LOADED",M="APPENDING",F="PARTIAL",N=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.BUFFER_APPENDED,u.default.FRAG_BUFFERED,u.default.FRAG_LOADED)||this).bufferPadding=.2,r.fragments=Object.create(null),r.timeRanges=Object.create(null),r.config=t.config,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,f.prototype.destroy.call(this),e.prototype.destroy.call(this)},a.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter(function(n){var a=r[n];if(a.body.type!==t)return!1;if(!a.buffered)return!1;var i=a.body;return i.startPTS<=e&&e<=i.endPTS});if(0===n.length)return null;var a=n.pop();return r[a].body},a.detectEvictedFragments=function(e,t){var r,n,a=this;Object.keys(this.fragments).forEach(function(i){var o=a.fragments[i];if(!0===o.buffered){var s=o.range[e];if(s){r=s.time;for(var l=0;l<r.length;l++)if(n=r[l],!1===a.isTimeBuffered(n.startPTS,n.endPTS,t)){a.removeFragment(o.body);break}}}})},a.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(e.hasElementaryStream(r)){var a=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,a)}}))},a.getBufferedTimes=function(e,t,r){for(var n,a,i=[],o=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,a=r.end(s)+this.bufferPadding,e>=n&&t<=a){i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<a&&t>n)i.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),o=!0;else if(t<=n)break}return{time:i,partial:o}},a.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},a.getPartialFragment=function(e){var t,r,n,a=this,i=null,o=0;return Object.keys(this.fragments).forEach(function(s){var l=a.fragments[s];a.isPartial(l)&&(r=l.body.startPTS-a.bufferPadding,n=l.body.endPTS+a.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),o<=t&&(i=l.body,o=t)))}),i},a.getState=function(e){var t=this.getFragmentKey(e),r=this.fragments[t],n=x;return void 0!==r&&(n=r.buffered?!0===this.isPartial(r)?F:"OK":M),n},a.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},a.isTimeBuffered=function(e,t,r){for(var n,a,i=0;i<r.length;i++){if(n=r.start(i)-this.bufferPadding,a=r.end(i)+this.bufferPadding,e>=n&&t<=a)return!0;if(t<=n)return!1}return!1},a.onFragLoaded=function(e){var t=e.frag;Object(l.isFiniteNumber)(t.sn)&&!t.bitrateTest&&(this.fragments[this.getFragmentKey(t)]={body:t,range:Object.create(null),buffered:!1})},a.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)})},a.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},a.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},a.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},a.removeAllFragments=function(){this.fragments=Object.create(null)},n}(f),B=function(e,t){for(var r=0,n=e.length-1,a=null,i=null;r<=n;){var o=t(i=e[a=(r+n)/2|0]);if(o>0)r=a+1;else{if(!(o<0))return i;n=a-1}}return null},j=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n,a=e.buffered,i=[];for(n=0;n<a.length;n++)i.push({start:a.start(n),end:a.end(n)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){e.sort(function(e,t){return e.start-t.start||t.end-e.end});var n=[];if(r)for(var a=0;a<e.length;a++){var i=n.length;if(i){var o=n[i-1].end;e[a].start-o<r?e[a].end>o&&(n[i-1].end=e[a].end):n.push(e[a])}else n.push(e[a])}else n=e;for(var s,l=0,u=t,c=t,d=0;d<n.length;d++){var f=n[d].start,h=n[d].end;if(t+r>=f&&t<h)u=f,l=(c=h)-t;else if(t+r<f){s=f;break}}return{len:l,start:u,end:c,nextStart:s}},e}(),U=r("./node_modules/eventemitter3/index.js"),V=r("./node_modules/webworkify-webpack/index.js"),G=r("./src/demux/demuxer-inline.js");function H(){return window.MediaSource||window.WebKitMediaSource}var K=r("./src/utils/get-self-scope.js"),W=function(e){var t,r;function n(){return e.apply(this,arguments)||this}return r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.prototype.trigger=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];this.emit.apply(this,[e,e].concat(r))},n}(U.EventEmitter),Y=Object(K.getSelfScope)(),q=H()||{isTypeSupported:function(){return!1}},z=function(){function e(e,t){var r=this;this.hls=e,this.id=t;var n=this.observer=new W,a=e.config,i=function(t,n){(n=n||{}).frag=r.frag,n.id=r.id,e.trigger(t,n)};n.on(u.default.FRAG_DECRYPTED,i),n.on(u.default.FRAG_PARSING_INIT_SEGMENT,i),n.on(u.default.FRAG_PARSING_DATA,i),n.on(u.default.FRAG_PARSED,i),n.on(u.default.ERROR,i),n.on(u.default.FRAG_PARSING_METADATA,i),n.on(u.default.FRAG_PARSING_USERDATA,i),n.on(u.default.INIT_PTS_FOUND,i);var o={mp4:q.isTypeSupported("video/mp4"),mpeg:q.isTypeSupported("audio/mpeg"),mp3:q.isTypeSupported('audio/mp4; codecs="mp3"')},l=navigator.vendor;if(a.enableWorker&&"undefined"!=typeof Worker){var d;c.logger.log("demuxing in webworker");try{d=this.w=V("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),d.addEventListener("message",this.onwmsg),d.onerror=function(t){e.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},d.postMessage({cmd:"init",typeSupported:o,vendor:l,id:t,config:JSON.stringify(a)})}catch(e){c.logger.warn("Error in worker:",e),c.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),d&&Y.URL.revokeObjectURL(d.objectURL),this.demuxer=new G.default(n,o,a,l),this.w=void 0}}else this.demuxer=new G.default(n,o,a,l)}var t=e.prototype;return t.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.push=function(e,t,r,n,a,i,o,s){var u=this.w,d=Object(l.isFiniteNumber)(a.startPTS)?a.startPTS:a.start,f=a.decryptdata,h=this.frag,p=!(h&&a.cc===h.cc),v=!(h&&a.level===h.level),g=h&&a.sn===h.sn+1,m=!v&&g;if(p&&c.logger.log(this.id+":discontinuity detected"),v&&c.logger.log(this.id+":switch detected"),this.frag=a,u)u.postMessage({cmd:"demux",data:e,decryptdata:f,initSegment:t,audioCodec:r,videoCodec:n,timeOffset:d,discontinuity:p,trackSwitch:v,contiguous:m,duration:i,accurateTimeOffset:o,defaultInitPTS:s},e instanceof ArrayBuffer?[e]:[]);else{var y=this.demuxer;y&&y.push(e,f,t,r,n,d,p,v,m,i,o,s)}},t.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":Y.URL.revokeObjectURL(this.w.objectURL);break;case u.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},e}();function X(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function Q(e,t,r){var n=e[t],a=e[r],i=a.startPTS;Object(l.isFiniteNumber)(i)?r>t?(n.duration=i-n.start,n.duration<0&&c.logger.warn("negative duration computed for frag "+n.sn+",level "+n.level+", there should be some duration drift between playlist and fragment!")):(a.duration=n.start-i,a.duration<0&&c.logger.warn("negative duration computed for frag "+a.sn+",level "+a.level+", there should be some duration drift between playlist and fragment!")):a.start=r>t?n.start+n.duration:Math.max(n.start-a.duration,0)}function J(e,t,r,n,a,i){var o=r;if(Object(l.isFiniteNumber)(t.startPTS)){var s=Math.abs(t.startPTS-r);Object(l.isFiniteNumber)(t.deltaPTS)?t.deltaPTS=Math.max(s,t.deltaPTS):t.deltaPTS=s,o=Math.max(r,t.startPTS),r=Math.min(r,t.startPTS),n=Math.max(n,t.endPTS),a=Math.min(a,t.startDTS),i=Math.max(i,t.endDTS)}var u=r-t.start;t.start=t.startPTS=r,t.maxStartPTS=o,t.endPTS=n,t.startDTS=a,t.endDTS=i,t.duration=n-r;var c,d,f,h=t.sn;if(!e||h<e.startSN||h>e.endSN)return 0;for(c=h-e.startSN,(d=e.fragments)[c]=t,f=c;f>0;f--)Q(d,f,f-1);for(f=c;f<d.length-1;f++)Q(d,f,f+1);return e.PTSKnown=!0,u}function Z(e,t){t.initSegment&&e.initSegment&&(t.initSegment=e.initSegment);var r,n=0;if($(e,t,function(e,a){n=e.cc-a.cc,Object(l.isFiniteNumber)(e.startPTS)&&(a.start=a.startPTS=e.startPTS,a.endPTS=e.endPTS,a.duration=e.duration,a.backtracked=e.backtracked,a.dropped=e.dropped,r=a),t.PTSKnown=!0}),t.PTSKnown){if(n){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var a=t.fragments,i=0;i<a.length;i++)a[i].cc+=n}r?J(t,r,r.startPTS,r.endPTS,r.startDTS,r.endDTS):function(e,t){var r=t.startSN-e.startSN,n=e.fragments,a=t.fragments;if(!(r<0||r>n.length))for(var i=0;i<a.length;i++)a[i].start+=n[r].start}(e,t),t.PTSKnown=e.PTSKnown}}function $(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,a=Math.min(e.endSN,t.endSN)-t.startSN,i=t.startSN-e.startSN,o=n;o<=a;o++){var s=e.fragments[i+o],l=t.fragments[o];if(!s||!l)break;r(s,l,o)}}function ee(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),a=n/2;return e&&t.endSN===e.endSN&&(n=a),r&&(n=Math.max(a,n-(window.performance.now()-r))),Math.round(n)}var te=function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t};function re(e,t){t.fragments.forEach(function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}),t.PTSKnown=!0}function ne(e,t,r){!function(e,t,r){if(function(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}(e,r,t)){var n=function(e,t){var r=e.fragments,n=t.fragments;if(n.length&&r.length){var a=function(e,t){for(var r=null,n=0;n<e.length;n+=1){var a=e[n];if(a&&a.cc===t){r=a;break}}return r}(r,n[0].cc);if(a&&(!a||a.startPTS))return a;c.logger.log("No frag in previous level to align on")}else c.logger.log("No fragments to align")}(r.details,t);n&&(c.logger.log("Adjusting PTS using last level due to CC increase within current level"),re(n.start,t))}}(e,r,t),!r.PTSKnown&&t&&function(e,t){if(t&&t.fragments.length){if(!e.hasProgramDateTime||!t.hasProgramDateTime)return;var r=t.fragments[0].programDateTime,n=(e.fragments[0].programDateTime-r)/1e3+t.fragments[0].start;Object(l.isFiniteNumber)(n)&&(c.logger.log("adjusting PTS using programDateTime delta, sliding:"+n.toFixed(3)),re(n,e))}}(r,t.details)}function ae(e,t,r){if(null===t||!Array.isArray(e)||!e.length||!Object(l.isFiniteNumber)(t))return null;if(t<(e[0].programDateTime||0))return null;if(t>=(e[e.length-1].endProgramDateTime||0))return null;r=r||0;for(var n=0;n<e.length;++n){var a=e[n];if(se(t,r,a))return a}return null}function ie(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var a=e?t[e.sn-t[0].sn+1]:null;return a&&!oe(r,n,a)?a:B(t,oe.bind(null,r,n))}function oe(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function se(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return(r.endProgramDateTime||0)-n>e}var le=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.nudgeRetry=0,this.stallReported=!1,this.stalled=null,this.moved=!1,this.seeking=!1}var t=e.prototype;return t.poll=function(e){var t=this.config,r=this.media,n=this.stalled,a=r.currentTime,i=r.seeking,o=this.seeking&&!i,s=!this.seeking&&i;if(this.seeking=i,a===e){if((s||o)&&(this.stalled=null),!r.paused&&!r.ended&&0!==r.playbackRate&&r.buffered.length){var l=j.bufferInfo(r,a,0),u=l.len>0,d=l.nextStart||0;if(u||d){if(i){if(l.len>2||!d||d-a>2)return;this.moved=!1}if(!this.moved&&this.stalled){var f=Math.max(d,l.start||0)-a;if(f>0&&f<=2)return void this._trySkipBufferHole(null)}var h=self.performance.now();if(null!==n){var p=h-n;!i&&p>=250&&this._reportStall(l.len);var v=j.bufferInfo(r,a,t.maxBufferHole);this._tryFixBufferStall(v,p)}else this.stalled=h}}}else if(this.moved=!0,null!==n){if(this.stallReported){var g=self.performance.now()-n;c.logger.warn("playback not stuck anymore @"+a+", after "+Math.round(g)+"ms"),this.stallReported=!1}this.stalled=null,this.nudgeRetry=0}},t._tryFixBufferStall=function(e,t){var r=this.config,n=this.fragmentTracker,a=this.media.currentTime,i=n.getPartialFragment(a);i&&this._trySkipBufferHole(i)||e.len>r.maxBufferHole&&t>1e3*r.highBufferWatchdogPeriod&&(c.logger.warn("Trying to nudge playhead over buffer-hole"),this.stalled=null,this._tryNudgeBuffer())},t._reportStall=function(e){var t=this.hls,r=this.media;this.stallReported||(this.stallReported=!0,c.logger.warn("Playback stalling at @"+r.currentTime+" due to low buffer"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},t._trySkipBufferHole=function(e){for(var t=this.config,r=this.hls,n=this.media,a=n.currentTime,i=0,o=0;o<n.buffered.length;o++){var l=n.buffered.start(o);if(a+t.maxBufferHole>=i&&a<l){var d=Math.max(l+.05,n.currentTime+.1);return c.logger.warn("skipping hole, adjusting currentTime from "+a+" to "+d),this.moved=!0,this.stalled=null,n.currentTime=d,e&&r.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+a+" to "+d,frag:e}),d}i=n.buffered.end(o)}return 0},t._tryNudgeBuffer=function(){var e=this.config,t=this.hls,r=this.media,n=r.currentTime,a=(this.nudgeRetry||0)+1;if(this.nudgeRetry=a,a<e.nudgeMaxRetry){var i=n+a*e.nudgeOffset;c.logger.warn("Nudging 'currentTime' from "+n+" to "+i),r.currentTime=i,t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else c.logger.error("Playhead still not moving while enough data buffered @"+n+" after "+e.nudgeMaxRetry+" nudges"),t.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}(),ue=function(e){var t,r;function n(t){for(var r,n=arguments.length,a=new Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return(r=e.call.apply(e,[this,t].concat(a))||this)._boundTick=void 0,r._tickTimer=null,r._tickInterval=null,r._tickCallCount=0,r._boundTick=r.tick.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},a.hasInterval=function(){return!!this._tickInterval},a.hasNextTick=function(){return!!this._tickTimer},a.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=self.setInterval(this._boundTick,e),!0)},a.clearInterval=function(){return!!this._tickInterval&&(self.clearInterval(this._tickInterval),this._tickInterval=null,!0)},a.clearNextTick=function(){return!!this._tickTimer&&(self.clearTimeout(this._tickTimer),this._tickTimer=null,!0)},a.tick=function(){this._tickCallCount++,1===this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=self.setTimeout(this._boundTick,0)),this._tickCallCount=0)},a.doTick=function(){},n}(f),ce="STOPPED",de="STARTING",fe="IDLE",he="KEY_LOADING",pe="FRAG_LOADING",ve="FRAG_LOADING_WAITING_RETRY",ge="WAITING_TRACK",me="PARSING",ye="PARSED",be="BUFFER_FLUSHING",Te="ENDED",Ee="ERROR",ke="WAITING_INIT_PTS",Se="WAITING_LEVEL",_e=function(e){var t,r;function n(){return e.apply(this,arguments)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.doTick=function(){},a.startLoad=function(){},a.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=ce},a._streamEnded=function(e,t){var r=this.fragCurrent,n=this.fragmentTracker;if(!t.live&&r&&!r.backtracked&&r.sn===t.endSN&&!e.nextStart){var a=n.getState(r);return a===F||"OK"===a}return!1},a.onMediaSeeking=function(){var e=this.config,t=this.media,r=this.mediaBuffer,n=this.state,a=t?t.currentTime:null,i=j.bufferInfo(r||t,a,this.config.maxBufferHole);if(Object(l.isFiniteNumber)(a)&&c.logger.log("media seeking to "+a.toFixed(3)),n===pe){var o=this.fragCurrent;if(0===i.len&&o){var s=e.maxFragLookUpTolerance,u=o.start-s,d=o.start+o.duration+s;a<u||a>d?(o.loader&&(c.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),o.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=fe):c.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else n===Te&&(0===i.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=fe);t&&(this.lastCurrentTime=a),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=a),this.tick()},a.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},a.onHandlerDestroying=function(){this.stopLoad(),e.prototype.onHandlerDestroying.call(this)},a.onHandlerDestroyed=function(){this.state=ce,this.fragmentTracker=null},a.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},n}(ue);var Ce=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.LEVEL_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_LOAD_EMERGENCY_ABORTED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_SWITCHED,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED)||this).fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=ce,n.stallReported=!1,n.gapController=null,n.altAudio=!1,n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,o=n.prototype;return o.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(c.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=fe,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=ce},o.stopLoad=function(){this.forceStartLoad=!1,e.prototype.stopLoad.call(this)},o.doTick=function(){switch(this.state){case be:this.fragLoadError=0;break;case fe:this._doTickIdle();break;case Se:var e=this.levels[this.level];e&&e.details&&(this.state=fe);break;case ve:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(c.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=fe)}this._checkBuffer(),this._checkFragmentChanged()},o._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var a=e.nextLoadLevel,i=this.levels[a];if(i){var o,s=i.bitrate;o=s?Math.max(8*t.maxBufferSize/s,t.maxBufferLength):t.maxBufferLength,o=Math.min(o,t.maxMaxBufferLength);var l=j.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),d=l.len;if(!(d>=o)){c.logger.trace("buffer length of "+d.toFixed(3)+" is below max of "+o.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=a;var f=i.details;if(!f||f.live&&this.levelLastLoaded!==a)this.state=Se;else{if(this._streamEnded(l,f)){var h={};return this.altAudio&&(h.type="video"),this.hls.trigger(u.default.BUFFER_EOS,h),void(this.state=Te)}this._fetchPayloadOrEos(n,l,f)}}}}},o._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,a=this.level,i=r.fragments,o=i.length;if(0!==o){var s,l=i[0].start,u=i[o-1].start+i[o-1].duration,d=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var f=this.config.initialLiveManifestSize;if(o<f)return void c.logger.warn("Can not start playback of a level, reason: not enough fragments "+o+" < "+f);if(null===(s=this._ensureFragmentAtLivePoint(r,d,l,u,n,i,o)))return}else d<l&&(s=i[0]);s||(s=this._findFragment(l,n,o,i,d,u,r)),s&&(s.encrypted?(c.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a),this._loadKey(s)):(c.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+a+", currentTime:"+e.toFixed(3)+",bufferEnd:"+d.toFixed(3)),this._loadFragment(s)))}},o._ensureFragmentAtLivePoint=function(e,t,r,n,a,i,o){var s,l=this.hls.config,u=this.media,d=void 0!==l.liveMaxLatencyDuration?l.liveMaxLatencyDuration:l.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-l.maxFragLookUpTolerance,n-d)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);t=f,u&&!u.paused&&u.readyState&&u.duration>f&&f>u.currentTime&&(c.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),u.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(a)if(e.hasProgramDateTime)c.logger.log("live playlist, switching playlist, load frag with same PDT: "+a.programDateTime),s=ae(i,a.endProgramDateTime,l.maxFragLookUpTolerance);else{var h=a.sn+1;if(h>=e.startSN&&h<=e.endSN){var p=i[h-e.startSN];a.cc===p.cc&&(s=p,c.logger.log("live playlist, switching playlist, load frag with next SN: "+s.sn))}s||(s=B(i,function(e){return a.cc-e.cc}))&&c.logger.log("live playlist, switching playlist, load frag with same CC: "+s.sn)}s||(s=i[Math.min(o-1,Math.round(o/2))],c.logger.log("live playlist, switching playlist, unknown, load middle frag : "+s.sn))}return s},o._findFragment=function(e,t,r,n,a,i,o){var s,l=this.hls.config;if(s=a<i?ie(t,n,a,a>i-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance):n[r-1]){var u=s.sn-o.startSN,d=t&&s.level===t.level,f=n[u-1],h=n[u+1];if(t&&s.sn===t.sn)if(d&&!s.backtracked)if(s.sn<o.endSN){var p=t.deltaPTS;p&&p>l.maxBufferHole&&t.dropped&&u?(s=f,c.logger.warn("Previous fragment was dropped with large PTS gap between audio and video. Maybe fragment is not starting with a keyframe? Loading previous one to try to overcome this")):(s=h,c.logger.log("Re-loading fragment with SN: "+s.sn))}else s=null;else s.backtracked&&(h&&h.backtracked?(c.logger.warn("Already backtracked from fragment "+h.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+h.sn),s=h):(c.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f).backtracked=!0:u&&(s=null)))}return s},o._loadKey=function(e){this.state=he,this.hls.trigger(u.default.KEY_LOADING,{frag:e})},o._loadFragment=function(e){var t=this.fragmentTracker.getState(e);this.fragCurrent=e,"initSegment"!==e.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(e.sn)&&!e.bitrateTest&&(this.nextLoadPosition=e.start+e.duration),e.backtracked||t===x||t===F?(e.autoLevel=this.hls.autoLevelEnabled,e.bitrateTest=this.bitrateTest,this.hls.trigger(u.default.FRAG_LOADING,{frag:e}),this.demuxer||(this.demuxer=new z(this.hls,"main")),this.state=pe):t===M&&this._reduceMaxBufferLength(e.duration)&&this.fragmentTracker.removeFragment(e)},o.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,i.MAIN)},o.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},o._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&((t=r.currentTime)>this.lastCurrentTime&&(this.lastCurrentTime=t),j.isBuffered(r,t)?e=this.getBufferedFrag(t):j.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(u.default.FRAG_CHANGED,{frag:n});var a=n.level;this.fragPlaying&&this.fragPlaying.level===a||this.hls.trigger(u.default.LEVEL_SWITCHED,{level:a}),this.fragPlaying=n}}},o.immediateLevelSwitch=function(){if(c.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var e,t=this.media;t?(e=t.paused,t.pause()):e=!0,this.previouslyPaused=e}var r=this.fragCurrent;r&&r.loader&&r.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)},o.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,j.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},o.nextLevelSwitch=function(){var e=this.media;if(e&&e.readyState){var t,r,n;if((r=this.getBufferedFrag(e.currentTime))&&r.startPTS>1&&this.flushMainBuffer(0,r.startPTS-1),e.paused)t=0;else{var a=this.hls.nextLoadLevel,i=this.levels[a],o=this.fragLastKbps;t=o&&this.fragCurrent?this.fragCurrent.duration*i.bitrate/(1e3*o)+1:0}if((n=this.getBufferedFrag(e.currentTime+t))&&(n=this.followingBufferedFrag(n))){var s=this.fragCurrent;s&&s.loader&&s.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(n.maxStartPTS,Number.POSITIVE_INFINITY)}}},o.flushMainBuffer=function(e,t){this.state=be;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(u.default.BUFFER_FLUSHING,r)},o.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new le(r,t,this.fragmentTracker,this.hls)},o.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.fragmentTracker.removeAllFragments(),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},o.onMediaSeeked=function(){var e=this.media,t=e?e.currentTime:void 0;Object(l.isFiniteNumber)(t)&&c.logger.log("media seeked to "+t.toFixed(3)),this.tick()},o.onManifestLoading=function(){c.logger.log("trigger BUFFER_RESET"),this.hls.trigger(u.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},o.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&c.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.altAudio=e.altAudio,this.levels=e.levels,this.startFragRequested=!1;var a=this.config;(a.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(a.startPosition)},o.onLevelLoaded=function(e){var t=e.details,r=e.level,n=this.levels[this.levelLastLoaded],a=this.levels[r],i=t.totalduration,o=0;if(c.logger.log("level "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+i),t.live){var s=a.details;s&&t.fragments.length>0?(Z(s,t),o=t.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(o,s),t.PTSKnown&&Object(l.isFiniteNumber)(o)?c.logger.log("live playlist sliding:"+o.toFixed(3)):(c.logger.log("live playlist - outdated PTS, unknown sliding"),ne(this.fragPrevious,n,t))):(c.logger.log("live playlist - first load, unknown sliding"),t.PTSKnown=!1,ne(this.fragPrevious,n,t))}else t.PTSKnown=!1;if(a.details=t,this.levelLastLoaded=r,this.hls.trigger(u.default.LEVEL_UPDATED,{details:t,level:r}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var d=t.startTimeOffset;Object(l.isFiniteNumber)(d)?(d<0&&(c.logger.log("negative start time offset "+d+", count from end of last fragment"),d=o+i+d),c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):t.live?(this.startPosition=this.computeLivePosition(o,t),c.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===Se&&(this.state=fe),this.tick()},o.onKeyLoaded=function(){this.state===he&&(this.state=fe,this.tick())},o.onFragLoaded=function(e){var t=this.fragCurrent,r=this.hls,n=this.levels,a=this.media,i=e.frag;if(this.state===pe&&t&&"main"===i.type&&i.level===t.level&&i.sn===t.sn){var o=e.stats,s=n[t.level],l=s.details;if(this.bitrateTest=!1,this.stats=o,c.logger.log("Loaded "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level),i.bitrateTest&&r.nextLoadLevel)this.state=fe,this.startFragRequested=!1,o.tparsed=o.tbuffered=window.performance.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else if("initSegment"===i.sn)this.state=fe,o.tparsed=o.tbuffered=window.performance.now(),l.initSegment.data=e.payload,r.trigger(u.default.FRAG_BUFFERED,{stats:o,frag:t,id:"main"}),this.tick();else{c.logger.log("Parsing "+t.sn+" of ["+l.startSN+" ,"+l.endSN+"],level "+t.level+", cc "+t.cc),this.state=me,this.pendingBuffering=!0,this.appended=!1,i.bitrateTest&&(i.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:i}));var d=!(a&&a.seeking)&&(l.PTSKnown||!l.live),f=l.initSegment?l.initSegment.data:[],h=this._getAudioCodec(s);(this.demuxer=this.demuxer||new z(this.hls,"main")).push(e.payload,f,h,s.videoCodec,t,l.totalduration,d)}}this.fragLoadError=0},o.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===me){var n,a,i=e.tracks;if(i.audio&&this.altAudio&&delete i.audio,a=i.audio){var o=this.levels[this.level].audioCodec,s=navigator.userAgent.toLowerCase();o&&this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),o=-1!==o.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==a.metadata.channelCount&&-1===s.indexOf("firefox")&&(o="mp4a.40.5"),-1!==s.indexOf("android")&&"audio/mpeg"!==a.container&&(o="mp4a.40.2",c.logger.log("Android: force audio codec to "+o)),a.levelCodec=o,a.id=e.id}for(n in(a=i.video)&&(a.levelCodec=this.levels[this.level].videoCodec,a.id=e.id),this.hls.trigger(u.default.BUFFER_CODECS,i),i){a=i[n],c.logger.log("main track:"+n+",container:"+a.container+",codecs[level/parsed]=["+a.levelCodec+"/"+a.codec+"]");var l=a.initSegment;l&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,{type:n,data:l,parent:"main",content:"initSegment"}))}this.tick()}},o.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"main"===e.id&&n.sn===r.sn&&n.level===r.level&&("audio"!==e.type||!this.altAudio)&&this.state===me){var a=this.levels[this.level],i=r;if(Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),!0===e.hasAudio&&i.addElementaryStream(p.AUDIO),!0===e.hasVideo&&i.addElementaryStream(p.VIDEO),c.logger.log("Parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb+",dropped:"+(e.dropped||0)),"video"===e.type)if(i.dropped=e.dropped,i.dropped)if(i.backtracked)c.logger.warn("Already backtracked on this fragment, appending with the gap",i.sn);else{var o=a.details;if(!o||i.sn!==o.startSN)return c.logger.warn("missing video frame(s), backtracking fragment",i.sn),this.fragmentTracker.removeFragment(i),i.backtracked=!0,this.nextLoadPosition=e.startPTS,this.state=fe,this.fragPrevious=i,void this.tick();c.logger.warn("missing video frame(s) on first frag, appending with gap",i.sn)}else i.backtracked=!1;var s=J(a.details,i,e.startPTS,e.endPTS,e.startDTS,e.endDTS),d=this.hls;d.trigger(u.default.LEVEL_PTS_UPDATED,{details:a.details,level:this.level,drift:s,type:e.type,start:e.startPTS,end:e.endPTS}),[e.data1,e.data2].forEach(function(r){r&&r.length&&t.state===me&&(t.appended=!0,t.pendingBuffering=!0,d.trigger(u.default.BUFFER_APPENDING,{type:e.type,data:r,parent:"main",content:"data"}))}),this.tick()}},o.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===me&&(this.stats.tparsed=window.performance.now(),this.state=ye,this._checkAppendedParsed())},o.onAudioTrackSwitching=function(e){var t=!!e.url,r=e.id;if(!t){if(this.mediaBuffer!==this.media){c.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var n=this.fragCurrent;n.loader&&(c.logger.log("switching to main audio track, cancel main fragment load"),n.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=fe}var a=this.hls;a.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),a.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:r}),this.altAudio=!1}},o.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(c.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},o.onBufferCreated=function(e){var t,r,n=e.tracks,a=!1;for(var i in n){var o=n[i];"main"===o.id?(r=i,t=o,"video"===i&&(this.videoBuffer=n[i].buffer)):a=!0}a&&t?(c.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},o.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==me&&t!==ye||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},o._checkAppendedParsed=function(){if(!(this.state!==ye||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("main buffered : "+te(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(u.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=fe}this.tick()}},o.onError=function(e){var t=e.frag||this.fragCurrent;if(!t||"main"===t.type){var r=!!this.media&&j.isBuffered(this.media,this.media.currentTime)&&j.isBuffered(this.media,this.media.currentTime+.5);switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:if(!e.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var n=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);c.logger.warn("mediaController: frag loading failed, retry in "+n+" ms"),this.retryDate=window.performance.now()+n,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=ve}else c.logger.error("mediaController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ee;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==Ee&&(e.fatal?(this.state=Ee,c.logger.warn("streamController: "+e.details+",switch to "+this.state+" state ...")):e.levelRetry||this.state!==Se||(this.state=fe));break;case s.ErrorDetails.BUFFER_FULL_ERROR:"main"!==e.parent||this.state!==me&&this.state!==ye||(r?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=fe):(c.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,Number.POSITIVE_INFINITY)))}}},o._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,c.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},o._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=(this.mediaBuffer?this.mediaBuffer:e).buffered;!this.loadedmetadata&&t.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,t)}},o.onFragLoadEmergencyAborted=function(){this.state=fe,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},o.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(p.VIDEO,e.buffered),this.state=fe,this.fragPrevious=null},o.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},o._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&r>=0&&(c.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},o._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(c.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},(a=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("main stream-controller: "+t+"->"+e),this.hls.trigger(u.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},get:function(){return this._state}},{key:"currentLevel",get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1}},{key:"nextBufferedFrag",get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null}},{key:"nextLevel",get:function(){var e=this.nextBufferedFrag;return e?e.level:-1}},{key:"liveSyncPosition",get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,a),n}(_e);window.performance;var Pe,we=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADED,u.default.LEVEL_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.FRAG_LOADED,u.default.ERROR)||this).canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,Pe=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i=n.prototype;return i.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},i.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},i.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},i.stopLoad=function(){this.canload=!1},i.onManifestLoaded=function(e){var t,r=[],n=[],a={},i=null,o=!1,l=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,o=o||!!e.videoCodec,l=l||!!e.audioCodec,Pe&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),(i=a[e.bitrate])?i.url.push(e.url):(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(l=!0,X(i||e,"audio",t.AUDIO)),t.SUBTITLES&&X(i||e,"text",t.SUBTITLES))}),o&&l&&(r=r.filter(function(e){return!!e.videoCodec})),r=r.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||k(t,"audio"))&&(!r||k(r,"video"))}),e.audioTracks&&(n=e.audioTracks.filter(function(e){return!e.audioCodec||k(e.audioCodec,"audio")})).forEach(function(e,t){e.id=t}),r.length>0){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var d=0;d<r.length;d++)if(r[d].bitrate===t){this._firstLevel=d,c.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(u.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:l,video:o,altAudio:n.some(function(e){return!!e.url})})}else this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},i.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){c.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(u.default.LEVEL_SWITCHING,n)}var a=t[e],i=a.details;if(!i||i.live){var o=a.urlId;r.trigger(u.default.LEVEL_LOADING,{url:a.url[o],level:e,id:o})}}else r.trigger(u.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},i.onError=function(e){if(e.fatal)e.type===s.ErrorTypes.NETWORK_ERROR&&this.clearTimer();else{var t,r=!1,n=!1;switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case s.ErrorDetails.LEVEL_LOAD_ERROR:case s.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case s.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)}},i.recoverLevel=function(e,t,r,n){var a,i,o,s=this,l=this.hls.config,u=e.details,d=this._levels[t];if(d.loadError++,d.fragmentError=n,r){if(!(this.levelRetryCount+1<=l.levelLoadingMaxRetry))return c.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);i=Math.min(Math.pow(2,this.levelRetryCount)*l.levelLoadingRetryDelay,l.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return s.loadLevel()},i),e.levelRetry=!0,this.levelRetryCount++,c.logger.warn("level controller, "+u+", retry in "+i+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&((a=d.url.length)>1&&d.loadError<a?(d.urlId=(d.urlId+1)%a,d.details=void 0,c.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+d.urlId)):-1===this.manualLevelIndex?(o=0===t?this._levels.length-1:t-1,c.logger.warn("level controller, "+u+": switch to "+o),this.hls.nextAutoLevel=this.currentLevelIndex=o):n&&(c.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},i.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},i.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var a=this._levels[r];if(a.fragmentError||(a.loadError=0,this.levelRetryCount=0),n.live){var i=ee(a.details,n,e.stats.trequest);c.logger.log("live playlist, reload in "+Math.round(i)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},i)}else this.clearTimer()}},i.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,a=0;a<r.audioGroupIds.length;a++)if(r.audioGroupIds[a]===t){n=a;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},i.loadLevel=function(){if(c.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];c.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(u.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},(a=[{key:"levels",get:function(){return this._levels}},{key:"level",get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))}},{key:"manualLevel",get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)}},{key:"firstLevel",get:function(){return this._firstLevel},set:function(e){this._firstLevel=e}},{key:"startLevel",get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e}},{key:"nextLoadLevel",get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,a),n}(f),Ae=r("./src/demux/id3.js");function Oe(e,t){var r;try{r=new Event("addtrack")}catch(e){(r=document.createEvent("Event")).initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function Re(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}var Ie=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_METADATA,u.default.LIVE_BACK_BUFFER_REACHED)||this).id3Track=void 0,r.media=void 0,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){f.prototype.destroy.call(this)},a.onMediaAttached=function(e){this.media=e.media,this.media},a.onMediaDetaching=function(){Re(this.id3Track),this.id3Track=void 0,this.media=void 0},a.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return Oe(r,this.media),r}return this.media.addTextTrack("metadata","id3")},a.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,a=0;a<r.length;a++){var i=Ae.default.getID3Frames(r[a].data);if(i){var o=r[a].pts,s=a<r.length-1?r[a+1].pts:t.endPTS;o===s?s+=1e-4:o>s&&(c.logger.warn("detected an id3 sample with endTime < startTime, adjusting endTime to (startTime + 0.25)"),s=o+.25);for(var l=0;l<i.length;l++){var u=i[l];if(!Ae.default.isTimeStampFrame(u)){var d=new n(o,s,"");d.value=u,this.id3Track.addCue(d)}}}}},a.onLiveBackBufferReached=function(e){var t=e.bufferEnd,r=this.id3Track;if(r&&r.cues&&r.cues.length){var n=function(e,t){if(t<e[0].endTime)return e[0];if(t>e[e.length-1].endTime)return e[e.length-1];for(var r=0,n=e.length-1;r<=n;){var a=Math.floor((n+r)/2);if(t<e[a].endTime)n=a-1;else{if(!(t>e[a].endTime))return e[a];r=a+1}}return e[r].endTime-t<t-e[n].endTime?e[r]:e[n]}(r.cues,t);if(n)for(;r.cues[0]!==n;)r.removeCue(r.cues[0])}},n}(f),De=function(){function e(e){this.alpha_=void 0,this.estimate_=void 0,this.totalWeight_=void 0,this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}var t=e.prototype;return t.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},t.getTotalWeight=function(){return this.totalWeight_},t.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}(),Le=function(){function e(e,t,r,n){this.hls=void 0,this.defaultEstimate_=void 0,this.minWeight_=void 0,this.minDelayMs_=void 0,this.slow_=void 0,this.fast_=void 0,this.hls=e,this.defaultEstimate_=n,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new De(t),this.fast_=new De(r)}var t=e.prototype;return t.sample=function(e,t){var r=(e=Math.max(e,this.minDelayMs_))/1e3,n=8*t/r;this.fast_.sample(r,n),this.slow_.sample(r,n)},t.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},t.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},t.destroy=function(){},e}();var xe=window.performance,Me=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.FRAG_LOADING,u.default.FRAG_LOADED,u.default.FRAG_BUFFERED,u.default.ERROR)||this).lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=t,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(r)),r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i=n.prototype;return i.destroy=function(){this.clearTimer(),f.prototype.destroy.call(this)},i.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r,n,a=this.hls,i=a.config,o=t.level;a.levels[o].details.live?(r=i.abrEwmaFastLive,n=i.abrEwmaSlowLive):(r=i.abrEwmaFastVoD,n=i.abrEwmaSlowVoD),this._bwEstimator=new Le(a,n,r,i.abrEwmaDefaultEstimate)}},i._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,a=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return c.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var i=n.stats;if(t&&i&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var o=xe.now()-i.trequest,s=Math.abs(t.playbackRate);if(o>500*r.duration/s){var l=e.levels,d=Math.max(1,i.bw?i.bw/8:1e3*i.loaded/o),f=l[r.level],h=f.realBitrate?Math.max(f.realBitrate,f.bitrate):f.bitrate,p=i.total?i.total:Math.max(i.loaded,Math.round(r.duration*h/8)),v=t.currentTime,g=(p-i.loaded)/d,m=(j.bufferInfo(t,v,e.config.maxBufferHole).end-v)/s;if(m<2*r.duration/s&&g>m){var y;for(y=r.level-1;y>a;y--){var b=l[y].realBitrate?Math.max(l[y].realBitrate,l[y].bitrate):l[y].bitrate;if(r.duration*b/(6.4*d)<m)break}void 0<g&&(c.logger.warn("loading too slow, abort fragment loading and switch to level "+y+":fragLoadedDelay["+y+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+(void 0).toFixed(1)+"<"+g.toFixed(1)+":"+m.toFixed(1)),e.nextLoadLevel=y,this._bwEstimator.sample(o,i.loaded),n.abort(),this.clearTimer(),e.trigger(u.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:i}))}}}}},i.onFragLoaded=function(e){var t=e.frag;if("main"===t.type&&Object(l.isFiniteNumber)(t.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=t.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var r=this.hls.levels[t.level],n=(r.loaded?r.loaded.bytes:0)+e.stats.loaded,a=(r.loaded?r.loaded.duration:0)+e.frag.duration;r.loaded={bytes:n,duration:a},r.realBitrate=Math.round(8*n/a)}if(e.frag.bitrateTest){var i=e.stats;i.tparsed=i.tbuffered=i.tload,this.onFragBuffered(e)}}},i.onFragBuffered=function(e){var t=e.stats,r=e.frag;if(!0!==t.aborted&&"main"===r.type&&Object(l.isFiniteNumber)(r.sn)&&(!r.bitrateTest||t.tload===t.tbuffered)){var n=t.tparsed-t.trequest;c.logger.log("latency/loading/parsing/append/kbps:"+Math.round(t.tfirst-t.trequest)+"/"+Math.round(t.tload-t.tfirst)+"/"+Math.round(t.tparsed-t.tload)+"/"+Math.round(t.tbuffered-t.tparsed)+"/"+Math.round(8*t.loaded/(t.tbuffered-t.trequest))),this._bwEstimator.sample(n,t.loaded),t.bwEstimate=this._bwEstimator.getEstimate(),r.bitrateTest?this.bitrateTestDelay=n/1e3:this.bitrateTestDelay=0}},i.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},i.clearTimer=function(){clearInterval(this.timer),this.timer=null},i._findBestLevel=function(e,t,r,n,a,i,o,s,l){for(var u=a;u>=n;u--){var d=l[u];if(d){var f,h=d.details,p=h?h.totalduration/h.fragments.length:t,v=!!h&&h.live;f=u<=e?o*r:s*r;var g=l[u].realBitrate?Math.max(l[u].realBitrate,l[u].bitrate):l[u].bitrate,m=g*p/f;if(c.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(f)+"/"+g+"/"+p+"/"+i+"/"+m),f>g&&(!m||v&&!this.bitrateTestDelay||m<i))return u}}return-1},(a=[{key:"nextAutoLevel",get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e}},{key:"_nextABRAutoLevel",get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,a=e.minAutoLevel,i=e.media,o=this.lastLoadedFragLevel,s=this.fragCurrent?this.fragCurrent.duration:0,l=i?i.currentTime:0,u=i&&0!==i.playbackRate?Math.abs(i.playbackRate):1,d=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,f=(j.bufferInfo(i,l,n.maxBufferHole).end-l)/u,h=this._findBestLevel(o,s,d,a,t,f,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(h>=0)return h;c.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var p=s?Math.min(s,n.maxStarvationDelay):n.maxStarvationDelay,v=n.abrBandWidthFactor,g=n.abrBandWidthUpFactor;if(0===f){var m=this.bitrateTestDelay;m&&(p=(s?Math.min(s,n.maxLoadingDelay):n.maxLoadingDelay)-m,c.logger.trace("bitrate test took "+Math.round(1e3*m)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*p)+" ms"),v=g=1)}return h=this._findBestLevel(o,s,d,a,t,f+p,v,g,r),Math.max(h,0)}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,a),n}(f),Fe=H(),Ne=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_RESET,u.default.BUFFER_APPENDING,u.default.BUFFER_CODECS,u.default.BUFFER_EOS,u.default.BUFFER_FLUSHING,u.default.LEVEL_PTS_UPDATED,u.default.LEVEL_UPDATED)||this)._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r._needsFlush=!1,r._needsEos=!1,r.config=void 0,r.audioTimestampOffset=void 0,r.bufferCodecEventsExpected=0,r._bufferCodecEventsTotal=0,r.media=null,r.mediaSource=null,r.segments=[],r.parent=void 0,r.appending=!1,r.appended=0,r.appendError=0,r.flushBufferCounter=0,r.tracks={},r.pendingTracks={},r.sourceBuffer={},r.flushRange=[],r._onMediaSourceOpen=function(){c.logger.log("media source opened"),r.hls.trigger(u.default.MEDIA_ATTACHED,{media:r.media});var e=r.mediaSource;e&&e.removeEventListener("sourceopen",r._onMediaSourceOpen),r.checkPendingTracks()},r._onMediaSourceClose=function(){c.logger.log("media source closed")},r._onMediaSourceEnded=function(){c.logger.log("media source ended")},r._onSBUpdateEnd=function(){if(r.audioTimestampOffset&&r.sourceBuffer.audio){var e=r.sourceBuffer.audio;c.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+r.audioTimestampOffset),e.timestampOffset=r.audioTimestampOffset,delete r.audioTimestampOffset}r._needsFlush&&r.doFlush(),r._needsEos&&r.checkEos(),r.appending=!1;var t=r.parent,n=r.segments.reduce(function(e,r){return r.parent===t?e+1:e},0),a={},i=r.sourceBuffer;for(var o in i){var s=i[o];if(!s)throw Error("handling source buffer update end error: source buffer for "+o+" uninitilized and unable to update buffered TimeRanges.");a[o]=s.buffered}r.hls.trigger(u.default.BUFFER_APPENDED,{parent:t,pending:n,timeRanges:a}),r._needsFlush||r.doAppending(),r.updateMediaElementDuration(),0===n&&r.flushLiveBackBuffer()},r._onSBUpdateError=function(e){c.logger.error("sourceBuffer error:",e),r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.config=t.config,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){f.prototype.destroy.call(this)},a.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(!n)throw Error("Level PTS Updated and source buffer for audio uninitalized");if(Math.abs(n.timestampOffset-e.start)>.1){var a=n.updating;try{n.abort()}catch(e){c.logger.warn("can not abort audio buffer: "+e)}a?this.audioTimestampOffset=e.start:(c.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},a.onManifestParsed=function(e){this.bufferCodecEventsExpected=this._bufferCodecEventsTotal=e.altAudio?2:1,c.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},a.onMediaAttaching=function(e){var t=this.media=e.media;if(t&&Fe){var r=this.mediaSource=new Fe;r.addEventListener("sourceopen",this._onMediaSourceOpen),r.addEventListener("sourceended",this._onMediaSourceEnded),r.addEventListener("sourceclose",this._onMediaSourceClose),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},a.onMediaDetaching=function(){c.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){c.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this._onMediaSourceOpen),e.removeEventListener("sourceended",this._onMediaSourceEnded),e.removeEventListener("sourceclose",this._onMediaSourceClose),this.media&&(this._objectUrl&&window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):c.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.bufferCodecEventsExpected=this._bufferCodecEventsTotal,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.hls.trigger(u.default.MEDIA_DETACHED)},a.checkPendingTracks=function(){var e=this.bufferCodecEventsExpected,t=this.pendingTracks,r=Object.keys(t).length;(r&&!e||2===r)&&(this.createSourceBuffers(t),this.pendingTracks={},this.doAppending())},a.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{r&&(this.mediaSource&&this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this._onSBUpdateEnd),r.removeEventListener("error",this._onSBUpdateError))}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},a.onBufferCodecs=function(e){var t=this;Object.keys(this.sourceBuffer).length||(Object.keys(e).forEach(function(r){t.pendingTracks[r]=e[r]}),this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),this.mediaSource&&"open"===this.mediaSource.readyState&&this.checkPendingTracks())},a.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;if(!r)throw Error("createSourceBuffers called when mediaSource was null");for(var n in e)if(!t[n]){var a=e[n];if(!a)throw Error("source buffer exists for track "+n+", however track does not");var i=a.levelCodec||a.codec,o=a.container+";codecs="+i;c.logger.log("creating sourceBuffer("+o+")");try{var l=t[n]=r.addSourceBuffer(o);l.addEventListener("updateend",this._onSBUpdateEnd),l.addEventListener("error",this._onSBUpdateError),this.tracks[n]={buffer:l,codec:i,id:a.id,container:a.container,levelCodec:a.levelCodec}}catch(e){c.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:o})}}this.hls.trigger(u.default.BUFFER_CREATED,{tracks:this.tracks})},a.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},a.onBufferEos=function(e){for(var t in this.sourceBuffer)if(!e.type||e.type===t){var r=this.sourceBuffer[t];r&&!r.ended&&(r.ended=!0,c.logger.log(t+" sourceBuffer now EOS"))}this.checkEos()},a.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(t&&"open"===t.readyState){for(var r in e){var n=e[r];if(n){if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}}c.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){c.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1}else this._needsEos=!1},a.onBufferFlushing=function(e){e.type?this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}):(this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"video"}),this.flushRange.push({start:e.startOffset,end:e.endOffset,type:"audio"})),this.flushBufferCounter=0,this.doFlush()},a.flushLiveBackBuffer=function(){if(this._live){var e=this.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))if(this.media)for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),a=t-Math.max(e,this._levelTargetDuration),i=n.length-1;i>=0;i--){var o=n[i],s=r[o];if(s){var l=s.buffered;l.length>0&&a>l.start(0)&&this.removeBufferRange(o,s,0,a)&&this.hls.trigger(u.default.LIVE_BACK_BUFFER_REACHED,{bufferEnd:a})}}else c.logger.error("flushLiveBackBuffer called without attaching media")}},a.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},a.updateMediaElementDuration=function(){var e,t=this.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var r in this.sourceBuffer){var n=this.sourceBuffer[r];if(n&&!0===n.updating)return}e=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===t.liveDurationInfinity?(c.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>e||!Object(l.isFiniteNumber)(e))&&(c.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},a.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r){var a=r[n];a&&(t+=a.buffered.length)}}catch(e){c.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(u.default.BUFFER_FLUSHED)}},a.doAppending=function(){var e=this.config,t=this.hls,r=this.segments,n=this.sourceBuffer;if(Object.keys(n).length){if(!this.media||this.media.error)return this.segments=[],void c.logger.error("trying to append although a media error occured, flush segment and abort");if(!this.appending){var a=r.shift();if(a)try{var i=n[a.type];if(!i)return void this._onSBUpdateEnd();if(i.updating)return void r.unshift(a);i.ended=!1,this.parent=a.parent,i.appendBuffer(a.data),this.appendError=0,this.appended++,this.appending=!0}catch(n){c.logger.error("error while trying to append buffer:"+n.message),r.unshift(a);var o={type:s.ErrorTypes.MEDIA_ERROR,parent:a.parent,details:"",fatal:!1};22===n.code?(this.segments=[],o.details=s.ErrorDetails.BUFFER_FULL_ERROR):(this.appendError++,o.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>e.appendErrorMaxRetry&&(c.logger.log("fail "+e.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],o.fatal=!0)),t.trigger(u.default.ERROR,o)}}}},a.flushBuffer=function(e,t,r){var n=this.sourceBuffer;if(!Object.keys(n).length)return!0;var a="null";if(this.media&&(a=this.media.currentTime.toFixed(3)),c.logger.log("flushBuffer,pos/start/end: "+a+"/"+e+"/"+t),this.flushBufferCounter>=this.appended)return c.logger.warn("abort flushing too many retries"),!0;var i=n[r];if(i){if(i.ended=!1,i.updating)return c.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(r,i,e,t))return this.flushBufferCounter++,!1}return c.logger.log("buffer flushed"),!0},a.removeBufferRange=function(e,t,r,n){try{for(var a=0;a<t.buffered.length;a++){var i=t.buffered.start(a),o=t.buffered.end(a),s=Math.max(i,r),l=Math.min(o,n);if(Math.min(l,o)-s>.5){var u="null";return this.media&&(u=this.media.currentTime.toString()),c.logger.log("sb remove "+e+" ["+s+","+l+"], of ["+i+","+o+"], pos:"+u),t.remove(s,l),!0}}}catch(e){c.logger.warn("removeBufferRange failed",e)}return!1},n}(f);function Be(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var je=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.FPS_DROP_LEVEL_CAPPING,u.default.MEDIA_ATTACHING,u.default.MANIFEST_PARSED,u.default.BUFFER_CODECS,u.default.MEDIA_DETACHING)||this).autoLevelCapping=Number.POSITIVE_INFINITY,r.firstLevel=null,r.levels=[],r.media=null,r.restrictedLevels=[],r.timer=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i,o,s=n.prototype;return s.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this.stopCapping())},s.onFpsDropLevelCapping=function(e){n.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},s.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},s.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this.startCapping()},s.onLevelsUpdated=function(e){this.levels=e.levels},s.onMediaDetaching=function(){this.stopCapping()},s.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},s.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var r=this.levels.filter(function(r,a){return n.isLevelAllowed(a,t.restrictedLevels)&&a<=e});return n.getMaxLevelByMediaSize(r,this.mediaWidth,this.mediaHeight)},s.startCapping=function(){this.timer||(this.autoLevelCapping=Number.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},s.stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=Number.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},n.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},n.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n,a,i=e.length-1,o=0;o<e.length;o+=1){var s=e[o];if((s.width>=t||s.height>=r)&&(n=s,!(a=e[o+1])||n.width!==a.width||n.height!==a.height)){i=o;break}}return i},a=n,o=[{key:"contentScaleFactor",get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e}}],(i=[{key:"mediaWidth",get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=n.contentScaleFactor),e}},{key:"mediaHeight",get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=n.contentScaleFactor),e}}])&&Be(a.prototype,i),o&&Be(a,o),n}(f),Ue=window.performance,Ve=function(e){var t,r;function n(t){return e.call(this,t,u.default.MEDIA_ATTACHING)||this}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},a.onMediaAttaching=function(e){var t=this.hls.config;t.capLevelOnFPSDrop&&("function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod))},a.checkFPS=function(e,t,r){var n=Ue.now();if(t){if(this.lastTime){var a=n-this.lastTime,i=r-this.lastDroppedFrames,o=t-this.lastDecodedFrames,s=1e3*i/a,l=this.hls;if(l.trigger(u.default.FPS_DROP,{currentDropped:i,currentDecoded:o,totalDroppedFrames:r}),s>0&&i>l.config.fpsDroppedMonitoringThreshold*o){var d=l.currentLevel;c.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+d),d>0&&(-1===l.autoLevelCapping||l.autoLevelCapping>=d)&&(d-=1,l.trigger(u.default.FPS_DROP_LEVEL_CAPPING,{level:d,droppedLevel:l.currentLevel}),l.autoLevelCapping=d,l.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},a.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},n}(f),Ge=window,He=Ge.performance,Ke=Ge.XMLHttpRequest,We=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}var t=e.prototype;return t.destroy=function(){this.abort(),this.loader=null},t.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},t.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:He.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},t.loadInternal=function(){var e,t=this.context;e=this.loader=new Ke;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},t.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,n=this.stats,a=this.context,i=this.config;if(!n.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===n.tfirst&&(n.tfirst=Math.max(He.now(),n.trequest)),4===r){var o=t.status;if(o>=200&&o<300){var s,l;n.tload=Math.max(n.tfirst,He.now()),l="arraybuffer"===a.responseType?(s=t.response).byteLength:(s=t.responseText).length,n.loaded=n.total=l;var u={url:t.responseURL,data:s};this.callbacks.onSuccess(u,n,a,t)}else n.retry>=i.maxRetry||o>=400&&o<499?(c.logger.error(o+" while loading "+a.url),this.callbacks.onError({code:o,text:t.statusText},a,t)):(c.logger.warn(o+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,i.maxRetryDelay),n.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),i.timeout)},t.loadtimeout=function(){c.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},t.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();var Ye=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MANIFEST_LOADING,u.default.MANIFEST_PARSED,u.default.AUDIO_TRACK_LOADED,u.default.AUDIO_TRACK_SWITCHED,u.default.LEVEL_LOADED,u.default.ERROR)||this)._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i=n.prototype;return i.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},i.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(u.default.AUDIO_TRACKS_UPDATED,{audioTracks:t}),this._selectAudioGroup(this.hls.nextLoadLevel)},i.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)c.logger.warn("Invalid audio track id:",e.id);else{if(c.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()}},i.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},i.onLevelLoaded=function(e){this._selectAudioGroup(e.level)},i.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(c.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},i._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)c.logger.debug("Same id as current audio-track passed, and track details available -> no-op");else if(e<0||e>=this.tracks.length)c.logger.warn("Invalid id passed to audio-track controller");else{var t=this.tracks[e];c.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,a=t.id;this.hls.trigger(u.default.AUDIO_TRACK_SWITCHING,{id:a,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)}},i.doTick=function(){this._updateTrack(this._trackId)},i._selectAudioGroup=function(e){var t=this.hls.levels[e];if(t&&t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},i._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var a=t.filter(function(e){return e.default});a.length?t=a:c.logger.warn("No default audio tracks defined")}var i=!1,o=function(){t.forEach(function(t){i||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),i=!0)})};o(),i||(n=null,o()),i||(c.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},i._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live||!r)},i._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;c.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(u.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},i._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,c.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},i._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,a=t.groupId;c.logger.warn("Loading failed on audio track id: "+e+", group-id: "+a+', name/language: "'+r+'" / "'+n+'"');for(var i=e,o=0;o<this.tracks.length;o++)if(!this.trackIdBlacklist[o]&&this.tracks[o].name===r){i=o;break}i!==e?(c.logger.log("Attempting audio-track fallback id:",i,"group-id:",this.tracks[i].groupId),this._setAudioTrack(i)):c.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"')},(a=[{key:"audioTracks",get:function(){return this.tracks}},{key:"audioTrack",get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,a),n}(ue);var qe=window.performance,ze=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.AUDIO_TRACKS_UPDATED,u.default.AUDIO_TRACK_SWITCHING,u.default.AUDIO_TRACK_LOADED,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.FRAG_PARSING_INIT_SEGMENT,u.default.FRAG_PARSING_DATA,u.default.FRAG_PARSED,u.default.ERROR,u.default.BUFFER_RESET,u.default.BUFFER_CREATED,u.default.BUFFER_APPENDED,u.default.BUFFER_FLUSHED,u.default.INIT_PTS_FOUND)||this).fragmentTracker=r,n.config=t.config,n.audioCodecSwap=!1,n._state=ce,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i=n.prototype;return i.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,c.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===ke&&this.tick())},i.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=fe):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=de),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=ce},i.doTick=function(){var e,t,r,n=this.hls,a=n.config;switch(this.state){case Ee:case"PAUSED":case be:break;case de:this.state=ge,this.loadedmetadata=!1;break;case fe:var i=this.tracks;if(!i)break;if(!this.media&&(this.startFragRequested||!a.startFragPrefetch))break;if(this.loadedmetadata)e=this.media.currentTime;else if(void 0===(e=this.nextLoadPosition))break;var o=this.mediaBuffer?this.mediaBuffer:this.media,s=this.videoBuffer?this.videoBuffer:this.media,d=j.bufferInfo(o,e,a.maxBufferHole),f=j.bufferInfo(s,e,a.maxBufferHole),h=d.len,p=d.end,v=this.fragPrevious,g=Math.min(a.maxBufferLength,a.maxMaxBufferLength),m=Math.max(g,f.len),y=this.audioSwitch,b=this.trackId;if((h<m||y)&&b<i.length){if(void 0===(r=i[b].details)){this.state=ge;break}if(!y&&this._streamEnded(d,r))return this.hls.trigger(u.default.BUFFER_EOS,{type:"audio"}),void(this.state=Te);var T,E=r.fragments,k=E.length,S=E[0].start,_=E[k-1].start+E[k-1].duration;if(y)if(r.live&&!r.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),p=0;else if(p=e,r.PTSKnown&&e<S){if(!(d.end>S||d.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=S+.05}if(r.initSegment&&!r.initSegment.data)T=r.initSegment;else if(p<=S){if(T=E[0],null!==this.videoTrackCC&&T.cc!==this.videoTrackCC&&(T=function(e,t){return B(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}(E,this.videoTrackCC)),r.live&&T.loadIdx&&T.loadIdx===this.fragLoadIdx){var C=d.nextStart?d.nextStart:S;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(C+.05)),void(this.media.currentTime=C+.05)}}else{var P,w=a.maxFragLookUpTolerance,A=v?E[v.sn-E[0].sn+1]:void 0,O=function(e){var t=Math.min(w,e.duration);return e.start+e.duration-t<=p?1:e.start-t>p&&e.start?-1:0};p<_?(p>_-w&&(w=0),P=A&&!O(A)?A:B(E,O)):P=E[k-1],P&&(T=P,S=P.start,v&&T.level===v.level&&T.sn===v.sn&&(T.sn<r.endSN?(T=E[T.sn+1-r.startSN],c.logger.log("SN just loaded, load next one: "+T.sn)):T=null))}T&&(T.encrypted?(c.logger.log("Loading key for "+T.sn+" of ["+r.startSN+" ,"+r.endSN+"],track "+b),this.state=he,n.trigger(u.default.KEY_LOADING,{frag:T})):(c.logger.log("Loading "+T.sn+", cc: "+T.cc+" of ["+r.startSN+" ,"+r.endSN+"],track "+b+", currentTime:"+e+",bufferEnd:"+p.toFixed(3)),this.fragCurrent=T,(y||this.fragmentTracker.getState(T)===x)&&("initSegment"!==T.sn&&(this.startFragRequested=!0),Object(l.isFiniteNumber)(T.sn)&&(this.nextLoadPosition=T.start+T.duration),n.trigger(u.default.FRAG_LOADING,{frag:T}),this.state=pe)))}break;case ge:(t=this.tracks[this.trackId])&&t.details&&(this.state=fe);break;case ve:var R=qe.now(),I=this.retryDate,D=(o=this.media)&&o.seeking;(!I||R>=I||D)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=fe);break;case ke:var L=this.videoTrackCC;if(void 0===this.initPTS[L])break;var M=this.waitingFragment;if(M){var F=M.frag.cc;L!==F?(t=this.tracks[this.trackId]).details&&t.details.live&&(c.logger.warn("Waiting fragment CC ("+F+") does not match video track CC ("+L+")"),this.waitingFragment=null,this.state=fe):(this.state=pe,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=fe}},i.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},i.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.fragmentTracker.removeAllFragments(),this.stopLoad()},i.onAudioTracksUpdated=function(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},i.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state="PAUSED",this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=fe),this.tick()},i.onAudioTrackLoaded=function(e){var t=e.details,r=e.id,n=this.tracks[r],a=t.totalduration,i=0;if(c.logger.log("track "+r+" loaded ["+t.startSN+","+t.endSN+"],duration:"+a),t.live){var o=n.details;o&&t.fragments.length>0?(Z(o,t),i=t.fragments[0].start,t.PTSKnown?c.logger.log("live audio playlist sliding:"+i.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(t.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else t.PTSKnown=!1;if(n.details=t,!this.startFragRequested){if(-1===this.startPosition){var s=t.startTimeOffset;Object(l.isFiniteNumber)(s)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+s),this.startPosition=s):t.live?(this.startPosition=this.computeLivePosition(i,t),c.logger.log("compute startPosition for audio-track to "+this.startPosition)):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===ge&&(this.state=fe),this.tick()},i.onKeyLoaded=function(){this.state===he&&(this.state=fe,this.tick())},i.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===pe&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],a=n.details,i=a.totalduration,o=t.level,s=t.sn,l=t.cc,d=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",f=this.stats=e.stats;if("initSegment"===s)this.state=fe,f.tparsed=f.tbuffered=qe.now(),a.initSegment.data=e.payload,this.hls.trigger(u.default.FRAG_BUFFERED,{stats:f,frag:t,id:"audio"}),this.tick();else{this.state=me,this.appended=!1,this.demuxer||(this.demuxer=new z(this.hls,"audio"));var h=this.initPTS[l],p=a.initSegment?a.initSegment.data:[];a.initSegment||void 0!==h?(this.pendingBuffering=!0,c.logger.log("Demuxing "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.demuxer.push(e.payload,p,d,null,t,i,!1,h)):(c.logger.log("unknown video PTS for continuity counter "+l+", waiting for video PTS before demuxing audio frag "+s+" of ["+a.startSN+" ,"+a.endSN+"],track "+o),this.waitingFragment=e,this.state=ke)}}this.fragLoadError=0},i.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===me){var n,a=e.tracks;if(a.video&&delete a.video,n=a.audio){n.levelCodec=n.codec,n.id=e.id,this.hls.trigger(u.default.BUFFER_CODECS,a),c.logger.log("audio track:audio,container:"+n.container+",codecs[level/parsed]=["+n.levelCodec+"/"+n.codec+"]");var i=n.initSegment;if(i){var o={type:"audio",data:i,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[o]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(u.default.BUFFER_APPENDING,o))}this.tick()}}},i.onFragParsingData=function(e){var t=this,r=this.fragCurrent,n=e.frag;if(r&&"audio"===e.id&&"audio"===e.type&&n.sn===r.sn&&n.level===r.level&&this.state===me){var a=this.trackId,i=this.tracks[a],o=this.hls;Object(l.isFiniteNumber)(e.endPTS)||(e.endPTS=e.startPTS+r.duration,e.endDTS=e.startDTS+r.duration),r.addElementaryStream(p.AUDIO),c.logger.log("parsed "+e.type+",PTS:["+e.startPTS.toFixed(3)+","+e.endPTS.toFixed(3)+"],DTS:["+e.startDTS.toFixed(3)+"/"+e.endDTS.toFixed(3)+"],nb:"+e.nb),J(i.details,r,e.startPTS,e.endPTS);var d=this.audioSwitch,f=this.media,h=!1;if(d)if(f&&f.readyState){var v=f.currentTime;c.logger.log("switching audio track : currentTime:"+v),v>=e.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=be,o.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"}),h=!0,this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:a}))}else this.audioSwitch=!1,o.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:a});var g=this.pendingData;if(!g)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void o.trigger(u.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([e.data1,e.data2].forEach(function(t){t&&t.length&&g.push({type:e.type,data:t,parent:"audio",content:"data"})}),!h&&g.length&&(g.forEach(function(e){t.state===me&&(t.pendingBuffering=!0,t.hls.trigger(u.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},i.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===me&&(this.stats.tparsed=qe.now(),this.state=ye,this._checkAppendedParsed())},i.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},i.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},i.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==me&&t!==ye||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},i._checkAppendedParsed=function(){if(!(this.state!==ye||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=qe.now(),r.trigger(u.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;n&&c.logger.log("audio buffered : "+te(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(u.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=fe}this.tick()}},i.onError=function(e){var t=e.frag;if(!t||"audio"===t.type)switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:var r=e.frag;if(r&&"audio"!==r.type)break;if(!e.fatal){var n=this.fragLoadError;n?n++:n=1;var a=this.config;if(n<=a.fragLoadingMaxRetry){this.fragLoadError=n;var i=Math.min(Math.pow(2,n-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+i+" ms"),this.retryDate=qe.now()+i,this.state=ve}else c.logger.error("AudioStreamController: "+e.details+" reaches max retry, redispatch as fatal ..."),e.fatal=!0,this.state=Ee}break;case s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case s.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case s.ErrorDetails.KEY_LOAD_ERROR:case s.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==Ee&&(this.state=e.fatal?Ee:fe,c.logger.warn("AudioStreamController: "+e.details+" while loading frag, now switching to "+this.state+" state ..."));break;case s.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===e.parent&&(this.state===me||this.state===ye)){var o=this.mediaBuffer,l=this.media.currentTime;if(o&&j.isBuffered(o,l)&&j.isBuffered(o,l+.5)){var d=this.config;d.maxMaxBufferLength>=d.maxBufferLength&&(d.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+d.maxMaxBufferLength+"s")),this.state=fe}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=be,this.hls.trigger(u.default.BUFFER_FLUSHING,{startOffset:0,endOffset:Number.POSITIVE_INFINITY,type:"audio"})}}},i.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(u.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=ye):(this.state=fe,this.fragPrevious=null,this.tick())},(a=[{key:"state",set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},get:function(){return this._state}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,a),n}(_e),Xe=function(){if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var e={"":!0,lr:!0,rl:!0},t={start:!0,middle:!0,end:!0,left:!0,right:!0};function r(e){return"string"==typeof e&&!!t[e.toLowerCase()]&&e.toLowerCase()}function n(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function a(t,a,i){var o=this,s={enumerable:!0};o.hasBeenReset=!1;var l="",u=!1,c=t,d=a,f=i,h=null,p="",v=!0,g="auto",m="start",y=50,b="middle",T=50,E="middle";Object.defineProperty(o,"id",n({},s,{get:function(){return l},set:function(e){l=""+e}})),Object.defineProperty(o,"pauseOnExit",n({},s,{get:function(){return u},set:function(e){u=!!e}})),Object.defineProperty(o,"startTime",n({},s,{get:function(){return c},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");c=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"endTime",n({},s,{get:function(){return d},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");d=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"text",n({},s,{get:function(){return f},set:function(e){f=""+e,this.hasBeenReset=!0}})),Object.defineProperty(o,"region",n({},s,{get:function(){return h},set:function(e){h=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"vertical",n({},s,{get:function(){return p},set:function(t){var r=function(t){return"string"==typeof t&&!!e[t.toLowerCase()]&&t.toLowerCase()}(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");p=r,this.hasBeenReset=!0}})),Object.defineProperty(o,"snapToLines",n({},s,{get:function(){return v},set:function(e){v=!!e,this.hasBeenReset=!0}})),Object.defineProperty(o,"line",n({},s,{get:function(){return g},set:function(e){if("number"!=typeof e&&"auto"!==e)throw new SyntaxError("An invalid number or illegal string was specified.");g=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"lineAlign",n({},s,{get:function(){return m},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");m=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"position",n({},s,{get:function(){return y},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"positionAlign",n({},s,{get:function(){return b},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");b=t,this.hasBeenReset=!0}})),Object.defineProperty(o,"size",n({},s,{get:function(){return T},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");T=e,this.hasBeenReset=!0}})),Object.defineProperty(o,"align",n({},s,{get:function(){return E},set:function(e){var t=r(e);if(!t)throw new SyntaxError("An invalid or illegal string was specified.");E=t,this.hasBeenReset=!0}})),o.displayState=void 0}return a.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},a}(),Qe=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};function Je(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new Qe,this.regionList=[]}function Ze(){this.values=Object.create(null)}function $e(e,t,r,n){var a=n?e.split(n):[e];for(var i in a)if("string"==typeof a[i]){var o=a[i].split(r);2===o.length&&t(o[0],o[1])}}Ze.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var et=new Xe(0,0,0),tt="middle"===et.align?"middle":"center";function rt(e,t,r){var n=e;function a(){var t=function(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}(e);if(null===t)throw new Error("Malformed timestamp: "+n);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function i(){e=e.replace(/^\s+/,"")}if(i(),t.startTime=a(),i(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+n);e=e.substr(3),i(),t.endTime=a(),i(),function(e,t){var n=new Ze;$e(e,function(e,t){switch(e){case"region":for(var a=r.length-1;a>=0;a--)if(r[a].id===t){n.set(e,r[a].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var i=t.split(","),o=i[0];n.integer(e,o),n.percent(e,o)&&n.set("snapToLines",!1),n.alt(e,o,["auto"]),2===i.length&&n.alt("lineAlign",i[1],["start",tt,"end"]);break;case"position":i=t.split(","),n.percent(e,i[0]),2===i.length&&n.alt("positionAlign",i[1],["start",tt,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",tt,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var a=n.get("line","auto");"auto"===a&&-1===et.line&&(a=-1),t.line=a,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",tt);var i=n.get("position","auto");"auto"===i&&50===et.position&&(i="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=i}(e,t)}function nt(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Je.prototype={parse:function(e){var t=this;function r(){var e=t.buffer,r=0;for(e=nt(e);r<e.length&&"\r"!==e[r]&&"\n"!==e[r];)++r;var n=e.substr(0,r);return"\r"===e[r]&&++r,"\n"===e[r]&&++r,t.buffer=e.substr(r),n}e&&(t.buffer+=t.decoder.decode(e,{stream:!0}));try{var n;if("INITIAL"===t.state){if(!/\r\n|\n/.test(t.buffer))return this;var a=(n=r()).match(/^(\xef\xbb\xbf)?WEBVTT([ \t].*)?$/);if(!a||!a[0])throw new Error("Malformed WebVTT signature.");t.state="HEADER"}for(var i=!1;t.buffer;){if(!/\r\n|\n/.test(t.buffer))return this;switch(i?i=!1:n=r(),t.state){case"HEADER":/:/.test(n)?$e(n,function(e,t){},/:/):n||(t.state="ID");continue;case"NOTE":n||(t.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){t.state="NOTE";break}if(!n)continue;if(t.cue=new Xe(0,0,""),t.state="CUE",-1===n.indexOf("--\x3e")){t.cue.id=n;continue}case"CUE":try{rt(n,t.cue,t.regionList)}catch(e){t.cue=null,t.state="BADCUE";continue}t.state="CUETEXT";continue;case"CUETEXT":var o=-1!==n.indexOf("--\x3e");if(!n||o&&(i=!0)){t.oncue&&t.oncue(t.cue),t.cue=null,t.state="ID";continue}t.cue.text&&(t.cue.text+="\n"),t.cue.text+=n;continue;case"BADCUE":n||(t.state="ID");continue}}}catch(e){"CUETEXT"===t.state&&t.cue&&t.oncue&&t.oncue(t.cue),t.cue=null,t.state="INITIAL"===t.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){try{if(this.buffer+=this.decoder.decode(),(this.cue||"HEADER"===this.state)&&(this.buffer+="\n\n",this.parse()),"INITIAL"===this.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return this.onflush&&this.onflush(),this}};var at=Je;function it(e,t,r,n){for(var a,i,o,s,l,u=window.VTTCue||TextTrackCue,c=0;c<n.rows.length;c++)if(o=!0,s=0,l="",!(a=n.rows[c]).isEmpty()){for(var d=0;d<a.chars.length;d++)a.chars[d].uchar.match(/\s/)&&o?s++:(l+=a.chars[d].uchar,o=!1);a.cueStartTime=t,t===r&&(r+=1e-4),i=new u(t,r,nt(l.trim())),s>=16?s--:s++,navigator.userAgent.match(/Firefox\//)?i.line=c+1:i.line=c>7?c-2:c+1,i.align="left",i.position=Math.max(0,Math.min(100,s/32*100)),e.addCue(i)}}var ot,st={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},lt=function(e){var t=e;return st.hasOwnProperty(e)&&(t=st[e]),String.fromCharCode(t)},ut=100,ct={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},dt={17:2,18:4,21:6,22:8,23:10,19:13,20:15},ft={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},ht={25:2,26:4,29:6,30:8,31:10,27:13,28:15},pt=["white","green","blue","cyan","red","yellow","magenta","black","transparent"];!function(e){e[e.ERROR=0]="ERROR",e[e.TEXT=1]="TEXT",e[e.WARNING=2]="WARNING",e[e.INFO=2]="INFO",e[e.DEBUG=3]="DEBUG",e[e.DATA=3]="DATA"}(ot||(ot={}));var vt={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e],this.verboseLevel}},gt=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},mt=function(){function e(e,t,r,n,a){this.foreground=void 0,this.underline=void 0,this.italics=void 0,this.background=void 0,this.flash=void 0,this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=a||!1}var t=e.prototype;return t.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},t.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},t.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},t.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},t.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},t.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),yt=function(){function e(e,t,r,n,a,i){this.uchar=void 0,this.penState=void 0,this.uchar=e||" ",this.penState=new mt(t,r,n,a,i)}var t=e.prototype;return t.reset=function(){this.uchar=" ",this.penState.reset()},t.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},t.setPenState=function(e){this.penState.copy(e)},t.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},t.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},t.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),bt=function(){function e(){this.chars=void 0,this.pos=void 0,this.currPenState=void 0,this.cueStartTime=void 0,this.chars=[];for(var e=0;e<ut;e++)this.chars.push(new yt);this.pos=0,this.currPenState=new mt}var t=e.prototype;return t.equals=function(e){for(var t=!0,r=0;r<ut;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<ut;t++)this.chars[t].copy(e.chars[t])},t.isEmpty=function(){for(var e=!0,t=0;t<ut;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},t.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(vt.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>ut&&(vt.log("ERROR","Too large cursor position "+this.pos),this.pos=ut)},t.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},t.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},t.insertChar=function(e){e>=144&&this.backSpace();var t=lt(e);this.pos>=ut?vt.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!"):(this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1))},t.clearFromPos=function(e){var t;for(t=e;t<ut;t++)this.chars[t].reset()},t.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},t.clearToEndOfRow=function(){this.clearFromPos(this.pos)},t.getTextString=function(){for(var e=[],t=!0,r=0;r<ut;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},t.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),Tt=function(){function e(){this.rows=void 0,this.currRow=void 0,this.nrRollUpRows=void 0,this.lastOutputScreen=void 0,this.rows=[];for(var e=0;e<15;e++)this.rows.push(new bt);this.currRow=14,this.nrRollUpRows=null,this.reset()}var t=e.prototype;return t.reset=function(){for(var e=0;e<15;e++)this.rows[e].clear();this.currRow=14},t.equals=function(e){for(var t=!0,r=0;r<15;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},t.copy=function(e){for(var t=0;t<15;t++)this.rows[t].copy(e.rows[t])},t.isEmpty=function(){for(var e=!0,t=0;t<15;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},t.backSpace=function(){this.rows[this.currRow].backSpace()},t.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},t.insertChar=function(e){this.rows[this.currRow].insertChar(e)},t.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},t.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},t.setCursor=function(e){vt.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},t.setPAC=function(e){vt.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<15;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,a=this.lastOutputScreen;if(a){var i=a.rows[n].cueStartTime;if(i&&vt.time&&i<vt.time)for(var o=0;o<this.nrRollUpRows;o++)this.rows[t-this.nrRollUpRows+o+1].copy(a.rows[n+o])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,u=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[u].penState.foreground}var c={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(c)},t.setBkgData=function(e){vt.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},t.setRollUpRows=function(e){this.nrRollUpRows=e},t.rollUp=function(){if(null!==this.nrRollUpRows){vt.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),vt.log("INFO","Rolling up")}else vt.log("DEBUG","roll_up but nrRollUpRows not set yet")},t.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,a=0;a<15;a++){var i=this.rows[a].getTextString();i&&(n=a+1,e?t.push("Row "+n+": '"+i+"'"):t.push(i.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},t.getTextAndFormat=function(){return this.rows},e}(),Et=function(){function e(e,t){this.chNr=void 0,this.outputFilter=void 0,this.mode=void 0,this.verbose=void 0,this.displayedMemory=void 0,this.nonDisplayedMemory=void 0,this.lastOutputScreen=void 0,this.currRollUpRow=void 0,this.writeScreen=void 0,this.cueStartTime=void 0,this.lastCueEndTime=void 0,this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new Tt,this.nonDisplayedMemory=new Tt,this.lastOutputScreen=new Tt,this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}var t=e.prototype;return t.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[14],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null},t.getHandler=function(){return this.outputFilter},t.setHandler=function(e){this.outputFilter=e},t.setPAC=function(e){this.writeScreen.setPAC(e)},t.setBkgData=function(e){this.writeScreen.setBkgData(e)},t.setMode=function(e){e!==this.mode&&(this.mode=e,vt.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},t.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";vt.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(vt.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},t.ccRCL=function(){vt.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},t.ccBS=function(){vt.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},t.ccAOF=function(){},t.ccAON=function(){},t.ccDER=function(){vt.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},t.ccRU=function(e){vt.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},t.ccFON=function(){vt.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},t.ccRDC=function(){vt.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},t.ccTR=function(){vt.log("INFO","TR"),this.setMode("MODE_TEXT")},t.ccRTD=function(){vt.log("INFO","RTD"),this.setMode("MODE_TEXT")},t.ccEDM=function(){vt.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},t.ccCR=function(){vt.log("INFO","CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},t.ccENM=function(){vt.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},t.ccEOC=function(){if(vt.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,vt.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},t.ccTO=function(e){vt.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},t.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16;t.foreground=["white","green","blue","cyan","red","yellow","magenta"][r]}vt.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},t.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=vt.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue(),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},t.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),kt=function(){function e(e,t,r){this.field=void 0,this.outputs=void 0,this.channels=void 0,this.currChNr=void 0,this.lastCmdA=void 0,this.lastCmdB=void 0,this.lastTime=void 0,this.dataCounters=void 0,this.field=e||1,this.outputs=[t,r],this.channels=[new Et(1,t),new Et(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}var t=e.prototype;return t.getHandler=function(e){return this.channels[e].getHandler()},t.setHandler=function(e,t){this.channels[e].setHandler(t)},t.addData=function(e,t){var r,n,a,i=!1;this.lastTime=e,vt.setTime(e);for(var o=0;o<t.length;o+=2)n=127&t[o],a=127&t[o+1],0!==n||0!==a?(vt.log("DATA","["+gt([t[o],t[o+1]])+"] -> ("+gt([n,a])+")"),(r=this.parseCmd(n,a))||(r=this.parseMidrow(n,a)),r||(r=this.parsePAC(n,a)),r||(r=this.parseBackgroundAttributes(n,a)),r||(i=this.parseChars(n,a))&&(this.currChNr&&this.currChNr>=0?this.channels[this.currChNr-1].insertChars(i):vt.log("WARNING","No channel found yet. TEXT-MODE?")),r?this.dataCounters.cmd+=2:i?this.dataCounters.char+=2:(this.dataCounters.other+=2,vt.log("WARNING","Couldn't parse cleaned data "+gt([n,a])+" orig: "+gt([t[o],t[o+1]])))):this.dataCounters.padding+=2},t.parseCmd=function(e,t){var r;if(!((20===e||28===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=33&&t<=35))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,vt.log("DEBUG","Repeated command ("+gt([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var n=this.channels[r-1];return 20===e||28===e?32===t?n.ccRCL():33===t?n.ccBS():34===t?n.ccAOF():35===t?n.ccAON():36===t?n.ccDER():37===t?n.ccRU(2):38===t?n.ccRU(3):39===t?n.ccRU(4):40===t?n.ccFON():41===t?n.ccRDC():42===t?n.ccTR():43===t?n.ccRTD():44===t?n.ccEDM():45===t?n.ccCR():46===t?n.ccENM():47===t&&n.ccEOC():n.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.parseMidrow=function(e,t){var r=null;return(17===e||25===e)&&t>=32&&t<=47&&((r=17===e?1:2)!==this.currChNr?(vt.log("ERROR","Mismatch channel in midrow parsing"),!1):(this.channels[r-1].ccMIDROW(t),vt.log("DEBUG","MIDROW ("+gt([e,t])+")"),!0))},t.parsePAC=function(e,t){var r,n;if(!((e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127||(16===e||24===e)&&t>=64&&t<=95))return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=t>=64&&t<=95?1===r?ct[e]:ft[e]:1===r?dt[e]:ht[e];var a=this.interpretPAC(n,t);return this.channels[r-1].setPAC(a),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},t.interpretPAC=function(e,t){var r,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},t.parseChars=function(e,t){var r,n=null,a=null,i=null;(e>=25?(n=2,i=e-8):(n=1,i=e),i>=17&&i<=19)?(r=17===i?t+80:18===i?t+112:t+144,vt.log("INFO","Special char '"+lt(r)+"' in channel "+n),a=[r]):e>=32&&e<=127&&(a=0===t?[e]:[e,t]);if(a){var o=gt(a);vt.log("DEBUG","Char codes =  "+o.join(",")),this.lastCmdA=null,this.lastCmdB=null}return a},t.parseBackgroundAttributes=function(e,t){var r,n,a;return((16===e||24===e)&&t>=32&&t<=47||(23===e||31===e)&&t>=45&&t<=47)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=pt[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),a=e<24?1:2,this.channels[a-1].setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},t.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},t.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}(),St=function(){function e(e,t){this.timelineController=void 0,this.trackName=void 0,this.startTime=void 0,this.endTime=void 0,this.screen=void 0,this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}var t=e.prototype;return t.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},t.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}(),_t=function(e,t,r){return e.substr(r||0,t.length)===t},Ct=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()};function Pt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}var At=function(e){var t,r;function n(t){var r;if((r=e.call(this,t,u.default.MEDIA_ATTACHING,u.default.MEDIA_DETACHING,u.default.FRAG_PARSING_USERDATA,u.default.FRAG_DECRYPTED,u.default.MANIFEST_LOADING,u.default.MANIFEST_LOADED,u.default.FRAG_LOADED,u.default.INIT_PTS_FOUND)||this).media=null,r.config=void 0,r.enabled=!0,r.Cues=void 0,r.textTracks=[],r.tracks=[],r.initPTS=[],r.unparsedVttFrags=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties=void 0,r.cea608Parser=void 0,r.lastSn=-1,r.prevCC=-1,r.vttCCs=null,r.hls=t,r.config=t.config,r.Cues=t.config.cueHandler,r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new St(Pt(r),"textTrack1"),a=new St(Pt(r),"textTrack2");r.cea608Parser=new kt(0,n,a)}return r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.addCues=function(e,t,r,n){for(var a,i,o,s,l=this.cueRanges,u=!1,c=l.length;c--;){var d=l[c],f=(a=d[0],i=d[1],o=t,s=r,Math.min(i,s)-Math.max(a,o));if(f>=0&&(d[0]=Math.min(d[0],t),d[1]=Math.max(d[1],r),u=!0,f/(r-t)>.5))return}u||l.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},a.onInitPtsFound=function(e){var t=this,r=e.frag,n=e.id,a=e.initPTS,i=this.unparsedVttFrags;"main"===n&&(this.initPTS[r.cc]=a),i.length&&(this.unparsedVttFrags=[],i.forEach(function(e){t.onFragLoaded(e)}))},a.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},a.createCaptionsTrack=function(e){var t=this.captionsProperties,r=this.captionsTracks,n=this.media,a=t[e],i=a.label,o=a.languageCode;if(!r[e]){var s=this.getExistingTrack(e);if(s)r[e]=s,Re(r[e]),Oe(r[e],n);else{var l=this.createTextTrack("captions",i,o);l&&(l[e]=!0,r[e]=l)}}},a.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},a.destroy=function(){e.prototype.destroy.call(this)},a.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},a.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){Re(e[t]),delete e[t]})},a.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},a._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)Re(t[r])}},a.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,n){var a;if(n<r.length){for(var i=null,o=0;o<r.length;o++)if(wt(r[o],e)){i=r[o];break}i&&(a=i)}a||(a=t.createTextTrack("subtitles",e.name,e.lang)),e.default?a.mode=t.hls.subtitleDisplay?"showing":"hidden":a.mode="disabled",t.textTracks.push(a)})}},a.onFragLoaded=function(e){var t=e.frag,r=e.payload,n=this.cea608Parser,a=this.initPTS,i=this.lastSn,o=this.unparsedVttFrags;if("main"===t.type){var s=t.sn;t.sn!==i+1&&n&&n.reset(),this.lastSn=s}else if("subtitle"===t.type)if(r.byteLength){if(!Object(l.isFiniteNumber)(a[t.cc]))return o.push(e),void(a.length&&this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t}));var c=t.decryptdata;null!=c&&null!=c.key&&"AES-128"===c.method||this._parseVTTs(t,r)}else this.hls.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:t})},a._parseVTTs=function(e,t){var r=this.hls,n=this.prevCC,a=this.textTracks,i=this.vttCCs;i[e.cc]||(i[e.cc]={start:e.start,prevCC:n,new:!0},this.prevCC=e.cc),function(e,t,r,n,a,i){var o,s=Object(Ae.utf8ArrayToStr)(new Uint8Array(e)).trim().replace(/\r\n|\n\r|\n|\r/g,"\n").split("\n"),u="00:00.000",c=0,d=0,f=0,h=[],p=!0,v=!1,g=new at;g.oncue=function(e){var t=r[n],a=r.ccOffset;t&&t.new&&(void 0!==d?a=r.ccOffset=t.start:function(e,t,r){var n=e[t],a=e[n.prevCC];if(!a||!a.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;a&&a.new;)e.ccOffset+=n.start-a.start,n.new=!1,a=e[(n=a).prevCC];e.presentationOffset=r}(r,n,f)),f&&(a=f-r.presentationOffset),v&&(e.startTime+=a-d,e.endTime+=a-d),e.id=Ct(e.startTime.toString())+Ct(e.endTime.toString())+Ct(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&h.push(e)},g.onparsingerror=function(e){o=e},g.onflush=function(){o&&i?i(o):a(h)},s.forEach(function(e){if(p){if(_t(e,"X-TIMESTAMP-MAP=")){p=!1,v=!0,e.substr(16).split(",").forEach(function(e){_t(e,"LOCAL:")?u=e.substr(6):_t(e,"MPEGTS:")&&(c=parseInt(e.substr(7)))});try{t+(9e4*r[n].start||0)<0&&(t+=8589934592),c-=t,d=function(e){var t=parseInt(e.substr(-3)),r=parseInt(e.substr(-6,2)),n=parseInt(e.substr(-9,2)),a=e.length>9?parseInt(e.substr(0,e.indexOf(":"))):0;if(!(Object(l.isFiniteNumber)(t)&&Object(l.isFiniteNumber)(r)&&Object(l.isFiniteNumber)(n)&&Object(l.isFiniteNumber)(a)))throw Error("Malformed X-TIMESTAMP-MAP: Local:"+e);return t+=1e3*r,(t+=6e4*n)+36e5*a}(u)/1e3,f=c/9e4}catch(e){v=!1,o=e}return}""===e&&(p=!1)}g.parse(e+"\n")}),g.flush()}(t,this.initPTS[e.cc],i,e.cc,function(t){var n=a[e.level];"disabled"!==n.mode?(t.forEach(function(e){if(!n.cues.getCueById(e.id))try{if(n.addCue(e),!n.cues.getCueById(e.id))throw new Error("addCue is failed for: "+e)}catch(r){c.logger.debug("Failed occurred on adding cues: "+r);var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,n.addCue(t)}}),r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})):r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})},function(t){c.logger.log("Failed to parse VTT cue: "+t),r.trigger(u.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},a.onFragDecrypted=function(e){var t=e.frag,r=e.payload;if("subtitle"===t.type){if(!Object(l.isFiniteNumber)(this.initPTS[t.cc]))return void this.unparsedVttFrags.push(e);this._parseVTTs(t,r)}},a.onFragParsingUserdata=function(e){if(this.enabled&&this.cea608Parser)for(var t=0;t<e.samples.length;t++){var r=e.samples[t].bytes;if(r){var n=this.extractCea608Data(r);this.cea608Parser.addData(e.samples[t].pts,n)}}},a.extractCea608Data=function(e){for(var t,r,n,a=31&e[0],i=2,o=[],s=0;s<a;s++)t=e[i++],r=127&e[i++],n=127&e[i++],0===r&&0===n||0!=(4&t)&&0==(3&t)&&(o.push(r),o.push(n));return o},n}(f);function Ot(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var Rt,It=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.MANIFEST_LOADED,u.default.SUBTITLE_TRACK_LOADED)||this).tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r.queuedDefaultTrack=null,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i=n.prototype;return i.destroy=function(){f.prototype.destroy.call(this)},i.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(Object(l.isFiniteNumber)(this.queuedDefaultTrack)&&(this.subtitleTrack=this.queuedDefaultTrack,this.queuedDefaultTrack=null),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},i.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),Object(l.isFiniteNumber)(this.subtitleTrack)&&(this.queuedDefaultTrack=this.subtitleTrack),Ot(this.media.textTracks).forEach(function(e){Re(e)}),this.subtitleTrack=-1,this.media=null)},i.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(u.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},i.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,a=this.trackId,i=this.tracks,o=i[a];if(r>=i.length||r!==a||!o||this.stopped)this._clearReloadTimer();else if(c.logger.log("subtitle track "+r+" loaded"),n.live){var s=ee(o.details,n,e.stats.trequest);c.logger.log("Reloading live subtitle playlist in "+s+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},s)}else this._clearReloadTimer()},i.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},i.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},i._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},i._loadCurrentTrack=function(){var e=this.trackId,t=this.tracks,r=this.hls,n=t[e];e<0||!n||n.details&&!n.details.live||(c.logger.log("Loading subtitle track "+e),r.trigger(u.default.SUBTITLE_TRACK_LOADING,{url:n.url,id:e}))},i._toggleTrackModes=function(e){var t=this.media,r=this.subtitleDisplay,n=this.trackId;if(t){var a=Ot(t.textTracks);if(-1===e)[].slice.call(a).forEach(function(e){e.mode="disabled"});else{var i=a[n];i&&(i.mode="disabled")}var o=a[e];o&&(o.mode=r?"showing":"hidden")}},i._setSubtitleTrackInternal=function(e){var t=this.hls,r=this.tracks;!Object(l.isFiniteNumber)(e)||e<-1||e>=r.length||(this.trackId=e,c.logger.log("Switching to subtitle track "+e),t.trigger(u.default.SUBTITLE_TRACK_SWITCH,{id:e}),this._loadCurrentTrack())},i._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=Ot(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},(a=[{key:"subtitleTracks",get:function(){return this.tracks}},{key:"subtitleTrack",get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,a),n}(f),Dt=r("./src/crypt/decrypter.js"),Lt=window.performance,xt=function(e){var t,r;function n(t,r){var n;return(n=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHING,u.default.ERROR,u.default.KEY_LOADED,u.default.FRAG_LOADED,u.default.SUBTITLE_TRACKS_UPDATED,u.default.SUBTITLE_TRACK_SWITCH,u.default.SUBTITLE_TRACK_LOADED,u.default.SUBTITLE_FRAG_PROCESSED,u.default.LEVEL_UPDATED)||this).fragmentTracker=r,n.config=t.config,n.state=ce,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new Dt.default(t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(n)),n}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a=n.prototype;return a.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=fe,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var a,i=t.start,o=0;o<n.length;o++)if(i>=n[o].start&&i<=n[o].end){a=n[o];break}var s=t.start+t.duration;a?a.end=s:(a={start:i,end:s},n.push(a))}}},a.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=fe},a.onMediaDetaching=function(){var e=this;this.media&&(this.media.removeEventListener("seeking",this._onMediaSeeking),this.fragmentTracker.removeAllFragments(),this.currentTrackId=-1,this.tracks.forEach(function(t){e.tracksBuffered[t.id]=[]}),this.media=null,this.state=ce)},a.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=fe)},a.onSubtitleTracksUpdated=function(e){var t=this;c.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},a.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,this.tracks&&this.tracks.length&&-1!==this.currentTrackId){var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)}else this.clearInterval()},a.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this.currentTrackId,a=this.tracks,i=a[n];t>=a.length||t!==n||!i||(r.live&&function(e,t,r){void 0===r&&(r=0);var n=-1;$(e,t,function(e,t,r){t.start=e.start,n=r});var a=t.fragments;if(n<0)a.forEach(function(e){e.start+=r});else for(var i=n+1;i<a.length;i++)a[i].start=a[i-1].start+a[i-1].duration}(i.details,r,this.lastAVStart),i.details=r,this.setInterval(500))},a.onKeyLoaded=function(){this.state===he&&(this.state=fe)},a.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,a=this.hls;if(this.state===pe&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var i=Lt.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=Lt.now();a.trigger(u.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:i,tdecrypt:t}})})}},a.onLevelUpdated=function(e){var t=e.details.fragments;this.lastAVStart=t.length?t[0].start:0},a.doTick=function(){if(this.media)switch(this.state){case fe:var e=this.config,t=this.currentTrackId,r=this.fragmentTracker,n=this.media,a=this.tracks;if(!a||!a[t]||!a[t].details)break;var i,o=e.maxBufferHole,s=e.maxFragLookUpTolerance,l=Math.min(e.maxBufferLength,e.maxMaxBufferLength),d=j.bufferedInfo(this._getBuffered(),n.currentTime,o),f=d.end,h=d.len,p=a[t].details,v=p.fragments,g=v.length,m=v[g-1].start+v[g-1].duration;if(h>l)return;var y=this.fragPrevious;f<m?(y&&p.hasProgramDateTime&&(i=ae(v,y.endProgramDateTime,s)),i||(i=ie(y,v,f,s))):i=v[g-1],i&&i.encrypted?(c.logger.log("Loading key for "+i.sn),this.state=he,this.hls.trigger(u.default.KEY_LOADING,{frag:i})):i&&r.getState(i)===x&&(this.fragCurrent=i,this.state=pe,this.hls.trigger(u.default.FRAG_LOADING,{frag:i}))}else this.state=fe},a.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},a._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},a.onMediaSeeking=function(){this.fragPrevious=null},n}(_e);!function(e){e.WIDEVINE="com.widevine.alpha",e.PLAYREADY="com.microsoft.playready"}(Rt||(Rt={}));var Mt="undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null;var Ft=function(e){var t,r;function n(t){var r;return(r=e.call(this,t,u.default.MEDIA_ATTACHED,u.default.MEDIA_DETACHED,u.default.MANIFEST_PARSED)||this)._widevineLicenseUrl=void 0,r._licenseXhrSetup=void 0,r._emeEnabled=void 0,r._requestMediaKeySystemAccess=void 0,r._config=void 0,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._requestLicenseFailureCount=0,r._onMediaEncrypted=function(e){c.logger.log('Media is encrypted using "'+e.initDataType+'" init data type'),r._attemptSetMediaKeys(),r._generateRequestWithPreferredKeySession(e.initDataType,e.initData)},r._config=t.config,r._widevineLicenseUrl=r._config.widevineLicenseUrl,r._licenseXhrSetup=r._config.licenseXhrSetup,r._emeEnabled=r._config.emeEnabled,r._requestMediaKeySystemAccess=r._config.requestMediaKeySystemAccessFunc,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r;var a,i=n.prototype;return i.getLicenseServerUrl=function(e){switch(e){case Rt.WIDEVINE:if(!this._widevineLicenseUrl)break;return this._widevineLicenseUrl}throw new Error('no license server URL configured for key-system "'+e+'"')},i._attemptKeySystemAccess=function(e,t,r){var n=this,a=function(e,t,r){switch(e){case Rt.WIDEVINE:return function(e,t){var r={videoCapabilities:[]};return t.forEach(function(e){r.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[r]}(0,r);default:throw new Error("Unknown key-system: "+e)}}(e,0,r);c.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,a).then(function(t){n._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){c.logger.error('Failed to obtain key-system "'+e+'" access:',t)})},i._onMediaKeySystemAccessObtained=function(e,t){var r=this;c.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then(function(t){n.mediaKeys=t,c.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()}).catch(function(e){c.logger.error("Failed to create media-keys:",e)})},i._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},i._onNewMediaKeySession=function(e){var t=this;c.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(r){t._onKeySessionMessage(e,r.message)},!1)},i._onKeySessionMessage=function(e,t){c.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){c.logger.log("Received license data (length: "+(t?t.byteLength:t)+"), updating key-session"),e.update(t)})},i._attemptSetMediaKeys=function(){if(!this._media)throw new Error("Attempted to set mediaKeys without first attaching a media element");if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return c.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});c.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},i._generateRequestWithPreferredKeySession=function(e,t){var r=this,n=this._mediaKeysList[0];if(!n)return c.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(n.mediaKeysSessionInitialized)c.logger.warn("Key-Session already initialized but requested again");else{var a=n.mediaKeysSession;if(!a)return c.logger.error("Fatal: Media is encrypted but no key-session existing"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0});if(!t)return c.logger.warn("Fatal: initData required for generating a key session is null"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_INIT_DATA,fatal:!0});c.logger.log('Generating key-session request for "'+e+'" init data type'),n.mediaKeysSessionInitialized=!0,a.generateRequest(e,t).then(function(){c.logger.debug("Key-session generation succeeded")}).catch(function(e){c.logger.error("Error generating key-session request:",e),r.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})}},i._createLicenseXhr=function(e,t,r){var n=new XMLHttpRequest,a=this._licenseXhrSetup;try{if(a)try{a(n,e)}catch(t){n.open("POST",e,!0),a(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){throw new Error("issue setting up KeySystem license XHR "+e)}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},i._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,c.logger.log("License request succeeded"),"arraybuffer"!==e.responseType&&c.logger.warn("xhr response type was not set to the expected arraybuffer for license request"),n(e.response);else{if(c.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),this._requestLicenseFailureCount++,this._requestLicenseFailureCount>3)return void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0});var a=3-this._requestLicenseFailureCount+1;c.logger.warn("Retrying license request, "+a+" attempts left"),this._requestLicense(r,n)}}},i._generateLicenseRequestChallenge=function(e,t){switch(e.mediaKeySystemDomain){case Rt.WIDEVINE:return t}throw new Error("unsupported key-system: "+e.mediaKeySystemDomain)},i._requestLicense=function(e,t){c.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return c.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});try{var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),a=this._createLicenseXhr(n,e,t);c.logger.log("Sending license request to URL: "+n);var i=this._generateLicenseRequestChallenge(r,e);a.send(i)}catch(e){c.logger.error("Failure requesting DRM license: "+e),this.hls.trigger(u.default.ERROR,{type:s.ErrorTypes.KEY_SYSTEM_ERROR,details:s.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}},i.onMediaAttached=function(e){if(this._emeEnabled){var t=e.media;this._media=t,t.addEventListener("encrypted",this._onMediaEncrypted)}},i.onMediaDetached=function(){this._media&&(this._media.removeEventListener("encrypted",this._onMediaEncrypted),this._media=null)},i.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),r=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(Rt.WIDEVINE,t,r)}},(a=[{key:"requestMediaKeySystemAccess",get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess}}])&&function(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}(n.prototype,a),n}(f);function Nt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var Bt=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){Nt(e,t,r[t])})}return e}({autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:We,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:Me,bufferController:Ne,capLevelController:je,fpsController:Ve,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:Mt},{cueHandler:n,enableCEA708Captions:!0,enableWebVTT:!0,captionsTextTrack1Label:"English",captionsTextTrack1LanguageCode:"en",captionsTextTrack2Label:"Spanish",captionsTextTrack2LanguageCode:"es"},{subtitleStreamController:xt,subtitleTrackController:It,timelineController:At,audioStreamController:ze,audioTrackController:Ye,emeController:Ft});function jt(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ut(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Vt(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function Gt(e,t,r){return t&&Vt(e.prototype,t),r&&Vt(e,r),e}r.d(t,"default",function(){return Ht});var Ht=function(e){var t,r;function n(t){var r;void 0===t&&(t={}),(r=e.call(this)||this).config=void 0,r._autoLevelCapping=void 0,r.abrController=void 0,r.capLevelController=void 0,r.levelController=void 0,r.streamController=void 0,r.networkControllers=void 0,r.audioTrackController=void 0,r.subtitleTrackController=void 0,r.emeController=void 0,r.coreComponents=void 0,r.media=null,r.url=null;var a=n.DefaultConfig;if((t.liveSyncDurationCount||t.liveMaxLatencyDurationCount)&&(t.liveSyncDuration||t.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");r.config=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){jt(e,t,r[t])})}return e}({},a,t);var i=Ut(r).config;if(void 0!==i.liveMaxLatencyDurationCount&&i.liveMaxLatencyDurationCount<=i.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==i.liveMaxLatencyDuration&&(void 0===i.liveSyncDuration||i.liveMaxLatencyDuration<=i.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');Object(c.enableLogs)(i.debug),r._autoLevelCapping=-1;var o=r.abrController=new i.abrController(Ut(r)),s=new i.bufferController(Ut(r)),l=r.capLevelController=new i.capLevelController(Ut(r)),u=new i.fpsController(Ut(r)),d=new I(Ut(r)),f=new D(Ut(r)),h=new L(Ut(r)),p=new Ie(Ut(r)),v=r.levelController=new we(Ut(r)),g=new N(Ut(r)),m=[v,r.streamController=new Ce(Ut(r),g)],y=i.audioStreamController;y&&m.push(new y(Ut(r),g)),r.networkControllers=m;var b=[d,f,h,o,s,l,u,p,g];if(y=i.audioTrackController){var T=new y(Ut(r));r.audioTrackController=T,b.push(T)}if(y=i.subtitleTrackController){var E=new y(Ut(r));r.subtitleTrackController=E,m.push(E)}if(y=i.emeController){var k=new y(Ut(r));r.emeController=k,b.push(k)}return(y=i.subtitleStreamController)&&m.push(new y(Ut(r),g)),(y=i.timelineController)&&b.push(new y(Ut(r))),r.coreComponents=b,r}r=e,(t=n).prototype=Object.create(r.prototype),t.prototype.constructor=t,t.__proto__=r,n.isSupported=function(){return function(){var e=H();if(!e)return!1;var t=self.SourceBuffer||self.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}()},Gt(n,null,[{key:"version",get:function(){return"0.13.2"}},{key:"Events",get:function(){return u.default}},{key:"ErrorTypes",get:function(){return s.ErrorTypes}},{key:"ErrorDetails",get:function(){return s.ErrorDetails}},{key:"DefaultConfig",get:function(){return n.defaultConfig?n.defaultConfig:Bt},set:function(e){n.defaultConfig=e}}]);var a=n.prototype;return a.destroy=function(){c.logger.log("destroy"),this.trigger(u.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},a.attachMedia=function(e){c.logger.log("attachMedia"),this.media=e,this.trigger(u.default.MEDIA_ATTACHING,{media:e})},a.detachMedia=function(){c.logger.log("detachMedia"),this.trigger(u.default.MEDIA_DETACHING),this.media=null},a.loadSource=function(e){e=o.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),c.logger.log("loadSource:"+e),this.url=e,this.trigger(u.default.MANIFEST_LOADING,{url:e})},a.startLoad=function(e){void 0===e&&(e=-1),c.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},a.stopLoad=function(){c.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},a.swapAudioCodec=function(){c.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},a.recoverMediaError=function(){c.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),e&&this.attachMedia(e)},Gt(n,[{key:"levels",get:function(){return this.levelController.levels}},{key:"currentLevel",get:function(){return this.streamController.currentLevel},set:function(e){c.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()}},{key:"nextLevel",get:function(){return this.streamController.nextLevel},set:function(e){c.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()}},{key:"loadLevel",get:function(){return this.levelController.level},set:function(e){c.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e}},{key:"nextLoadLevel",get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e}},{key:"firstLevel",get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){c.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e}},{key:"startLevel",get:function(){return this.levelController.startLevel},set:function(e){c.logger.log("set startLevel:"+e),-1!==e&&(e=Math.max(e,this.minAutoLevel)),this.levelController.startLevel=e}},{key:"capLevelToPlayerSize",set:function(e){var t=!!e;t!==this.config.capLevelToPlayerSize&&(t?this.capLevelController.startCapping():(this.capLevelController.stopCapping(),this.autoLevelCapping=-1,this.streamController.nextLevelSwitch()),this.config.capLevelToPlayerSize=t)}},{key:"autoLevelCapping",get:function(){return this._autoLevelCapping},set:function(e){c.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e}},{key:"bandwidthEstimate",get:function(){var e=this.abrController._bwEstimator;return e?e.getEstimate():NaN}},{key:"autoLevelEnabled",get:function(){return-1===this.levelController.manualLevel}},{key:"manualLevel",get:function(){return this.levelController.manualLevel}},{key:"minAutoLevel",get:function(){for(var e=this.levels,t=this.config.minAutoBitrate,r=e?e.length:0,n=0;n<r;n++)if((e[n].realBitrate?Math.max(e[n].realBitrate,e[n].bitrate):e[n].bitrate)>t)return n;return 0}},{key:"maxAutoLevel",get:function(){var e=this.levels,t=this.autoLevelCapping;return-1===t&&e&&e.length?e.length-1:t}},{key:"nextAutoLevel",get:function(){return Math.min(Math.max(this.abrController.nextAutoLevel,this.minAutoLevel),this.maxAutoLevel)},set:function(e){this.abrController.nextAutoLevel=Math.max(this.minAutoLevel,e)}},{key:"audioTracks",get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]}},{key:"audioTrack",get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)}},{key:"liveSyncPosition",get:function(){return this.streamController.liveSyncPosition}},{key:"subtitleTracks",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]}},{key:"subtitleTrack",get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)}},{key:"subtitleDisplay",get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)}}]),n}(W);Ht.defaultConfig=void 0},"./src/polyfills/number-isFinite.js":function(e,t,r){"use strict";r.r(t),r.d(t,"isFiniteNumber",function(){return n});var n=Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/utils/get-self-scope.js":function(e,t,r){"use strict";function n(){return"undefined"==typeof window?self:window}r.r(t),r.d(t,"getSelfScope",function(){return n})},"./src/utils/logger.js":function(e,t,r){"use strict";r.r(t),r.d(t,"enableLogs",function(){return l}),r.d(t,"logger",function(){return u});var n=r("./src/utils/get-self-scope.js");function a(){}var i={trace:a,debug:a,log:a,warn:a,info:a,error:a},o=i;var s=Object(n.getSelfScope)(),l=function(e){if(s.console&&!0===e||"object"==typeof e){!function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];r.forEach(function(t){o[t]=e[t]?e[t].bind(e):function(e){var t=s.console[e];return t?function(){for(var r=arguments.length,n=new Array(r),a=0;a<r;a++)n[a]=arguments[a];n[0]&&(n[0]=function(e,t){return"["+e+"] > "+t}(e,n[0])),t.apply(s.console,n)}:a}(t)})}(e,"debug","log","info","warn","error");try{o.log()}catch(e){o=i}}else o=i},u=o}}).default},e.exports=n())},dv4SV:function(e,t,r){},dvcz5:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dMVZn")),o=a(r("dlSNA")),s=a(r("dQILm")),l=a(r("dlwsE")),u=a(r("dW8MJ")),c=a(r("da1gu")),d=a(r("dNsbk")),f=a(r("dPJYZ")),h=a(r("d7W2i")),p=a(r("d9B4+")),v=n(r("dcDcd")),g=a(r("dTSYQ")),m=a(r("diAfH")),y=a(r("dvu4D")),b=a(r("dX2cd")),T=a(r("dtPgb")),E=a(r("dEdwz")),k=a(r("dzFvY")),S=a(r("dLgmY")),_=a(r("dFcgA")),C=n(r("dqdLH")),P=r("dEVUy"),w=r("dtJTW"),A=a(r("drzyQ")),O={children:p.default.any,width:p.default.oneOfType([p.default.string,p.default.number]),height:p.default.oneOfType([p.default.string,p.default.number]),fluid:p.default.bool,muted:p.default.bool,playsInline:p.default.bool,aspectRatio:p.default.string,className:p.default.string,videoId:p.default.string,startTime:p.default.number,loop:p.default.bool,autoPlay:p.default.bool,src:p.default.string,poster:p.default.string,preload:p.default.oneOf(["auto","metadata","none"]),onLoadStart:p.default.func,onWaiting:p.default.func,onCanPlay:p.default.func,onCanPlayThrough:p.default.func,onPlaying:p.default.func,onEnded:p.default.func,onSeeking:p.default.func,onSeeked:p.default.func,onPlay:p.default.func,onPause:p.default.func,onProgress:p.default.func,onDurationChange:p.default.func,onError:p.default.func,onSuspend:p.default.func,onAbort:p.default.func,onEmptied:p.default.func,onStalled:p.default.func,onLoadedMetadata:p.default.func,onLoadedData:p.default.func,onTimeUpdate:p.default.func,onRateChange:p.default.func,onVolumeChange:p.default.func,store:p.default.object},R=function(e){function t(e){var r;return(0,l.default)(this,t),(r=(0,c.default)(this,(0,d.default)(t).call(this,e))).controlsHideTimer=null,r.video=null,r.manager=new m.default(e.store),r.actions=r.manager.getActions(),r.manager.subscribeToPlayerStateChange(r.handleStateChange.bind((0,f.default)(r))),r.getStyle=r.getStyle.bind((0,f.default)(r)),r.handleResize=r.handleResize.bind((0,f.default)(r)),r.getChildren=r.getChildren.bind((0,f.default)(r)),r.handleMouseMove=(0,w.throttle)(r.handleMouseMove.bind((0,f.default)(r)),250),r.handleMouseDown=r.handleMouseDown.bind((0,f.default)(r)),r.startControlsTimer=r.startControlsTimer.bind((0,f.default)(r)),r.handleFullScreenChange=r.handleFullScreenChange.bind((0,f.default)(r)),r.handleKeyDown=r.handleKeyDown.bind((0,f.default)(r)),r.handleFocus=r.handleFocus.bind((0,f.default)(r)),r.handleBlur=r.handleBlur.bind((0,f.default)(r)),r}return(0,h.default)(t,e),(0,u.default)(t,[{key:"componentDidMount",value:function(){this.handleResize(),window.addEventListener("resize",this.handleResize),A.default.addEventListener(this.handleFullScreenChange)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.handleResize),A.default.removeEventListener(this.handleFullScreenChange),this.controlsHideTimer&&window.clearTimeout(this.controlsHideTimer)}},{key:"getDefaultChildren",value:function(e){var t=this;return[v.default.createElement(E.default,{ref:function(e){t.video=e,t.manager.video=t.video},key:"video",order:0},e),v.default.createElement(T.default,{key:"poster-image",order:1}),v.default.createElement(b.default,{key:"loading-spinner",order:2}),v.default.createElement(k.default,{key:"bezel",order:3}),v.default.createElement(y.default,{key:"big-play-button",order:4}),v.default.createElement(_.default,{key:"control-bar",order:5}),v.default.createElement(S.default,{key:"shortcut",order:99})]}},{key:"getChildren",value:function(e){e.className;var t=e.children,r=(0,s.default)(e,["className","children"]),n=v.default.Children.toArray(this.props.children).filter(function(e){return!(0,w.isVideoChild)(e)}),a=this.getDefaultChildren(t);return(0,w.mergeAndSortChildren)(a,n,r)}},{key:"setWidthOrHeight",value:function(e,t,r){var n;"string"==typeof r?"auto"===r?n="auto":r.match(/\d+%/)&&(n=r):"number"==typeof r&&(n="".concat(r,"px")),Object.assign(e,(0,o.default)({},t,n))}},{key:"getStyle",value:function(){var e,t,r=this.props,n=r.fluid,a=r.aspectRatio,i=r.height,o=r.width,s=this.manager.getState().player,l={},u=(void 0!==a&&"auto"!==a?a:s.videoWidth?"".concat(s.videoWidth,":").concat(s.videoHeight):"16:9").split(":"),c=u[1]/u[0];return e=void 0!==o?o:void 0!==i?i/c:s.videoWidth||400,t=void 0!==i?i:e*c,n?l.paddingTop="".concat(100*c,"%"):(this.setWidthOrHeight(l,"width",e),this.setWidthOrHeight(l,"height",t)),l}},{key:"getState",value:function(){return this.manager.getState()}},{key:"play",value:function(){this.video.play()}},{key:"pause",value:function(){this.video.pause()}},{key:"load",value:function(){this.video.load()}},{key:"addTextTrack",value:function(){var e;(e=this.video).addTextTrack.apply(e,arguments)}},{key:"canPlayType",value:function(){var e;(e=this.video).canPlayType.apply(e,arguments)}},{key:"seek",value:function(e){this.video.seek(e)}},{key:"forward",value:function(e){this.video.forward(e)}},{key:"replay",value:function(e){this.video.replay(e)}},{key:"toggleFullscreen",value:function(){this.video.toggleFullscreen()}},{key:"subscribeToStateChange",value:function(e){return this.manager.subscribeToPlayerStateChange(e)}},{key:"handleResize",value:function(){}},{key:"handleFullScreenChange",value:function(e){e.target===this.manager.rootElement&&this.actions.handleFullscreenChange(A.default.isFullscreen)}},{key:"handleMouseDown",value:function(){this.startControlsTimer()}},{key:"handleMouseMove",value:function(){this.startControlsTimer()}},{key:"handleKeyDown",value:function(){this.startControlsTimer()}},{key:"startControlsTimer",value:function(){var e=this,t=3e3;v.default.Children.forEach(this.props.children,function(e){if(v.default.isValidElement(e)&&e.type===_.default){var r=e.props.autoHideTime;"number"==typeof r&&(t=r)}}),this.actions.userActivate(!0),clearTimeout(this.controlsHideTimer),this.controlsHideTimer=setTimeout(function(){e.actions.userActivate(!1)},t)}},{key:"handleStateChange",value:function(e,t){e.isFullscreen!==t.isFullscreen&&(this.handleResize(),(0,P.focusNode)(this.manager.rootElement)),this.forceUpdate()}},{key:"handleFocus",value:function(){this.actions.activate(!0)}},{key:"handleBlur",value:function(){this.actions.activate(!1)}},{key:"render",value:function(){var e=this,t=this.props.fluid,r=this.manager.getState().player,n=r.paused,a=r.hasStarted,o=r.waiting,s=r.seeking,l=r.isFullscreen,u=r.userActivity,c=(0,i.default)({},this.props,{player:r,actions:this.actions,manager:this.manager,store:this.manager.store,video:this.video?this.video.video:null}),d=this.getChildren(c);return v.default.createElement("div",{className:(0,g.default)({"video-react-controls-enabled":!0,"video-react-has-started":a,"video-react-paused":n,"video-react-playing":!n,"video-react-waiting":o,"video-react-seeking":s,"video-react-fluid":t,"video-react-fullscreen":l,"video-react-user-inactive":!u,"video-react-user-active":u,"video-react-workinghover":!C.IS_IOS},"video-react",this.props.className),style:this.getStyle(),ref:function(t){e.manager.rootElement=t},role:"region",onTouchStart:this.handleMouseDown,onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onKeyDown:this.handleKeyDown,onFocus:this.handleFocus,onBlur:this.handleBlur,tabIndex:"-1"},d)}},{key:"playbackRate",get:function(){return this.video.playbackRate},set:function(e){this.video.playbackRate=e}},{key:"muted",get:function(){return this.video.muted},set:function(e){this.video.muted=e}},{key:"volume",get:function(){return this.video.volume},set:function(e){this.video.volume=e}},{key:"videoWidth",get:function(){return this.video.videoWidth}},{key:"videoHeight",get:function(){return this.video.videoHeight}}]),t}(v.Component);t.default=R,R.contextTypes={store:p.default.object},R.propTypes=O,R.defaultProps={fluid:!0,muted:!1,playsInline:!1,preload:"auto",aspectRatio:"auto"},R.displayName="Player"},dvmJC:function(e,t,r){},dvrl2:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.getComponentConfigById=function(e){var t=c().components;return(0,i.default)(t,["id",e])},t.getLinkConfigById=function(e,t){var r=c().components;return(0,i.default)((0,o.default)((0,i.default)(r,["id",t]),"links"),function(t){return t.id===e})},t.getProductById=function(e){var t=c().partners.map(function(e){var t=(0,o.default)((0,s.default)(e),"0");return{key:t,components:(0,o.default)(e,t+".components")}});return(0,o.default)(t.find(function(t){return(0,l.default)((0,o.default)(t,"components"),function(t){return t.id===e})}),"key")};var n=u(r("dP/G1")),a=u(r("d3OWR")),i=u(r("dJ2m7")),o=u(r("dmwIZ")),s=u(r("d7GkX")),l=u(r("dMJIl"));function u(e){return e&&e.__esModule?e:{default:e}}function c(){if(c.components&&c.partners)return{components:c.components,partners:c.partners};var t=(0,o.default)(JSON.parse(e.env.EK_ANALYTICS_ENHANCED_ECOMMERCE||"{}"),"partners",[]),r=t.reduce(function(e,t){return(0,a.default)(e,(0,o.default)((0,n.default)(t),"0.components",[]))},[]);return c.partners=t,c.components=r,{components:r,partners:t}}}).call(this,r("dKCCg"))},dvu4D:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p={actions:d.default.object,player:d.default.object,position:d.default.string,className:d.default.string},v=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).handleClick=n.handleClick.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){}},{key:"handleClick",value:function(){this.props.actions.play()}},{key:"render",value:function(){var e=this.props,t=e.player,r=e.position;return f.default.createElement("button",{className:(0,h.default)("video-react-big-play-button","video-react-big-play-button-".concat(r),this.props.className,{"big-play-button-hide":t.hasStarted||!t.currentSrc}),type:"button","aria-live":"polite",tabIndex:"0",onClick:this.handleClick},f.default.createElement("span",{className:"video-react-control-text"},"Play Video"))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.defaultProps={position:"left"},v.displayName="BigPlayButton"},dvyNr:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.reportTracking=t.trackEvent=void 0;var n=y(r("djo6Y")),a=y(r("dQbLZ")),i=y(r("dm1cH")),o=y(r("dEJiy"));t.blendAnalytics=function(){for(var e={labels:[],title:""},t=void 0,r=void 0,n=void 0,a=arguments.length,s=Array(a),l=0;l<a;l++)s[l]=arguments[l];var u=!0,c=!1,d=void 0;try{for(var f,h=s[Symbol.iterator]();!(u=(f=h.next()).done);u=!0){var p=f.value;if(p)switch(void 0===p?"undefined":(0,o.default)(p)){case"string":e.labels.push(p),e.title||(e.title=p);break;case"object":var v;t=p.isExternal,r=p.labels,n=p.title,e.isExternal||(e.isExternal=t),r?(v=e.labels).push.apply(v,(0,i.default)(r)):n&&e.labels.push(n),e.title||(e.title=n)}}}catch(e){c=!0,d=e}finally{try{!u&&h.return&&h.return()}finally{if(c)throw d}}return e},t.extractLabel=E;var s=y(r("dk4Da")),l=y(r("dJ2m7")),u=y(r("dbNQv")),c=y(r("dOFL0")),d=y(r("dzZ0H")),f=y(r("dlSCD")),h=y(r("d3WF5")),p=y(r("dvN+2")),v=y(r("dPN/w")),g=y(r("dxweI")),m=y(r("dZsd2"));function y(e){return e&&e.__esModule?e:{default:e}}var b="true"===window.process.env.REPORTING_ENABLED&&!0,T=[];function E(e,t){var r=e,n=void 0===r?"undefined":(0,o.default)(r);if("function"===n&&(n=void 0===(r=e(t))?"undefined":(0,o.default)(r)),"string"===n)return r;if("object"===n&&null!==r){var a=r,i=a.headline,s=a.labels,l=void 0===s?[]:s,u=a.title;return l.length||(i&&l.push((0,m.default)(i)),u&&l.push((0,m.default)(u))),(0,v.default)(l,function(e,t){if(!e)return t;if(!t)return e;var r=t+":"+e;return r.length>255?e:r},"")}return""}t.trackEvent="object"===("undefined"==typeof dataLayer?"undefined":(0,o.default)(dataLayer))&&(0,f.default)(dataLayer.push)?function(e,t,r){return Promise.race([new Promise(function(t){return dataLayer.push((0,a.default)({},e,{eventCallback:t}))}),new Promise(function(e){return setTimeout(e,1e3)})]).then(function(){return r(t)})}:function(){return Promise.resolve()};var k=d.default;t.reportTracking=b?function(e,t,r){var n=(0,l.default)(T,{element:e,event:t,analytics:r});n?n.count+=1:T.push(k({analytics:r,count:1,element:e,event:t,stack:""}))}:p.default,b&&"object"===("undefined"==typeof window?"undefined":(0,o.default)(window))&&!(0,c.default)(window,"analytics")&&Object.defineProperty(window,"analytics",{get:function(){var e=(0,g.default)((0,s.default)((0,h.default)(T,function(e){var t=e.analytics,r=e.stack,i=(0,n.default)(e,["analytics","stack"]);return(0,a.default)({},i,{stack:r,label:E(t)})}),"label"),["event","element","label"]);return(0,u.default)(e,function(e){var t=e.count,r=e.element,n=e.event,a=e.label,i=e.stack;i?(console.groupCollapsed(r,n,"["+t+"] -",a),console.log(i),console.groupEnd()):console.log(r,n,"["+t+"] -",a)}),e.length+" trackers"}})},dwXLL:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("d7W2i")),c=n(r("dcDcd")),d=a(r("dDGqw")),f=r("dtJTW"),h=function(e){function t(e,r){var n;return(0,i.default)(this,t),n=(0,s.default)(this,(0,l.default)(t).call(this,e,r)),(0,f.deprecatedWarning)("PlaybackRate","PlaybackRateMenuButton"),n}return(0,u.default)(t,e),(0,o.default)(t,[{key:"render",value:function(){return c.default.createElement(d.default,this.props)}}]),t}(c.Component);t.default=h,h.displayName="PlaybackRate"},dwe7k:function(e,t,r){"use strict";var n=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.handleFullscreenChange=function(e){return{type:o,isFullscreen:e}},t.activate=function(e){return{type:s,activity:e}},t.userActivate=function(e){return{type:l,activity:e}},t.play=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"play",source:""};return this.video.play(),{type:i,operation:e}},t.pause=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"pause",source:""};return this.video.pause(),{type:i,operation:e}},t.togglePlay=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{action:"toggle-play",source:""};return this.video.togglePlay(),{type:i,operation:e}},t.seek=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"seek",source:""};return this.video.seek(e),{type:i,operation:t}},t.forward=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"forward-".concat(e),source:""};return this.video.forward(e),{type:i,operation:t}},t.replay=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"replay-".concat(e),source:""};return this.video.replay(e),{type:i,operation:t}},t.changeRate=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"change-rate",source:""};return this.video.playbackRate=e,{type:i,operation:t}},t.changeVolume=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:"change-volume",source:""},r=e;return e<0&&(r=0),e>1&&(r=1),this.video.volume=r,{type:i,operation:t}},t.mute=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{action:e?"muted":"unmuted",source:""};return this.video.muted=e,{type:i,operation:t}},t.toggleFullscreen=function(e){return a.default.enabled?(a.default.isFullscreen?a.default.exit():a.default.request(this.rootElement),{type:i,operation:{action:"toggle-fullscreen",source:""}}):{type:o,isFullscreen:!e.isFullscreen}},t.USER_ACTIVATE=t.PLAYER_ACTIVATE=t.FULLSCREEN_CHANGE=t.OPERATE=void 0;var a=n(r("drzyQ")),i="video-react/OPERATE";t.OPERATE=i;var o="video-react/FULLSCREEN_CHANGE";t.FULLSCREEN_CHANGE=o;var s="video-react/PLAYER_ACTIVATE";t.PLAYER_ACTIVATE=s;var l="video-react/USER_ACTIVATE";t.USER_ACTIVATE=l},dwy2R:function(e,t){e.exports=moment},dx8dI:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=o(r("dcDcd")),a=o(r("dFXTd")),i=o(r("dmwIZ"));function o(e){return e&&e.__esModule?e:{default:e}}o(r("d17x9")),r("dBNTa"),r("d7Eru"),t.default=function(e){var t=e.content,r=e.extraClassName;return n.default.createElement("div",{className:"fly-better-logo "+r},n.default.createElement(a.default,{content:t,className:(0,i.default)(t,"metadata.position","bottom-right")}))}},dxFFL:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p=a(r("dkXlQ")),v=a(r("dq+t5")),g=a(r("drsAN")),m=a(r("dGuGs")),y=r("dtJTW"),b={player:d.default.object,mouseTime:d.default.object,actions:d.default.object,className:d.default.string},T=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).getPercent=n.getPercent.bind((0,u.default)(n)),n.getNewTime=n.getNewTime.bind((0,u.default)(n)),n.stepForward=n.stepForward.bind((0,u.default)(n)),n.stepBack=n.stepBack.bind((0,u.default)(n)),n.handleMouseDown=n.handleMouseDown.bind((0,u.default)(n)),n.handleMouseMove=n.handleMouseMove.bind((0,u.default)(n)),n.handleMouseUp=n.handleMouseUp.bind((0,u.default)(n)),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"getPercent",value:function(){var e=this.props.player,t=e.currentTime,r=(e.seekingTime||t)/e.duration;return r>=1?1:r}},{key:"getNewTime",value:function(e){var t=this.props.player.duration,r=this.slider.calculateDistance(e)*t;return r===t?r-.1:r}},{key:"handleMouseDown",value:function(){}},{key:"handleMouseUp",value:function(e){var t=this.props.actions,r=this.getNewTime(e);t.seek(r),t.handleEndSeeking(r)}},{key:"handleMouseMove",value:function(e){var t=this.props.actions,r=this.getNewTime(e);t.handleSeekingTime(r)}},{key:"stepForward",value:function(){this.props.actions.forward(5)}},{key:"stepBack",value:function(){this.props.actions.replay(5)}},{key:"render",value:function(){var e=this,t=this.props,r=t.player,n=r.currentTime,a=r.seekingTime,i=r.duration,o=r.buffered,s=t.mouseTime,l=a||n;return f.default.createElement(p.default,{ref:function(t){e.slider=t},label:"video progress bar",className:(0,h.default)("video-react-progress-holder",this.props.className),valuenow:(100*this.getPercent()).toFixed(2),valuetext:(0,y.formatTime)(l,i),onMouseDown:this.handleMouseDown,onMouseMove:this.handleMouseMove,onMouseUp:this.handleMouseUp,getPercent:this.getPercent,stepForward:this.stepForward,stepBack:this.stepBack},f.default.createElement(g.default,{buffered:o,currentTime:l,duration:i}),f.default.createElement(m.default,{duration:i,mouseTime:s}),f.default.createElement(v.default,{currentTime:l,duration:i}))}}]),t}(f.Component);t.default=T,T.propTypes=b,T.displayName="SeekBar"},dxLSU:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.findAncestor=function(e,t){for(var r=e.parentElement;r&&!(r.matches||r.matchesSelector).call(r,t);)r=r.parentElement;return r}},dxbxn:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locationGetFullUrlByParams=t.locationSetParams=t.locationGetParams=void 0;var n=o(r("dQbLZ")),a=o(r("dsk9p"));t.appendSearchParams=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=arguments[1],r=e.split("#"),o=(0,a.default)(r,2),l=o[0],u=o[1],c=l.split("?"),d=(0,a.default)(c,2),f=d[0],h=d[1],p=i.default.parse(h,{arrayFormat:s}),v=(0,n.default)({},p,t);return""+f+i.default.stringify(v,{addQueryPrefix:!0,arrayFormat:s})+(u?"#"+u:"")};var i=o(r("dQyje"));function o(e){return e&&e.__esModule?e:{default:e}}var s="brackets";t.locationGetParams=function(){var e=window.location.search;return i.default.parse(e,{ignoreQueryPrefix:!0})},t.locationSetParams=function(e){var t=window.location.search,r=i.default.parse(t,{ignoreQueryPrefix:!0,arrayFormat:s}),a=(0,n.default)({},r,e),o=i.default.stringify(a,{addQueryPrefix:!0,arrayFormat:s});window.history.replaceState(a,"",""+window.location.pathname+o)},t.locationGetFullUrlByParams=function(e){var t=window.location,r=t.search,a=i.default.parse(r,{ignoreQueryPrefix:!0,arrayFormat:s}),o=(0,n.default)({},a,e),l=i.default.stringify(o,{addQueryPrefix:!0,arrayFormat:s});return""+t.origin+t.pathname+l}},dxmFE:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.mimicLinkClick=function(e,t){var r=(0,n.default)(e,"externalLink"),i=(0,n.default)(e,"target");(0,a.default)(r)&&("_blank"!==i?t&&(t.ctrlKey||t.metaKey)?window.open(r):window.location=r:window.open(r))};var n=i(r("dmwIZ")),a=i(r("d4qC0"));function i(e){return e&&e.__esModule?e:{default:e}}},"dy/ur":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=t.ANIMATION_DURATION=void 0;var n,a,i=g(r("dQbLZ")),o=g(r("djo6Y")),s=g(r("diCc5")),l=g(r("dV7oC")),u=g(r("dFYw3")),c=g(r("dmRg0")),d=r("dcDcd"),f=g(d),h=(g(r("d17x9")),g(r("dvN+2"))),p=g(r("dPuqe")),v=g(r("dTSYQ"));function g(e){return e&&e.__esModule?e:{default:e}}r("dtlqc");var m="dropdown-animation",y=t.ANIMATION_DURATION=300,b=(a=n=function(e){function t(e){(0,s.default)(this,t);var r=(0,u.default)(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return r.containerRef=function(e){r.container=e},r.contentRef=function(e){r.content=e},r.toggle=function(){var e=r.props,t=e.hidden,n=e.onAnimationEnd;clearTimeout(r.timer),r.setState({height:r.getElementHeight(r.content.offsetHeight)}),t?r.timer=setTimeout(function(){r.content.style.display="none",r.setState({isAnimationFinished:!0}),n(t)},y):(r.content.style.display="block",r.timer=setTimeout(function(){r.setState({height:r.getElementHeight("auto"),isAnimationFinished:!0}),n(t)},y))},r.state={height:e.hidden?0:r.getElementHeight("auto"),isAnimationFinished:!1},r}return(0,c.default)(t,e),(0,l.default)(t,[{key:"componentDidMount",value:function(){this.props.hidden?this.content.style.display="none":this.setState({isAnimationFinished:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=this,r=e.hidden,n=e.expandedHeight;r!==this.props.hidden&&(r||(this.content.style.display="block"),this.setState({height:this.getElementHeight(this.content.offsetHeight),isAnimationFinished:!1},function(){r&&setTimeout(function(){t.setState({height:0})})})),n!==this.props.expandedHeight&&0!==this.state.height&&this.setState({height:n})}},{key:"componentDidUpdate",value:function(e){e.hidden!==this.props.hidden&&this.toggle()}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer)}},{key:"getElementHeight",value:function(e){return this.props.expandedHeight||e}},{key:"render",value:function(){var e=this.props,t=e.children,r=e.extraClass,n=e.contentId,a=e.contentStyle,s=e.isCloseWithoutAnimation,l=(0,o.default)(e,["children","extraClass","contentId","contentStyle","isCloseWithoutAnimation"]),u=this.state,c=u.height,d=u.isAnimationFinished,h=0===c?"hide":"show";return f.default.createElement("div",(0,i.default)({},(0,p.default)(l,["hidden","onAnimationEnd","expandedHeight"]),{className:(0,v.default)(m,c===this.getElementHeight("auto")&&d&&m+"--auto","hide"===h&&s&&m+"--no-animation",r),style:{height:c},ref:this.containerRef}),f.default.createElement("div",{ref:this.contentRef,id:n,style:a,className:(0,v.default)(m+"__container",m+"__container--"+h,r&&r+"-content")},t))}}]),t}(d.PureComponent),n.defaultProps={onAnimationEnd:h.default},a);t.default=b},dyIOT:function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.resolveInternalAssetsUrl=t.resolveMediaUrl=t.prepareUrlWithContentHash=void 0;var n=i(r("dE+oP")),a=i(r("d4qC0"));function i(e){return e&&e.__esModule?e:{default:e}}var o=t.prepareUrlWithContentHash=function(e,t,r){if(!function(e){return(0,a.default)(e)&&!(0,n.default)(e)}(t))return null;var i=function(e,t){return(0,n.default)(t)||-1!==e.indexOf("?h=")||-1!==e.indexOf("&h=")?"":(/\?/.test(e)?"&":"?")+"h="+t}(t,r);return/^.+:\/\//.test(t)?""+t+i:""+e+t+i};t.resolveMediaUrl=function(e,t){return o(window.process.env.MEDIA_URL||"",e,t)},t.resolveInternalAssetsUrl=function(e,t){return o(window.process.env.UI_ASSETS_URL||"",e,t)}},dyYHT:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p=a(r("dU3K2")),v={player:d.default.object,actions:d.default.object,className:d.default.string,offMenuText:d.default.string,showOffMenu:d.default.bool,kinds:d.default.array},g=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).getTextTrackItems=n.getTextTrackItems.bind((0,u.default)(n)),n.updateState=n.updateState.bind((0,u.default)(n)),n.handleSelectItem=n.handleSelectItem.bind((0,u.default)(n)),n.state=n.getTextTrackItems(),n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"componentDidUpdate",value:function(){this.updateState()}},{key:"getTextTrackItems",value:function(){var e=this.props,t=e.kinds,r=e.player,n=e.offMenuText,a=e.showOffMenu,i=r.textTracks,o=r.activeTextTrack,s={items:[],selectedIndex:0},l=Array.from(i||[]);return 0===l.length||(a&&s.items.push({label:n||"Off",value:null}),l.forEach(function(e){t.length&&!t.includes(e.kind)||s.items.push({label:e.label,value:e.language})}),s.selectedIndex=s.items.findIndex(function(e){return o&&o.language===e.value}),-1===s.selectedIndex&&(s.selectedIndex=0)),s}},{key:"updateState",value:function(){var e=this.getTextTrackItems();e.selectedIndex===this.state.selectedIndex&&this.textTrackItemsAreEqual(e.items,this.state.items)||this.setState(e)}},{key:"textTrackItemsAreEqual",value:function(e,t){if(e.length!==t.length)return!1;for(var r=0;r<e.length;r++)if(!t[r]||e[r].label!==t[r].label||e[r].value!==t[r].value)return!1;return!0}},{key:"handleSelectItem",value:function(e){var t=this.props,r=t.player,n=t.actions,a=t.showOffMenu,i=r.textTracks;Array.from(i).forEach(function(t,r){e===(a?r+1:r)?(t.mode="showing",n.activateTextTrack(t)):t.mode="hidden"})}},{key:"render",value:function(){var e=this.state,t=e.items,r=e.selectedIndex;return f.default.createElement(p.default,{className:(0,h.default)("video-react-closed-caption",this.props.className),onSelectItem:this.handleSelectItem,items:t,selectedIndex:r},f.default.createElement("span",{className:"video-react-control-text"},"Closed Caption"))}}]),t}(f.Component);g.propTypes=v,g.defaultProps={offMenuText:"Off",showOffMenu:!0,kinds:["captions","subtitles"]},g.displayName="ClosedCaptionButton";var m=g;t.default=m},dychU:function(e,t,r){"use strict";r.r(t),r.d(t,"default",function(){return v});var n=r("dwx14"),a=r("d1OyB"),i=r("dvuIU"),o=r("dJi7U"),s=r("dmd7G"),l=r("dfoSv"),u=r("dcDcd"),c=r.n(u),d=r("dTSYQ"),f=r.n(d),h=r("dLBkc"),p=(r("daffn"),c.a.createElement),v=function(e){Object(o.a)(r,e);var t=function(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(e){return!1}}();return function(){var r,n=Object(l.a)(e);if(t){var a=Object(l.a)(this).constructor;r=Reflect.construct(n,arguments,a)}else r=n.apply(this,arguments);return Object(s.a)(this,r)}}(r);function r(){return Object(a.a)(this,r),t.apply(this,arguments)}return Object(i.a)(r,[{key:"render",value:function(){return p(h.a,Object(n.a)({},this.props,{className:f()("login-header"),extraClass:f()("login-content-header")}))}}]),r}(c.a.Component)},dzFvY:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dlwsE")),o=a(r("dW8MJ")),s=a(r("da1gu")),l=a(r("dNsbk")),u=a(r("dPJYZ")),c=a(r("d7W2i")),d=a(r("d9B4+")),f=n(r("dcDcd")),h=a(r("dTSYQ")),p={manager:d.default.object,className:d.default.string},v=function(e){function t(e,r){var n;return(0,i.default)(this,t),(n=(0,s.default)(this,(0,l.default)(t).call(this,e,r))).timer=null,e.manager.subscribeToOperationStateChange(n.handleStateChange.bind((0,u.default)(n))),n.state={hidden:!0,operation:{}},n}return(0,c.default)(t,e),(0,o.default)(t,[{key:"handleStateChange",value:function(e,t){var r=this;e.count!==t.count&&"shortcut"===e.operation.source&&(this.timer&&(clearTimeout(this.timer),this.timer=null),this.setState({hidden:!1,count:e.count,operation:e.operation}),this.timer=setTimeout(function(){r.setState({hidden:!0}),r.timer=null},500))}},{key:"render",value:function(){if("shortcut"!==this.state.operation.source)return null;var e=this.state.hidden?{display:"none"}:null;return f.default.createElement("div",{className:(0,h.default)({"video-react-bezel":!0,"video-react-bezel-animation":this.state.count%2==0,"video-react-bezel-animation-alt":this.state.count%2==1},this.props.className),style:e,role:"status","aria-label":this.state.operation.action},f.default.createElement("div",{className:(0,h.default)("video-react-bezel-icon","video-react-bezel-icon-".concat(this.state.operation.action))}))}}]),t}(f.Component);t.default=v,v.propTypes=p,v.displayName="Bezel"},dzHIc:function(e,t,r){"use strict";var n=r("d284h"),a=r("dTqRt");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var i=a(r("dpVnL")),o=a(r("dlwsE")),s=a(r("dW8MJ")),l=a(r("da1gu")),u=a(r("dNsbk")),c=a(r("dPJYZ")),d=a(r("d7W2i")),f=a(r("d9B4+")),h=n(r("dcDcd")),p=a(r("dTSYQ")),v=n(r("dEVUy")),g=a(r("dxFFL")),m={player:f.default.object,className:f.default.string},y=function(e){function t(e,r){var n;return(0,o.default)(this,t),(n=(0,l.default)(this,(0,u.default)(t).call(this,e,r))).state={mouseTime:{time:null,position:0}},n.handleMouseMoveThrottle=n.handleMouseMove.bind((0,c.default)(n)),n}return(0,d.default)(t,e),(0,s.default)(t,[{key:"handleMouseMove",value:function(e){if(e.pageX){var t=this.props.player.duration,r=this.seekBar,n=v.getPointerPosition(r,e).x*t,a=e.pageX-v.findElPosition(r).left;this.setState({mouseTime:{time:n,position:a}})}}},{key:"render",value:function(){var e=this,t=this.props.className;return h.default.createElement("div",{onMouseMove:this.handleMouseMoveThrottle,className:(0,p.default)("video-react-progress-control video-react-control",t)},h.default.createElement(g.default,(0,i.default)({mouseTime:this.state.mouseTime,ref:function(t){e.seekBar=t}},this.props)))}}]),t}(h.Component);t.default=y,y.propTypes=m,y.displayName="ProgressControl"}},[["dH9CM","static/runtime/webpack.js","rt-acc-common","rt-acc-vendor","rt-acc-eklodash","rt-acc-atoms-vendor"]]]);